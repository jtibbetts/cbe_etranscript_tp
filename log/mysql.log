  [1m[36mLti2Tp::Registry Load (0.3ms)[0m  [1mSELECT `lti2_tp_registries`.* FROM `lti2_tp_registries`[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.3ms)[0m  SELECT `schema_migrations`.* FROM `schema_migrations`
  [1m[36mSQL (26.3ms)[0m  [1mDELETE FROM `lti2_tp_registrations`[0m
  [1m[35mSQL (13.5ms)[0m  DELETE FROM `lti_registration_wips`
  [1m[36mSQL (15.8ms)[0m  [1mDELETE FROM `tenants`[0m
  [1m[35mSQL (22.8ms)[0m  DELETE FROM `iresources`
  [1m[36mLti2Tp::Registry Load (0.4ms)[0m  [1mSELECT `lti2_tp_registries`.* FROM `lti2_tp_registries`[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.2ms)[0m  SELECT `schema_migrations`.* FROM `schema_migrations`
  [1m[36mSQL (6.2ms)[0m  [1mDELETE FROM `lti2_tp_registrations`[0m
  [1m[35mSQL (11.8ms)[0m  DELETE FROM `lti_registration_wips`
  [1m[36mSQL (22.7ms)[0m  [1mDELETE FROM `tenants`[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM `iresources`
  [1m[36mLti2Tp::Registry Load (0.5ms)[0m  [1mSELECT `lti2_tp_registries`.* FROM `lti2_tp_registries`[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.3ms)[0m  SELECT `schema_migrations`.* FROM `schema_migrations`
  [1m[36mSQL (5.9ms)[0m  [1mDELETE FROM `lti2_tp_registrations`[0m
  [1m[35mSQL (12.4ms)[0m  DELETE FROM `lti_registration_wips`
  [1m[36mSQL (11.7ms)[0m  [1mDELETE FROM `tenants`[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM `iresources`
  [1m[36mLti2Tp::Registry Load (0.3ms)[0m  [1mSELECT `lti2_tp_registries`.* FROM `lti2_tp_registries`[0m
  [1m[35mActiveRecord::SchemaMigration Load (1.5ms)[0m  SELECT `schema_migrations`.* FROM `schema_migrations`
  [1m[36mLti2Tp::Registry Load (0.3ms)[0m  [1mSELECT `lti2_tp_registries`.* FROM `lti2_tp_registries`[0m
  [1m[36mLti2Tp::Registry Load (0.3ms)[0m  [1mSELECT `lti2_tp_registries`.* FROM `lti2_tp_registries`[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.2ms)[0m  SELECT `schema_migrations`.* FROM `schema_migrations`
  [1m[36mSQL (12.5ms)[0m  [1mDELETE FROM `lti2_tp_registrations`[0m
  [1m[35mSQL (10.0ms)[0m  DELETE FROM `lti_registration_wips`
  [1m[36mSQL (11.1ms)[0m  [1mDELETE FROM `tenants`[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM `iresources`
  [1m[36mLti2Tp::Registry Load (0.3ms)[0m  [1mSELECT `lti2_tp_registries`.* FROM `lti2_tp_registries`[0m
  [1m[36mLti2Tp::Registry Load (0.3ms)[0m  [1mSELECT `lti2_tp_registries`.* FROM `lti2_tp_registries`[0m
Started POST "/lti2_tp/registrations" for 127.0.0.1 at 2015-05-06 10:37:23 -0400
Processing by Lti2Tp::RegistrationsController#create as HTML
  Parameters: {"lti_message_type"=>"ToolProxyRegistrationRequest", "lti_version"=>"LTI-2p0", "user_id"=>"2", "roles"=>"urn:lti:sysrole:ims/lis/SysAdmin", "tc_profile_url"=>"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/52184910-d62b-0132-88f3-20c9d07c6451", "reg_key"=>"521843b0-d62b-0132-88f3-20c9d07c6451", "reg_password"=>"[FILTERED]", "tc_oauth_half_secret"=>"cfcb5a0e0ee127453b269b5f50fcdab84beb6190556f61bed5114f282a7ef2995e1ba13aa15492d81547bfdba0528881658519337dd2b53eba74eba74b6ee902c308e43c997319159a8d68aa11866b9b9c1ac4df8083a51db3014e143fa9ef53be67c17708740b8f1b4830841f3e69a11d01cf80820a1c2df6caa1e12904c008", "launch_presentation_return_url"=>"http://rails.kinexis.com:4000/admin/tool_actions", "launch_presentation_document_target"=>"window"}
  [1m[35mLti2Tp::Tool Load (0.8ms)[0m  SELECT  `lti2_tp_tools`.* FROM `lti2_tp_tools`   ORDER BY `lti2_tp_tools`.`id` ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO `lti2_tp_registrations` (`created_at`, `launch_presentation_return_url`, `lti_version`, `message_type`, `reg_key`, `reg_password`, `status`, `tc_oauth_half_secret`, `tc_profile_url`, `tenant_basename`, `tenant_name`, `tool_consumer_profile_json`, `tool_id`, `tool_profile_json`, `updated_at`, `user_id`) VALUES ('2015-05-06 14:37:23', 'http://rails.kinexis.com:4000/admin/tool_actions', 'LTI-2p0', 'registration', '521843b0-d62b-0132-88f3-20c9d07c6451', '6bba0ba13f2b52280d1a9fe2514a3f54', 'received', 'cfcb5a0e0ee127453b269b5f50fcdab84beb6190556f61bed5114f282a7ef2995e1ba13aa15492d81547bfdba0528881658519337dd2b53eba74eba74b6ee902c308e43c997319159a8d68aa11866b9b9c1ac4df8083a51db3014e143fa9ef53be67c17708740b8f1b4830841f3e69a11d01cf80820a1c2df6caa1e12904c008', 'http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/52184910-d62b-0132-88f3-20c9d07c6451', 'Elan University', 'Elan University', '{\"@context\":[\"http://purl.imsglobal.org/ctx/lti/v2/ToolConsumerProfile\",{\"ltitcp\":\"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/52184910-d62b-0132-88f3-20c9d07c6451#\"}],\"@type\":\"ToolConsumerProfile\",\"@id\":\"http://rails.kinexis.com:4000/tool_consumer_profiles/52184910-d62b-0132-88f3-20c9d07c6451\",\"lti_version\":\"LTI-2p0\",\"guid\":\"52184910-d62b-0132-88f3-20c9d07c6451\",\"product_instance\":{\"guid\":\"dcddf9808107-81ea-eaa4-1edf-5d24568c\",\"product_info\":{\"product_name\":{\"default_value\":\"Elan/LuMoS\",\"key\":\"product.name\"},\"product_version\":\"3.1\",\"description\":{\"default_value\":\"Elan University/LuMoS Learning Platform\",\"key\":\"product.version\"},\"technical_description\":{\"default_value\":\"LTI 1, 1.1 and 2.0 compliant\",\"key\":\"product.technicalDescription\"},\"product_family\":{\"code\":\"LuMoS\",\"vendor\":{\"code\":\"lms.LuMoS.org\",\"vendor_name\":{\"default_value\":\"LuMoS Corporation\",\"key\":\"product.vendor.name\"},\"description\":{\"default_value\":\"LuMoS Corporation is a fictitious vendor of a Learning Management System\",\"key\":\"product.vendor.description\"},\"website\":\"http://lms.LuMoS.org/products/omega\",\"timestamp\":\"2012-07-09T012:08:16-04:00\",\"contact\":{\"email\":\"support@lms.LuMoS.org\"}}}},\"support\":{\"email\":\"john.tibbetts@kinexis.com\"},\"service_owner\":{\"@id\":\"http://ec2.LuMoS.org/ServiceOwner\",\"timestamp\":\"2012-03-28T09:08:16-04:00\",\"service_owner_name\":{\"default_value\":\"Elan University\",\"key\":\"service_owner.name\"},\"description\":{\"default_value\":\"Elan University EC2 Cloud\",\"key\":\"service_owner.description\"},\"support\":{\"email\":\"techsupport@elan.edu\"}},\"service_provider\":{\"@id\":\"http://ec2.LuMoS.org/ServiceProvider\",\"guid\":\"ec2.LuMoS.org\",\"timestamp\":\"2012-07-09T012:08:16-04:00\",\"service_provider_name\":{\"default_value\":\"Elan University\",\"key\":\"service_provider.name\"},\"description\":{\"default_value\":\"Elan University EC2 Cloud\",\"key\":\"service_provider.description\"},\"support\":{\"email\":\"support@yasp.LuMoS.org\"}}},\"capability_offered\":[\"basic-lti-launch-request\",\"Result.autocreate\",\"Result.sourcedId\",\"User.id\",\"User.username\",\"CourseSection.sourcedId\",\"Person.sourcedId\",\"Person.email.primary\",\"Person.name.given\",\"Person.name.family\",\"Person.name.full\",\"Membership.role\",\"ToolProxy.custom.url\",\"ToolProxyBinding.custom.url\",\"LtiLink.custom.url\",\"ToolConsumerProfile.url\",\"OAuth.splitsecret\"],\"service_offered\":[{\"@type\":\"RestService\",\"@id\":\"ltitcp:ToolProxy.collection\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tools\",\"format\":[\"application/vnd.ims.lti.v2.toolproxy+json\"],\"action\":[\"POST\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:ToolProxy.item\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tools/{tool_proxy_guid}\",\"format\":[\"application/vnd.ims.lti.v2.toolproxy+json\"],\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:Result.item\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/resources/Result/{sourcedId}\",\"format\":[\"application/vnd.ims.lis.v2.result+json\"],\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:LtiLinkSettings\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tool_settings/{tool_proxy_guid}/ltilink/{link_id}\",\"format\":[\"application/vnd.ims.lti.v2.toolsettings+json\",\"application/vnd.ims.lti.v2.toolsettings.simple+json\"],\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:ToolProxyBindingSettings\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tool_settings/{tool_proxy_guid}/context/{context_id}\",\"format\":[\"application/vnd.ims.lti.v2.toolsettings+json\",\"application/vnd.ims.lti.v2.toolsettings.simple+json\"],\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:ToolProxySettings\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tool_settings/{tool_proxy_guid}\",\"format\":[\"application/vnd.ims.lti.v2.toolsettings+json\",\"application/vnd.ims.lti.v2.toolsettings.simple+json\"],\"action\":[\"GET\",\"PUT\"]}]}', 2, '{\"base_url_choice\":[{\"default_base_url\":\"http://rails.kinexis.com:5000\",\"selector\":{\"applies_to\":[\"IconEndpoint\",\"MessageHandler\"]}}],\"lti_version\":\"LTI-2p0\",\"message\":[{\"message_type\":[\"ToolProxyRegistrationRequest\",\"ToolProxyReregistrationRequest\"],\"parameter\":[{\"name\":\"tc_profile_url\",\"variable\":\"ToolConsumerProfile.url\"}],\"path\":\"http://rails.kinexis.com:5000/lti2_tp/reregistrations\"}],\"product_instance\":{\"guid\":\"fd75124a-140e-470f-944c-114d2d92bb40\",\"product_info\":{\"description\":{\"default_value\":\"Fabericious reflowable ePub3 Textbook\",\"key\":\"tool.description\"},\"product_family\":{\"code\":\"assessment-tool\",\"vendor\":{\"code\":\"fabericious.org\",\"contact\":{\"email\":\"info@fabericious.com\"},\"description\":{\"default_value\":\"Fabericious is a leading provider of interactive tools for education\",\"key\":\"tool.vendor.description\"},\"vendor_name\":{\"default_value\":\"Fab\",\"key\":\"tool.vendor.name\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\",\"website\":\"{http://rails.kinexis.com:5000}\"}},\"product_name\":{\"default_value\":\"LTI2 BookTools\",\"key\":\"tool.name\"},\"product_version\":\"10.3\",\"technical_description\":{\"default_value\":\"Support provided for all LTI 1 extensions as well as LTI 2\",\"key\":\"tool.technical\"}},\"service_provider\":{\"description\":{\"default_value\":\"Provider of high performance managed hosting environments\",\"key\":\"service_provider.description\"},\"guid\":\"18e7ea50-3d6d-4f6b-aff2-ed3ab577716c\",\"service_provider_name\":{\"default_value\":\"Amazon Cloud\",\"key\":\"service_provider.name\"},\"support\":{\"email\":\"support@ec2.fabericious.com\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\"},\"support\":{\"email\":\"helpdesk@fabericious.com\"}},\"resource_handler\":[{\"description\":{\"default_value\":\"Settings service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"tool_proxy_custom_url\",\"variable\":\"ToolProxy.custom.url\"},{\"name\":\"tool_proxy_binding_custom_url\",\"variable\":\"ToolProxyBinding.custom.url\"},{\"name\":\"lti_link_custom_url\",\"variable\":\"LtiLink.custom.url\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"ToolProxy.custom.url\",\"ToolProxyBinding.custom.url\",\"LtiLink.custom.url\"],\"path\":\"/settings\"}],\"resource_name\":{\"default_value\":\"Settings\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"setting\"}},{\"description\":{\"default_value\":\"Echo service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"fixed\":\"Narcissus\",\"name\":\"referrer\"},{\"fixed\":\"3.14159\",\"name\":\"pi\"},{\"name\":\"user_primary_email\",\"variable\":\"Person.email.primary\"},{\"name\":\"discipline\",\"variable\":\"CourseOffering.label\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\"],\"path\":\"/echoes\"}],\"resource_name\":{\"default_value\":\"Echo\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"echo\"}},{\"description\":{\"default_value\":\"Interactive resource\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"vbid\"},{\"name\":\"result_uri\",\"variable\":\"Result.uri\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"Result.autocreate\"],\"path\":\"/iresources\"}],\"resource_name\":{\"default_value\":\"InteractiveResource\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"iresource\"}}],\"service_offered\":[{\"@id\":\"http://rails.kinexis.com:5000/lti2_tp/ToolProxy.collection\",\"@type\":\"RestService\",\"action\":[\"PUT\"],\"endpoint\":\"http://rails.kinexis.com:5000/lti2_tp/tool_proxies\",\"format\":[\"\"]}]}', '2015-05-06 14:37:23', '2')
  [1m[36m (6.2ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:5000/lti_registration_wips?registration_id=11&return_url=/lti2_tp/registrations
Completed 302 Found in 121ms (ActiveRecord: 32.5ms)
Started GET "/lti_registration_wips?registration_id=11&return_url=/lti2_tp/registrations" for 127.0.0.1 at 2015-05-06 10:37:23 -0400
Processing by LtiRegistrationWipsController#index as HTML
  Parameters: {"registration_id"=>"11", "return_url"=>"/lti2_tp/registrations"}
  [1m[35mLti2Tp::Registration Load (0.3ms)[0m  SELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 11 LIMIT 1
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO `lti_registration_wips` (`created_at`, `product_name`, `registration_id`, `registration_return_url`, `support_email`, `tenant_name`, `updated_at`) VALUES ('2015-05-06 14:37:23', 'Elan/LuMoS', 11, '/lti2_tp/registrations', 'john.tibbetts@kinexis.com', 'Elan University', '2015-05-06 14:37:23')
  [1m[36m (0.4ms)[0m  [1mCOMMIT[0m
  Rendered lti_registration_wips/_form.html.haml (173.2ms)
  Rendered lti_registration_wips/index.html.haml within layouts/application (183.5ms)
Completed 200 OK in 2706ms (Views: 2665.3ms | ActiveRecord: 21.6ms)
Started GET "/assets/application.css" for 127.0.0.1 at 2015-05-06 10:37:26 -0400
Started GET "/assets/formtastic.css" for 127.0.0.1 at 2015-05-06 10:37:26 -0400
Started GET "/assets/my_formtastic_changes.css" for 127.0.0.1 at 2015-05-06 10:37:26 -0400
Started PATCH "/lti_registration_wips/10" for 127.0.0.1 at 2015-05-06 10:37:32 -0400
Processing by LtiRegistrationWipsController#update as HTML
  Parameters: {"utf8"=>"âœ“", "lti_registration_wip"=>{"support_email"=>"john.tibbetts@kinexis.com", "product_name"=>"Elan/LuMoS", "tenant_name"=>"Elan University1037"}, "commit"=>"Update Lti registration wip", "id"=>"10"}
  [1m[35mLtiRegistrationWip Load (0.3ms)[0m  SELECT  `lti_registration_wips`.* FROM `lti_registration_wips`  WHERE `lti_registration_wips`.`id` = 10 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE `lti_registration_wips` SET `tenant_name` = 'Elan University1037', `updated_at` = '2015-05-06 14:37:32' WHERE `lti_registration_wips`.`id` = 10
  [1m[36m (6.0ms)[0m  [1mCOMMIT[0m
  [1m[35mLti2Tp::Registration Load (0.4ms)[0m  SELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 11 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE `lti2_tp_registrations` SET `tenant_name` = 'Elan University1037', `updated_at` = '2015-05-06 14:37:32' WHERE `lti2_tp_registrations`.`id` = 11
  [1m[36m (12.3ms)[0m  [1mCOMMIT[0m
  [1m[35mLtiRegistrationWip Load (0.3ms)[0m  SELECT  `lti_registration_wips`.* FROM `lti_registration_wips`  WHERE `lti_registration_wips`.`id` = 10 LIMIT 1
  [1m[36mLti2Tp::Registration Load (0.2ms)[0m  [1mSELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 11 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mTenant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `tenants`  WHERE `tenants`.`tenant_name` = BINARY 'Elan University1037' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `tenants` (`created_at`, `tenant_name`, `updated_at`) VALUES ('2015-05-06 14:37:32', 'Elan University1037', '2015-05-06 14:37:32')
  [1m[36m (11.7ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mUPDATE `lti2_tp_registrations` SET `end_registration_id` = '5ac23540-d62b-0132-88f4-20c9d07c6451', `tool_proxy_json` = '{\"@context\":[\"http://purl.imsglobal.org/ctx/lti/v2/ToolConsumerProfile\",{\"ltitcp\":\"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/52184910-d62b-0132-88f3-20c9d07c6451#\"}],\"@type\":\"ToolProxy\",\"@id\":\"ToolProxyProposal_at_2015-05-06T14:37:33Z\",\"lti_version\":\"LTI-2p0\",\"tool_proxy_guid\":\"521843b0-d62b-0132-88f3-20c9d07c6451\",\"tool_consumer_profile\":\"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/52184910-d62b-0132-88f3-20c9d07c6451\",\"tool_profile\":{\"base_url_choice\":[{\"default_base_url\":\"http://rails.kinexis.com:5000\",\"selector\":{\"applies_to\":[\"IconEndpoint\",\"MessageHandler\"]}}],\"lti_version\":\"LTI-2p0\",\"message\":[{\"message_type\":[\"ToolProxyRegistrationRequest\",\"ToolProxyReregistrationRequest\"],\"parameter\":[{\"name\":\"tc_profile_url\",\"variable\":\"ToolConsumerProfile.url\"}],\"path\":\"http://rails.kinexis.com:5000/lti2_tp/reregistrations\"}],\"product_instance\":{\"guid\":\"fd75124a-140e-470f-944c-114d2d92bb40\",\"product_info\":{\"description\":{\"default_value\":\"Fabericious reflowable ePub3 Textbook\",\"key\":\"tool.description\"},\"product_family\":{\"code\":\"assessment-tool\",\"vendor\":{\"code\":\"fabericious.org\",\"contact\":{\"email\":\"info@fabericious.com\"},\"description\":{\"default_value\":\"Fabericious is a leading provider of interactive tools for education\",\"key\":\"tool.vendor.description\"},\"vendor_name\":{\"default_value\":\"Fab\",\"key\":\"tool.vendor.name\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\",\"website\":\"{http://rails.kinexis.com:5000}\"}},\"product_name\":{\"default_value\":\"LTI2 BookTools\",\"key\":\"tool.name\"},\"product_version\":\"10.3\",\"technical_description\":{\"default_value\":\"Support provided for all LTI 1 extensions as well as LTI 2\",\"key\":\"tool.technical\"}},\"service_provider\":{\"description\":{\"default_value\":\"Provider of high performance managed hosting environments\",\"key\":\"service_provider.description\"},\"guid\":\"18e7ea50-3d6d-4f6b-aff2-ed3ab577716c\",\"service_provider_name\":{\"default_value\":\"Amazon Cloud\",\"key\":\"service_provider.name\"},\"support\":{\"email\":\"support@ec2.fabericious.com\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\"},\"support\":{\"email\":\"helpdesk@fabericious.com\"}},\"resource_handler\":[{\"description\":{\"default_value\":\"Settings service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"tool_proxy_custom_url\",\"variable\":\"ToolProxy.custom.url\"},{\"name\":\"tool_proxy_binding_custom_url\",\"variable\":\"ToolProxyBinding.custom.url\"},{\"name\":\"lti_link_custom_url\",\"variable\":\"LtiLink.custom.url\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"ToolProxy.custom.url\",\"ToolProxyBinding.custom.url\",\"LtiLink.custom.url\"],\"path\":\"/settings\"}],\"resource_name\":{\"default_value\":\"Settings\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"setting\"}},{\"description\":{\"default_value\":\"Echo service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"fixed\":\"Narcissus\",\"name\":\"referrer\"},{\"fixed\":\"3.14159\",\"name\":\"pi\"},{\"name\":\"user_primary_email\",\"variable\":\"Person.email.primary\"},{\"name\":\"discipline\",\"variable\":\"CourseOffering.label\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\"],\"path\":\"/echoes\"}],\"resource_name\":{\"default_value\":\"Echo\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"echo\"}},{\"description\":{\"default_value\":\"Interactive resource\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"vbid\"},{\"name\":\"result_uri\",\"variable\":\"Result.uri\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"Result.autocreate\"],\"path\":\"/iresources\"}],\"resource_name\":{\"default_value\":\"InteractiveResource\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"iresource\"}}],\"service_offered\":[{\"@id\":\"http://rails.kinexis.com:5000/lti2_tp/ToolProxy.collection\",\"@type\":\"RestService\",\"action\":[\"PUT\"],\"endpoint\":\"http://rails.kinexis.com:5000/lti2_tp/tool_proxies\",\"format\":[\"\"]}]},\"security_contract\":{\"shared_secret\":\"e663e79541855be557e2953a85c37d44\",\"tool_service\":[{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxy.collection\",\"action\":[\"POST\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxy.item\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:Result.item\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:LtiLinkSettings\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxyBindingSettings\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxySettings\",\"action\":[\"GET\",\"PUT\"]}]}}', `updated_at` = '2015-05-06 14:37:33' WHERE `lti2_tp_registrations`.`id` = 11[0m
  [1m[35m (11.7ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE `lti2_tp_registrations` SET `status` = 'register', `updated_at` = '2015-05-06 14:37:33' WHERE `lti2_tp_registrations`.`id` = 11
  [1m[36m (6.0ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mTenant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `tenants`  WHERE (`tenants`.`tenant_name` = BINARY 'Elan University1037' AND `tenants`.`id` != 5) LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE `tenants` SET `secret` = 'e663e79541855be557e2953a85c37d44', `tenant_key` = '521843b0-d62b-0132-88f3-20c9d07c6451', `updated_at` = '2015-05-06 14:37:33' WHERE `tenants`.`id` = 5
  [1m[36m (6.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (6.6ms)[0m  [1mUPDATE `lti2_tp_registrations` SET `tenant_id` = 5, `updated_at` = '2015-05-06 14:37:33' WHERE `lti2_tp_registrations`.`id` = 11[0m
  [1m[35m (0.7ms)[0m  COMMIT
Redirected to http://localhost:5000/lti2_tp/registrations?status=success&tool_guid=521843b0-d62b-0132-88f3-20c9d07c6451&&id=11
Completed 302 Found in 233ms (ActiveRecord: 85.8ms)
Started GET "/lti2_tp/registrations?status=success&tool_guid=521843b0-d62b-0132-88f3-20c9d07c6451&&id=11" for 127.0.0.1 at 2015-05-06 10:37:33 -0400
Processing by Lti2Tp::RegistrationsController#index as HTML
  Parameters: {"status"=>"success", "tool_guid"=>"521843b0-d62b-0132-88f3-20c9d07c6451", "id"=>"11"}
  [1m[36mLti2Tp::Registration Load (0.8ms)[0m  [1mSELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 11 LIMIT 1[0m
Redirected to http://rails.kinexis.com:4000/admin/tool_actions?status=success&tool_guid=521843b0-d62b-0132-88f3-20c9d07c6451
Completed 302 Found in 2ms (ActiveRecord: 0.8ms)
  [1m[36mLti2Tp::Registry Load (0.3ms)[0m  [1mSELECT `lti2_tp_registries`.* FROM `lti2_tp_registries`[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.2ms)[0m  SELECT `schema_migrations`.* FROM `schema_migrations`
  [1m[36mSQL (12.7ms)[0m  [1mDELETE FROM `lti2_tp_registrations`[0m
  [1m[35mSQL (8.7ms)[0m  DELETE FROM `lti_registration_wips`
  [1m[36mSQL (12.6ms)[0m  [1mDELETE FROM `tenants`[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM `iresources`
  [1m[36mLti2Tp::Registry Load (0.3ms)[0m  [1mSELECT `lti2_tp_registries`.* FROM `lti2_tp_registries`[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.2ms)[0m  SELECT `schema_migrations`.* FROM `schema_migrations`
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM `lti2_tp_registrations`[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM `lti_registration_wips`
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM `tenants`[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM `iresources`
  [1m[36mLti2Tp::Registry Load (10.4ms)[0m  [1mSELECT `lti2_tp_registries`.* FROM `lti2_tp_registries`[0m
  [1m[35mActiveRecord::SchemaMigration Load (1.8ms)[0m  SELECT `schema_migrations`.* FROM `schema_migrations`
  [1m[36mSQL (29.4ms)[0m  [1mDELETE FROM `lti2_tp_registrations`[0m
  [1m[35mSQL (27.1ms)[0m  DELETE FROM `lti_registration_wips`
  [1m[36mSQL (19.8ms)[0m  [1mDELETE FROM `tenants`[0m
  [1m[35mSQL (25.8ms)[0m  DELETE FROM `iresources`
  [1m[36mLti2Tp::Registry Load (21.5ms)[0m  [1mSELECT `lti2_tp_registries`.* FROM `lti2_tp_registries`[0m
  [1m[35mActiveRecord::SchemaMigration Load (13.0ms)[0m  SELECT `schema_migrations`.* FROM `schema_migrations`
  [1m[36mSQL (12.8ms)[0m  [1mDELETE FROM `lti2_tp_registrations`[0m
  [1m[35mSQL (6.5ms)[0m  DELETE FROM `lti_registration_wips`
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM `tenants`[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM `iresources`
  [1m[36mLti2Tp::Registry Load (0.3ms)[0m  [1mSELECT `lti2_tp_registries`.* FROM `lti2_tp_registries`[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.2ms)[0m  SELECT `schema_migrations`.* FROM `schema_migrations`
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM `lti2_tp_registrations`[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM `lti_registration_wips`
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM `tenants`[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM `iresources`
  [1m[36mLti2Tp::Registry Load (0.3ms)[0m  [1mSELECT `lti2_tp_registries`.* FROM `lti2_tp_registries`[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.2ms)[0m  SELECT `schema_migrations`.* FROM `schema_migrations`
  [1m[36mLti2Tp::Registry Load (3.3ms)[0m  [1mSELECT `lti2_tp_registries`.* FROM `lti2_tp_registries`[0m
  [1m[36mLti2Tp::Registry Load (0.4ms)[0m  [1mSELECT `lti2_tp_registries`.* FROM `lti2_tp_registries`[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.2ms)[0m  SELECT `schema_migrations`.* FROM `schema_migrations`
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM `lti2_tp_registrations`[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM `lti_registration_wips`
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM `tenants`[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM `iresources`
  [1m[36mLti2Tp::Registry Load (0.3ms)[0m  [1mSELECT `lti2_tp_registries`.* FROM `lti2_tp_registries`[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.2ms)[0m  SELECT `schema_migrations`.* FROM `schema_migrations`
  [1m[36mLti2Tp::Registry Load (0.5ms)[0m  [1mSELECT `lti2_tp_registries`.* FROM `lti2_tp_registries`[0m
  [1m[36mLti2Tp::Registry Load (0.3ms)[0m  [1mSELECT `lti2_tp_registries`.* FROM `lti2_tp_registries`[0m
Started POST "/lti2_tp/registrations" for 127.0.0.1 at 2015-05-11 07:36:21 -0700
Processing by Lti2Tp::RegistrationsController#create as HTML
  Parameters: {"lti_message_type"=>"ToolProxyRegistrationRequest", "lti_version"=>"LTI-2p0", "user_id"=>"2", "roles"=>"urn:lti:sysrole:ims/lis/SysAdmin", "tc_profile_url"=>"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/0116a450-da19-0132-bae2-20c9d07c6451", "reg_key"=>"0115cb70-da19-0132-bae2-20c9d07c6451", "reg_password"=>"[FILTERED]", "tc_oauth_half_secret"=>"199c40780106bea87eb00f88f9d4d3dd8e6d4046eec7730e13595da81d42441f967922f2785bea6413b39b07ea0b3fee7dd9461df8521096fe25039bde6e2ba5977d9b8d1c3df4b626d22bbb6d69295138f0f033a2bc4a7224c10907869ff01cefea7a4226285176f63d057667727b363c96f3f0197f5fb57834eda6509b7c8d", "launch_presentation_return_url"=>"http://rails.kinexis.com:4000/admin/tool_actions", "launch_presentation_document_target"=>"window"}
  [1m[35mLti2Tp::Tool Load (0.7ms)[0m  SELECT  `lti2_tp_tools`.* FROM `lti2_tp_tools`   ORDER BY `lti2_tp_tools`.`id` ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO `lti2_tp_registrations` (`created_at`, `launch_presentation_return_url`, `lti_version`, `message_type`, `reg_key`, `reg_password`, `status`, `tc_oauth_half_secret`, `tc_profile_url`, `tenant_basename`, `tenant_name`, `tool_consumer_profile_json`, `tool_id`, `tool_profile_json`, `updated_at`, `user_id`) VALUES ('2015-05-11 14:36:21', 'http://rails.kinexis.com:4000/admin/tool_actions', 'LTI-2p0', 'registration', '0115cb70-da19-0132-bae2-20c9d07c6451', 'ebacf8ae7b0996ac7baa15a58180290f', 'received', '199c40780106bea87eb00f88f9d4d3dd8e6d4046eec7730e13595da81d42441f967922f2785bea6413b39b07ea0b3fee7dd9461df8521096fe25039bde6e2ba5977d9b8d1c3df4b626d22bbb6d69295138f0f033a2bc4a7224c10907869ff01cefea7a4226285176f63d057667727b363c96f3f0197f5fb57834eda6509b7c8d', 'http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/0116a450-da19-0132-bae2-20c9d07c6451', 'Elan University', 'Elan University', '{\"@context\":[\"http://purl.imsglobal.org/ctx/lti/v2/ToolConsumerProfile\",{\"ltitcp\":\"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/0116a450-da19-0132-bae2-20c9d07c6451#\"}],\"@type\":\"ToolConsumerProfile\",\"@id\":\"http://rails.kinexis.com:4000/tool_consumer_profiles/0116a450-da19-0132-bae2-20c9d07c6451\",\"lti_version\":\"LTI-2p0\",\"guid\":\"0116a450-da19-0132-bae2-20c9d07c6451\",\"product_instance\":{\"guid\":\"dcddf9808107-81ea-eaa4-1edf-5d24568c\",\"product_info\":{\"product_name\":{\"default_value\":\"Elan/LuMoS\",\"key\":\"product.name\"},\"product_version\":\"3.1\",\"description\":{\"default_value\":\"Elan University/LuMoS Learning Platform\",\"key\":\"product.version\"},\"technical_description\":{\"default_value\":\"LTI 1, 1.1 and 2.0 compliant\",\"key\":\"product.technicalDescription\"},\"product_family\":{\"code\":\"LuMoS\",\"vendor\":{\"code\":\"lms.LuMoS.org\",\"vendor_name\":{\"default_value\":\"LuMoS Corporation\",\"key\":\"product.vendor.name\"},\"description\":{\"default_value\":\"LuMoS Corporation is a fictitious vendor of a Learning Management System\",\"key\":\"product.vendor.description\"},\"website\":\"http://lms.LuMoS.org/products/omega\",\"timestamp\":\"2012-07-09T012:08:16-04:00\",\"contact\":{\"email\":\"support@lms.LuMoS.org\"}}}},\"support\":{\"email\":\"john.tibbetts@kinexis.com\"},\"service_owner\":{\"@id\":\"http://ec2.LuMoS.org/ServiceOwner\",\"timestamp\":\"2012-03-28T09:08:16-04:00\",\"service_owner_name\":{\"default_value\":\"Elan University\",\"key\":\"service_owner.name\"},\"description\":{\"default_value\":\"Elan University EC2 Cloud\",\"key\":\"service_owner.description\"},\"support\":{\"email\":\"techsupport@elan.edu\"}},\"service_provider\":{\"@id\":\"http://ec2.LuMoS.org/ServiceProvider\",\"guid\":\"ec2.LuMoS.org\",\"timestamp\":\"2012-07-09T012:08:16-04:00\",\"service_provider_name\":{\"default_value\":\"Elan University\",\"key\":\"service_provider.name\"},\"description\":{\"default_value\":\"Elan University EC2 Cloud\",\"key\":\"service_provider.description\"},\"support\":{\"email\":\"support@yasp.LuMoS.org\"}}},\"capability_offered\":[\"basic-lti-launch-request\",\"Result.autocreate\",\"Result.sourcedId\",\"User.id\",\"User.username\",\"CourseSection.sourcedId\",\"Person.sourcedId\",\"Person.email.primary\",\"Person.name.given\",\"Person.name.family\",\"Person.name.full\",\"Membership.role\",\"ToolProxy.custom.url\",\"ToolProxyBinding.custom.url\",\"LtiLink.custom.url\",\"ToolConsumerProfile.url\",\"OAuth.splitsecret\"],\"service_offered\":[{\"@type\":\"RestService\",\"@id\":\"ltitcp:ToolProxy.collection\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tools\",\"format\":[\"application/vnd.ims.lti.v2.toolproxy+json\"],\"action\":[\"POST\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:ToolProxy.item\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tools/{tool_proxy_guid}\",\"format\":[\"application/vnd.ims.lti.v2.toolproxy+json\"],\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:Result.item\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/resources/Result/{sourcedId}\",\"format\":[\"application/vnd.ims.lis.v2.result+json\"],\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:LtiLinkSettings\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tool_settings/{tool_proxy_guid}/ltilink/{link_id}\",\"format\":[\"application/vnd.ims.lti.v2.toolsettings+json\",\"application/vnd.ims.lti.v2.toolsettings.simple+json\"],\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:ToolProxyBindingSettings\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tool_settings/{tool_proxy_guid}/context/{context_id}\",\"format\":[\"application/vnd.ims.lti.v2.toolsettings+json\",\"application/vnd.ims.lti.v2.toolsettings.simple+json\"],\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:ToolProxySettings\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tool_settings/{tool_proxy_guid}\",\"format\":[\"application/vnd.ims.lti.v2.toolsettings+json\",\"application/vnd.ims.lti.v2.toolsettings.simple+json\"],\"action\":[\"GET\",\"PUT\"]}]}', 2, '{\"base_url_choice\":[{\"default_base_url\":\"http://rails.kinexis.com:5000\",\"selector\":{\"applies_to\":[\"IconEndpoint\",\"MessageHandler\"]}}],\"lti_version\":\"LTI-2p0\",\"message\":[{\"message_type\":[\"ToolProxyRegistrationRequest\",\"ToolProxyReregistrationRequest\"],\"parameter\":[{\"name\":\"tc_profile_url\",\"variable\":\"ToolConsumerProfile.url\"}],\"path\":\"http://rails.kinexis.com:5000/lti2_tp/reregistrations\"}],\"product_instance\":{\"guid\":\"fd75124a-140e-470f-944c-114d2d92bb40\",\"product_info\":{\"description\":{\"default_value\":\"Fabericious reflowable ePub3 Textbook\",\"key\":\"tool.description\"},\"product_family\":{\"code\":\"assessment-tool\",\"vendor\":{\"code\":\"fabericious.org\",\"contact\":{\"email\":\"info@fabericious.com\"},\"description\":{\"default_value\":\"Fabericious is a leading provider of interactive tools for education\",\"key\":\"tool.vendor.description\"},\"vendor_name\":{\"default_value\":\"Fab\",\"key\":\"tool.vendor.name\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\",\"website\":\"{http://rails.kinexis.com:5000}\"}},\"product_name\":{\"default_value\":\"LTI2 BookTools\",\"key\":\"tool.name\"},\"product_version\":\"10.3\",\"technical_description\":{\"default_value\":\"Support provided for all LTI 1 extensions as well as LTI 2\",\"key\":\"tool.technical\"}},\"service_provider\":{\"description\":{\"default_value\":\"Provider of high performance managed hosting environments\",\"key\":\"service_provider.description\"},\"guid\":\"18e7ea50-3d6d-4f6b-aff2-ed3ab577716c\",\"service_provider_name\":{\"default_value\":\"Amazon Cloud\",\"key\":\"service_provider.name\"},\"support\":{\"email\":\"support@ec2.fabericious.com\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\"},\"support\":{\"email\":\"helpdesk@fabericious.com\"}},\"resource_handler\":[{\"description\":{\"default_value\":\"Settings service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"tool_proxy_custom_url\",\"variable\":\"ToolProxy.custom.url\"},{\"name\":\"tool_proxy_binding_custom_url\",\"variable\":\"ToolProxyBinding.custom.url\"},{\"name\":\"lti_link_custom_url\",\"variable\":\"LtiLink.custom.url\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"ToolProxy.custom.url\",\"ToolProxyBinding.custom.url\",\"LtiLink.custom.url\"],\"path\":\"/settings\"}],\"resource_name\":{\"default_value\":\"Settings\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"setting\"}},{\"description\":{\"default_value\":\"Echo service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"fixed\":\"Narcissus\",\"name\":\"referrer\"},{\"fixed\":\"3.14159\",\"name\":\"pi\"},{\"name\":\"user_primary_email\",\"variable\":\"Person.email.primary\"},{\"name\":\"discipline\",\"variable\":\"CourseOffering.label\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\"],\"path\":\"/echoes\"}],\"resource_name\":{\"default_value\":\"Echo\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"echo\"}},{\"description\":{\"default_value\":\"Interactive resource\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"vbid\"},{\"name\":\"result_uri\",\"variable\":\"Result.uri\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"Result.autocreate\"],\"path\":\"/iresources\"}],\"resource_name\":{\"default_value\":\"InteractiveResource\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"iresource\"}}],\"service_offered\":[{\"@id\":\"http://rails.kinexis.com:5000/lti2_tp/ToolProxy.collection\",\"@type\":\"RestService\",\"action\":[\"PUT\"],\"endpoint\":\"http://rails.kinexis.com:5000/lti2_tp/tool_proxies\",\"format\":[\"\"]}]}', '2015-05-11 14:36:21', '2')
  [1m[36m (11.3ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:5000/lti_registration_wips?registration_id=1&return_url=/lti2_tp/registrations
Completed 302 Found in 174ms (ActiveRecord: 30.8ms)
Started GET "/lti_registration_wips?registration_id=1&return_url=/lti2_tp/registrations" for 127.0.0.1 at 2015-05-11 07:36:21 -0700
Processing by LtiRegistrationWipsController#index as HTML
  Parameters: {"registration_id"=>"1", "return_url"=>"/lti2_tp/registrations"}
  [1m[35mLti2Tp::Registration Load (0.7ms)[0m  SELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 1 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `lti_registration_wips` (`created_at`, `product_name`, `registration_id`, `registration_return_url`, `support_email`, `tenant_name`, `updated_at`) VALUES ('2015-05-11 14:36:21', 'Elan/LuMoS', 1, '/lti2_tp/registrations', 'john.tibbetts@kinexis.com', 'Elan University', '2015-05-11 14:36:21')
  [1m[36m (6.0ms)[0m  [1mCOMMIT[0m
  Rendered lti_registration_wips/_form.html.haml (144.4ms)
  Rendered lti_registration_wips/index.html.haml within layouts/application (151.5ms)
Completed 200 OK in 265ms (Views: 223.5ms | ActiveRecord: 26.3ms)
Started GET "/assets/application.css" for 127.0.0.1 at 2015-05-11 07:36:21 -0700
Started GET "/assets/my_formtastic_changes.css" for 127.0.0.1 at 2015-05-11 07:36:21 -0700
Started GET "/assets/formtastic.css" for 127.0.0.1 at 2015-05-11 07:36:21 -0700
Started GET "/assets/fabericious.png" for 127.0.0.1 at 2015-05-11 07:36:21 -0700
Started PATCH "/lti_registration_wips/1" for 127.0.0.1 at 2015-05-11 07:36:27 -0700
Processing by LtiRegistrationWipsController#update as HTML
  Parameters: {"utf8"=>"âœ“", "lti_registration_wip"=>{"support_email"=>"john.tibbetts@kinexis.com", "product_name"=>"Elan/LuMoS", "tenant_name"=>"Elan University736"}, "commit"=>"Update Lti registration wip", "id"=>"1"}
  [1m[35mLtiRegistrationWip Load (0.4ms)[0m  SELECT  `lti_registration_wips`.* FROM `lti_registration_wips`  WHERE `lti_registration_wips`.`id` = 1 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE `lti_registration_wips` SET `tenant_name` = 'Elan University736', `updated_at` = '2015-05-11 14:36:27' WHERE `lti_registration_wips`.`id` = 1
  [1m[36m (11.6ms)[0m  [1mCOMMIT[0m
  [1m[35mLti2Tp::Registration Load (0.5ms)[0m  SELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 1 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE `lti2_tp_registrations` SET `tenant_name` = 'Elan University736', `updated_at` = '2015-05-11 14:36:27' WHERE `lti2_tp_registrations`.`id` = 1
  [1m[36m (11.0ms)[0m  [1mCOMMIT[0m
  [1m[35mLtiRegistrationWip Load (0.4ms)[0m  SELECT  `lti_registration_wips`.* FROM `lti_registration_wips`  WHERE `lti_registration_wips`.`id` = 1 LIMIT 1
  [1m[36mLti2Tp::Registration Load (0.6ms)[0m  [1mSELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mTenant Exists (23.6ms)[0m  [1mSELECT  1 AS one FROM `tenants`  WHERE `tenants`.`tenant_name` = BINARY 'Elan University736' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `tenants` (`created_at`, `tenant_name`, `updated_at`) VALUES ('2015-05-11 14:36:27', 'Elan University736', '2015-05-11 14:36:27')
  [1m[36m (0.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE `lti2_tp_registrations` SET `end_registration_id` = '080b8580-da19-0132-bae3-20c9d07c6451', `tool_proxy_json` = '{\"@context\":[\"http://purl.imsglobal.org/ctx/lti/v2/ToolConsumerProfile\",{\"ltitcp\":\"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/0116a450-da19-0132-bae2-20c9d07c6451#\"}],\"@type\":\"ToolProxy\",\"@id\":\"ToolProxyProposal_at_2015-05-11T14:36:27Z\",\"lti_version\":\"LTI-2p0\",\"tool_proxy_guid\":\"0115cb70-da19-0132-bae2-20c9d07c6451\",\"tool_consumer_profile\":\"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/0116a450-da19-0132-bae2-20c9d07c6451\",\"tool_profile\":{\"base_url_choice\":[{\"default_base_url\":\"http://rails.kinexis.com:5000\",\"selector\":{\"applies_to\":[\"IconEndpoint\",\"MessageHandler\"]}}],\"lti_version\":\"LTI-2p0\",\"message\":[{\"message_type\":[\"ToolProxyRegistrationRequest\",\"ToolProxyReregistrationRequest\"],\"parameter\":[{\"name\":\"tc_profile_url\",\"variable\":\"ToolConsumerProfile.url\"}],\"path\":\"http://rails.kinexis.com:5000/lti2_tp/reregistrations\"}],\"product_instance\":{\"guid\":\"fd75124a-140e-470f-944c-114d2d92bb40\",\"product_info\":{\"description\":{\"default_value\":\"Fabericious reflowable ePub3 Textbook\",\"key\":\"tool.description\"},\"product_family\":{\"code\":\"assessment-tool\",\"vendor\":{\"code\":\"fabericious.org\",\"contact\":{\"email\":\"info@fabericious.com\"},\"description\":{\"default_value\":\"Fabericious is a leading provider of interactive tools for education\",\"key\":\"tool.vendor.description\"},\"vendor_name\":{\"default_value\":\"Fab\",\"key\":\"tool.vendor.name\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\",\"website\":\"{http://rails.kinexis.com:5000}\"}},\"product_name\":{\"default_value\":\"LTI2 BookTools\",\"key\":\"tool.name\"},\"product_version\":\"10.3\",\"technical_description\":{\"default_value\":\"Support provided for all LTI 1 extensions as well as LTI 2\",\"key\":\"tool.technical\"}},\"service_provider\":{\"description\":{\"default_value\":\"Provider of high performance managed hosting environments\",\"key\":\"service_provider.description\"},\"guid\":\"18e7ea50-3d6d-4f6b-aff2-ed3ab577716c\",\"service_provider_name\":{\"default_value\":\"Amazon Cloud\",\"key\":\"service_provider.name\"},\"support\":{\"email\":\"support@ec2.fabericious.com\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\"},\"support\":{\"email\":\"helpdesk@fabericious.com\"}},\"resource_handler\":[{\"description\":{\"default_value\":\"Settings service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"tool_proxy_custom_url\",\"variable\":\"ToolProxy.custom.url\"},{\"name\":\"tool_proxy_binding_custom_url\",\"variable\":\"ToolProxyBinding.custom.url\"},{\"name\":\"lti_link_custom_url\",\"variable\":\"LtiLink.custom.url\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"ToolProxy.custom.url\",\"ToolProxyBinding.custom.url\",\"LtiLink.custom.url\"],\"path\":\"/settings\"}],\"resource_name\":{\"default_value\":\"Settings\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"setting\"}},{\"description\":{\"default_value\":\"Echo service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"fixed\":\"Narcissus\",\"name\":\"referrer\"},{\"fixed\":\"3.14159\",\"name\":\"pi\"},{\"name\":\"user_primary_email\",\"variable\":\"Person.email.primary\"},{\"name\":\"discipline\",\"variable\":\"CourseOffering.label\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\"],\"path\":\"/echoes\"}],\"resource_name\":{\"default_value\":\"Echo\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"echo\"}},{\"description\":{\"default_value\":\"Interactive resource\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"vbid\"},{\"name\":\"result_uri\",\"variable\":\"Result.uri\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"Result.autocreate\"],\"path\":\"/iresources\"}],\"resource_name\":{\"default_value\":\"InteractiveResource\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"iresource\"}}],\"service_offered\":[{\"@id\":\"http://rails.kinexis.com:5000/lti2_tp/ToolProxy.collection\",\"@type\":\"RestService\",\"action\":[\"PUT\"],\"endpoint\":\"http://rails.kinexis.com:5000/lti2_tp/tool_proxies\",\"format\":[\"\"]}]},\"security_contract\":{\"shared_secret\":\"ea29dd5ea952c974f2040767b4685edb\",\"tool_service\":[{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxy.collection\",\"action\":[\"POST\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxy.item\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:Result.item\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:LtiLinkSettings\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxyBindingSettings\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxySettings\",\"action\":[\"GET\",\"PUT\"]}]}}', `updated_at` = '2015-05-11 14:36:27' WHERE `lti2_tp_registrations`.`id` = 1[0m
  [1m[35m (12.1ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE `lti2_tp_registrations` SET `status` = 'register', `updated_at` = '2015-05-11 14:36:28' WHERE `lti2_tp_registrations`.`id` = 1
  [1m[36m (6.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mTenant Exists (12.8ms)[0m  [1mSELECT  1 AS one FROM `tenants`  WHERE (`tenants`.`tenant_name` = BINARY 'Elan University736' AND `tenants`.`id` != 1) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE `tenants` SET `secret` = 'ea29dd5ea952c974f2040767b4685edb', `tenant_key` = '0115cb70-da19-0132-bae2-20c9d07c6451', `updated_at` = '2015-05-11 14:36:28' WHERE `tenants`.`id` = 1
  [1m[36m (0.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE `lti2_tp_registrations` SET `tenant_id` = 1, `updated_at` = '2015-05-11 14:36:28' WHERE `lti2_tp_registrations`.`id` = 1[0m
  [1m[35m (0.5ms)[0m  COMMIT
Redirected to http://localhost:5000/lti2_tp/registrations?status=success&tool_guid=0115cb70-da19-0132-bae2-20c9d07c6451&&id=1
Completed 302 Found in 356ms (ActiveRecord: 96.0ms)
Started GET "/lti2_tp/registrations?status=success&tool_guid=0115cb70-da19-0132-bae2-20c9d07c6451&&id=1" for 127.0.0.1 at 2015-05-11 07:36:28 -0700
Processing by Lti2Tp::RegistrationsController#index as HTML
  Parameters: {"status"=>"success", "tool_guid"=>"0115cb70-da19-0132-bae2-20c9d07c6451", "id"=>"1"}
  [1m[36mLti2Tp::Registration Load (0.4ms)[0m  [1mSELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 1 LIMIT 1[0m
Redirected to http://rails.kinexis.com:4000/admin/tool_actions?status=success&tool_guid=0115cb70-da19-0132-bae2-20c9d07c6451
Completed 302 Found in 1ms (ActiveRecord: 0.4ms)
Started POST "/echoes" for 127.0.0.1 at 2015-05-11 07:36:54 -0700
Processing by EchoesController#create as HTML
  Parameters: {"lti_version"=>"LTI-2p0", "lti_message_type"=>"basic-lti-launch-request", "resource_link_id"=>"4", "user_id"=>"2", "roles"=>"Instructor", "launch_presentation_return_url"=>"http://rails.kinexis.com:4000/admin/course_page?method=show&course_id=2", "launch_presentation_document_target"=>"window", "context_id"=>"2", "launch_presentation_locale"=>"en_US", "context_label"=>"SMPL101A", "context_title"=>"Nursing Compendium", "lis_course_section_sourcedid"=>"2", "tool_consumer_info_product_family_code"=>"LuMoS", "tool_consumer_info_version"=>"3.1", "custom_referrer"=>"Narcissus", "custom_pi"=>"3.14159", "custom_user_primary_email"=>"admin@lumos.org", "custom_discipline"=>"SMPL101A", "oauth_consumer_key"=>"0115cb70-da19-0132-bae2-20c9d07c6451", "oauth_nonce"=>"3566058202931", "oauth_signature_method"=>"HMAC-SHA1", "oauth_timestamp"=>"1431355014", "oauth_version"=>"1.0", "oauth_callback"=>"about:blank", "oauth_signature"=>"GElEfrsujHf2p7NfaCPihsMjd40="}
AuthHdr_Parms: {}
  [1m[35mTenant Load (0.4ms)[0m  SELECT  `tenants`.* FROM `tenants`  WHERE `tenants`.`tenant_key` = '0115cb70-da19-0132-bae2-20c9d07c6451'  ORDER BY `tenants`.`id` ASC LIMIT 1
  [1m[36mLti2Tp::Registration Load (0.4ms)[0m  [1mSELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`tenant_id` = 1  ORDER BY `lti2_tp_registrations`.`id` ASC LIMIT 1[0m
AuthHdr_Parms: {}
in verify_signature
  Rendered inline template (0.4ms)
Completed 200 OK in 23ms (Views: 1.1ms | ActiveRecord: 0.8ms)
  [1m[36mLti2Tp::Registry Load (24.7ms)[0m  [1mSELECT `lti2_tp_registries`.* FROM `lti2_tp_registries`[0m
Started POST "/lti2_tp/registrations" for 127.0.0.1 at 2015-05-11 16:38:25 -0700
Processing by Lti2Tp::RegistrationsController#create as HTML
  Parameters: {"lti_message_type"=>"ToolProxyRegistrationRequest", "lti_version"=>"LTI-2p0", "user_id"=>"2", "roles"=>"urn:lti:sysrole:ims/lis/SysAdmin", "tc_profile_url"=>"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/ac8aa670-da64-0132-d246-20c9d07c6451", "reg_key"=>"ac89de40-da64-0132-d246-20c9d07c6451", "reg_password"=>"[FILTERED]", "tc_oauth_half_secret"=>"2ad6054aeea72826aebbb49e69fcf0044ad63941600cbadc4107721c06087dc89a6b71b42ef1da80363b06f4e3b8670730338d6528f0683a7b040394d50dc2aa9f97a9248c866285b3b0c89601051c050da68f31c4dd78a3c92503088f8cf3d3f0a063c53832a3e2cbb3859838bebb834c1a30ac06073c32f8f45f6ae4aeecfe", "launch_presentation_return_url"=>"http://rails.kinexis.com:4000/admin/tool_actions", "launch_presentation_document_target"=>"window"}
  [1m[35mLti2Tp::Tool Load (0.3ms)[0m  SELECT  `lti2_tp_tools`.* FROM `lti2_tp_tools`   ORDER BY `lti2_tp_tools`.`id` ASC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO `lti2_tp_registrations` (`created_at`, `launch_presentation_return_url`, `lti_version`, `message_type`, `reg_key`, `reg_password`, `status`, `tc_oauth_half_secret`, `tc_profile_url`, `tenant_basename`, `tenant_name`, `tool_consumer_profile_json`, `tool_id`, `tool_profile_json`, `updated_at`, `user_id`) VALUES ('2015-05-11 23:38:26', 'http://rails.kinexis.com:4000/admin/tool_actions', 'LTI-2p0', 'registration', 'ac89de40-da64-0132-d246-20c9d07c6451', 'beb5231039bf71dc5053932b3f4fcd08', 'received', '2ad6054aeea72826aebbb49e69fcf0044ad63941600cbadc4107721c06087dc89a6b71b42ef1da80363b06f4e3b8670730338d6528f0683a7b040394d50dc2aa9f97a9248c866285b3b0c89601051c050da68f31c4dd78a3c92503088f8cf3d3f0a063c53832a3e2cbb3859838bebb834c1a30ac06073c32f8f45f6ae4aeecfe', 'http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/ac8aa670-da64-0132-d246-20c9d07c6451', 'Elan University', 'Elan University', '{\"@context\":[\"http://purl.imsglobal.org/ctx/lti/v2/ToolConsumerProfile\",{\"ltitcp\":\"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/ac8aa670-da64-0132-d246-20c9d07c6451#\"}],\"@type\":\"ToolConsumerProfile\",\"@id\":\"http://rails.kinexis.com:4000/tool_consumer_profiles/ac8aa670-da64-0132-d246-20c9d07c6451\",\"lti_version\":\"LTI-2p0\",\"guid\":\"ac8aa670-da64-0132-d246-20c9d07c6451\",\"product_instance\":{\"guid\":\"dcddf9808107-81ea-eaa4-1edf-5d24568c\",\"product_info\":{\"product_name\":{\"default_value\":\"Elan/LuMoS\",\"key\":\"product.name\"},\"product_version\":\"3.1\",\"description\":{\"default_value\":\"Elan University/LuMoS Learning Platform\",\"key\":\"product.version\"},\"technical_description\":{\"default_value\":\"LTI 1, 1.1 and 2.0 compliant\",\"key\":\"product.technicalDescription\"},\"product_family\":{\"code\":\"LuMoS\",\"vendor\":{\"code\":\"lms.LuMoS.org\",\"vendor_name\":{\"default_value\":\"LuMoS Corporation\",\"key\":\"product.vendor.name\"},\"description\":{\"default_value\":\"LuMoS Corporation is a fictitious vendor of a Learning Management System\",\"key\":\"product.vendor.description\"},\"website\":\"http://lms.LuMoS.org/products/omega\",\"timestamp\":\"2012-07-09T012:08:16-04:00\",\"contact\":{\"email\":\"support@lms.LuMoS.org\"}}}},\"support\":{\"email\":\"john.tibbetts@kinexis.com\"},\"service_owner\":{\"@id\":\"http://ec2.LuMoS.org/ServiceOwner\",\"timestamp\":\"2012-03-28T09:08:16-04:00\",\"service_owner_name\":{\"default_value\":\"Elan University\",\"key\":\"service_owner.name\"},\"description\":{\"default_value\":\"Elan University EC2 Cloud\",\"key\":\"service_owner.description\"},\"support\":{\"email\":\"techsupport@elan.edu\"}},\"service_provider\":{\"@id\":\"http://ec2.LuMoS.org/ServiceProvider\",\"guid\":\"ec2.LuMoS.org\",\"timestamp\":\"2012-07-09T012:08:16-04:00\",\"service_provider_name\":{\"default_value\":\"Elan University\",\"key\":\"service_provider.name\"},\"description\":{\"default_value\":\"Elan University EC2 Cloud\",\"key\":\"service_provider.description\"},\"support\":{\"email\":\"support@yasp.LuMoS.org\"}}},\"capability_offered\":[\"basic-lti-launch-request\",\"Result.autocreate\",\"Result.sourcedId\",\"User.id\",\"User.username\",\"CourseSection.sourcedId\",\"Person.sourcedId\",\"Person.email.primary\",\"Person.name.given\",\"Person.name.family\",\"Person.name.full\",\"Membership.role\",\"ToolProxy.custom.url\",\"ToolProxyBinding.custom.url\",\"LtiLink.custom.url\",\"ToolConsumerProfile.url\",\"OAuth.splitsecret\"],\"service_offered\":[{\"@type\":\"RestService\",\"@id\":\"ltitcp:ToolProxy.collection\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tools\",\"format\":[\"application/vnd.ims.lti.v2.toolproxy+json\"],\"action\":[\"POST\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:ToolProxy.item\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tools/{tool_proxy_guid}\",\"format\":[\"application/vnd.ims.lti.v2.toolproxy+json\"],\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:Result.item\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/resources/Result/{sourcedId}\",\"format\":[\"application/vnd.ims.lis.v2.result+json\"],\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:LtiLinkSettings\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tool_settings/{tool_proxy_guid}/ltilink/{link_id}\",\"format\":[\"application/vnd.ims.lti.v2.toolsettings+json\",\"application/vnd.ims.lti.v2.toolsettings.simple+json\"],\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:ToolProxyBindingSettings\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tool_settings/{tool_proxy_guid}/context/{context_id}\",\"format\":[\"application/vnd.ims.lti.v2.toolsettings+json\",\"application/vnd.ims.lti.v2.toolsettings.simple+json\"],\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:ToolProxySettings\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tool_settings/{tool_proxy_guid}\",\"format\":[\"application/vnd.ims.lti.v2.toolsettings+json\",\"application/vnd.ims.lti.v2.toolsettings.simple+json\"],\"action\":[\"GET\",\"PUT\"]}]}', 2, '{\"base_url_choice\":[{\"default_base_url\":\"http://rails.kinexis.com:5000\",\"selector\":{\"applies_to\":[\"IconEndpoint\",\"MessageHandler\"]}}],\"lti_version\":\"LTI-2p0\",\"message\":[{\"message_type\":[\"ToolProxyRegistrationRequest\",\"ToolProxyReregistrationRequest\"],\"parameter\":[{\"name\":\"tc_profile_url\",\"variable\":\"ToolConsumerProfile.url\"}],\"path\":\"http://rails.kinexis.com:5000/lti2_tp/reregistrations\"}],\"product_instance\":{\"guid\":\"fd75124a-140e-470f-944c-114d2d92bb40\",\"product_info\":{\"description\":{\"default_value\":\"Fabericious reflowable ePub3 Textbook\",\"key\":\"tool.description\"},\"product_family\":{\"code\":\"assessment-tool\",\"vendor\":{\"code\":\"fabericious.org\",\"contact\":{\"email\":\"info@fabericious.com\"},\"description\":{\"default_value\":\"Fabericious is a leading provider of interactive tools for education\",\"key\":\"tool.vendor.description\"},\"vendor_name\":{\"default_value\":\"Fab\",\"key\":\"tool.vendor.name\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\",\"website\":\"{http://rails.kinexis.com:5000}\"}},\"product_name\":{\"default_value\":\"LTI2 BookTools\",\"key\":\"tool.name\"},\"product_version\":\"10.3\",\"technical_description\":{\"default_value\":\"Support provided for all LTI 1 extensions as well as LTI 2\",\"key\":\"tool.technical\"}},\"service_provider\":{\"description\":{\"default_value\":\"Provider of high performance managed hosting environments\",\"key\":\"service_provider.description\"},\"guid\":\"18e7ea50-3d6d-4f6b-aff2-ed3ab577716c\",\"service_provider_name\":{\"default_value\":\"Amazon Cloud\",\"key\":\"service_provider.name\"},\"support\":{\"email\":\"support@ec2.fabericious.com\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\"},\"support\":{\"email\":\"helpdesk@fabericious.com\"}},\"resource_handler\":[{\"description\":{\"default_value\":\"Settings service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"tool_proxy_custom_url\",\"variable\":\"ToolProxy.custom.url\"},{\"name\":\"tool_proxy_binding_custom_url\",\"variable\":\"ToolProxyBinding.custom.url\"},{\"name\":\"lti_link_custom_url\",\"variable\":\"LtiLink.custom.url\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"ToolProxy.custom.url\",\"ToolProxyBinding.custom.url\",\"LtiLink.custom.url\"],\"path\":\"/settings\"}],\"resource_name\":{\"default_value\":\"Settings\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"setting\"}},{\"description\":{\"default_value\":\"Echo service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"fixed\":\"Narcissus\",\"name\":\"referrer\"},{\"fixed\":\"3.14159\",\"name\":\"pi\"},{\"name\":\"user_primary_email\",\"variable\":\"Person.email.primary\"},{\"name\":\"discipline\",\"variable\":\"CourseOffering.label\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\"],\"path\":\"/echoes\"}],\"resource_name\":{\"default_value\":\"Echo\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"echo\"}},{\"description\":{\"default_value\":\"Interactive resource\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"vbid\"},{\"name\":\"result_uri\",\"variable\":\"Result.uri\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"Result.autocreate\"],\"path\":\"/iresources\"}],\"resource_name\":{\"default_value\":\"InteractiveResource\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"iresource\"}}],\"service_offered\":[{\"@id\":\"http://rails.kinexis.com:5000/lti2_tp/ToolProxy.collection\",\"@type\":\"RestService\",\"action\":[\"PUT\"],\"endpoint\":\"http://rails.kinexis.com:5000/lti2_tp/tool_proxies\",\"format\":[\"\"]}]}', '2015-05-11 23:38:26', '2')
  [1m[36m (10.9ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:5000/lti_registration_wips?registration_id=2&return_url=/lti2_tp/registrations
Completed 302 Found in 119ms (ActiveRecord: 43.8ms)
Started GET "/lti_registration_wips?registration_id=2&return_url=/lti2_tp/registrations" for 127.0.0.1 at 2015-05-11 16:38:26 -0700
Processing by LtiRegistrationWipsController#index as HTML
  Parameters: {"registration_id"=>"2", "return_url"=>"/lti2_tp/registrations"}
  [1m[35mLti2Tp::Registration Load (0.4ms)[0m  SELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 2 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `lti_registration_wips` (`created_at`, `product_name`, `registration_id`, `registration_return_url`, `support_email`, `tenant_name`, `updated_at`) VALUES ('2015-05-11 23:38:26', 'Elan/LuMoS', 2, '/lti2_tp/registrations', 'john.tibbetts@kinexis.com', 'Elan University', '2015-05-11 23:38:26')
  [1m[36m (0.3ms)[0m  [1mCOMMIT[0m
  Rendered lti_registration_wips/_form.html.haml (110.7ms)
  Rendered lti_registration_wips/index.html.haml within layouts/application (117.1ms)
Completed 200 OK in 218ms (Views: 177.2ms | ActiveRecord: 28.3ms)
Started GET "/assets/formtastic.css" for 127.0.0.1 at 2015-05-11 16:38:26 -0700
Started PATCH "/lti_registration_wips/2" for 127.0.0.1 at 2015-05-11 16:39:04 -0700
Processing by LtiRegistrationWipsController#update as HTML
  Parameters: {"utf8"=>"âœ“", "lti_registration_wip"=>{"support_email"=>"john.tibbetts@kinexis.com", "product_name"=>"Elan/LuMoS", "tenant_name"=>"Elan University438"}, "commit"=>"Update Lti registration wip", "id"=>"2"}
  [1m[35mLtiRegistrationWip Load (0.3ms)[0m  SELECT  `lti_registration_wips`.* FROM `lti_registration_wips`  WHERE `lti_registration_wips`.`id` = 2 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE `lti_registration_wips` SET `tenant_name` = 'Elan University438', `updated_at` = '2015-05-11 23:39:04' WHERE `lti_registration_wips`.`id` = 2
  [1m[36m (6.0ms)[0m  [1mCOMMIT[0m
  [1m[35mLti2Tp::Registration Load (0.4ms)[0m  SELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 2 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (11.9ms)[0m  UPDATE `lti2_tp_registrations` SET `tenant_name` = 'Elan University438', `updated_at` = '2015-05-11 23:39:04' WHERE `lti2_tp_registrations`.`id` = 2
  [1m[36m (5.6ms)[0m  [1mCOMMIT[0m
  [1m[35mLtiRegistrationWip Load (0.3ms)[0m  SELECT  `lti_registration_wips`.* FROM `lti_registration_wips`  WHERE `lti_registration_wips`.`id` = 2 LIMIT 1
  [1m[36mLti2Tp::Registration Load (0.2ms)[0m  [1mSELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 2 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mTenant Exists (24.1ms)[0m  [1mSELECT  1 AS one FROM `tenants`  WHERE `tenants`.`tenant_name` = BINARY 'Elan University438' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `tenants` (`created_at`, `tenant_name`, `updated_at`) VALUES ('2015-05-11 23:39:04', 'Elan University438', '2015-05-11 23:39:04')
  [1m[36m (0.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (18.9ms)[0m  [1mUPDATE `lti2_tp_registrations` SET `end_registration_id` = 'd575cd20-da64-0132-d247-20c9d07c6451', `tool_proxy_json` = '{\"@context\":[\"http://purl.imsglobal.org/ctx/lti/v2/ToolConsumerProfile\",{\"ltitcp\":\"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/ac8aa670-da64-0132-d246-20c9d07c6451#\"}],\"@type\":\"ToolProxy\",\"@id\":\"ToolProxyProposal_at_2015-05-11T23:39:04Z\",\"lti_version\":\"LTI-2p0\",\"tool_proxy_guid\":\"ac89de40-da64-0132-d246-20c9d07c6451\",\"tool_consumer_profile\":\"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/ac8aa670-da64-0132-d246-20c9d07c6451\",\"tool_profile\":{\"base_url_choice\":[{\"default_base_url\":\"http://rails.kinexis.com:5000\",\"selector\":{\"applies_to\":[\"IconEndpoint\",\"MessageHandler\"]}}],\"lti_version\":\"LTI-2p0\",\"message\":[{\"message_type\":[\"ToolProxyRegistrationRequest\",\"ToolProxyReregistrationRequest\"],\"parameter\":[{\"name\":\"tc_profile_url\",\"variable\":\"ToolConsumerProfile.url\"}],\"path\":\"http://rails.kinexis.com:5000/lti2_tp/reregistrations\"}],\"product_instance\":{\"guid\":\"fd75124a-140e-470f-944c-114d2d92bb40\",\"product_info\":{\"description\":{\"default_value\":\"Fabericious reflowable ePub3 Textbook\",\"key\":\"tool.description\"},\"product_family\":{\"code\":\"assessment-tool\",\"vendor\":{\"code\":\"fabericious.org\",\"contact\":{\"email\":\"info@fabericious.com\"},\"description\":{\"default_value\":\"Fabericious is a leading provider of interactive tools for education\",\"key\":\"tool.vendor.description\"},\"vendor_name\":{\"default_value\":\"Fab\",\"key\":\"tool.vendor.name\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\",\"website\":\"{http://rails.kinexis.com:5000}\"}},\"product_name\":{\"default_value\":\"LTI2 BookTools\",\"key\":\"tool.name\"},\"product_version\":\"10.3\",\"technical_description\":{\"default_value\":\"Support provided for all LTI 1 extensions as well as LTI 2\",\"key\":\"tool.technical\"}},\"service_provider\":{\"description\":{\"default_value\":\"Provider of high performance managed hosting environments\",\"key\":\"service_provider.description\"},\"guid\":\"18e7ea50-3d6d-4f6b-aff2-ed3ab577716c\",\"service_provider_name\":{\"default_value\":\"Amazon Cloud\",\"key\":\"service_provider.name\"},\"support\":{\"email\":\"support@ec2.fabericious.com\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\"},\"support\":{\"email\":\"helpdesk@fabericious.com\"}},\"resource_handler\":[{\"description\":{\"default_value\":\"Settings service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"tool_proxy_custom_url\",\"variable\":\"ToolProxy.custom.url\"},{\"name\":\"tool_proxy_binding_custom_url\",\"variable\":\"ToolProxyBinding.custom.url\"},{\"name\":\"lti_link_custom_url\",\"variable\":\"LtiLink.custom.url\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"ToolProxy.custom.url\",\"ToolProxyBinding.custom.url\",\"LtiLink.custom.url\"],\"path\":\"/settings\"}],\"resource_name\":{\"default_value\":\"Settings\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"setting\"}},{\"description\":{\"default_value\":\"Echo service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"fixed\":\"Narcissus\",\"name\":\"referrer\"},{\"fixed\":\"3.14159\",\"name\":\"pi\"},{\"name\":\"user_primary_email\",\"variable\":\"Person.email.primary\"},{\"name\":\"discipline\",\"variable\":\"CourseOffering.label\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\"],\"path\":\"/echoes\"}],\"resource_name\":{\"default_value\":\"Echo\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"echo\"}},{\"description\":{\"default_value\":\"Interactive resource\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"vbid\"},{\"name\":\"result_uri\",\"variable\":\"Result.uri\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"Result.autocreate\"],\"path\":\"/iresources\"}],\"resource_name\":{\"default_value\":\"InteractiveResource\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"iresource\"}}],\"service_offered\":[{\"@id\":\"http://rails.kinexis.com:5000/lti2_tp/ToolProxy.collection\",\"@type\":\"RestService\",\"action\":[\"PUT\"],\"endpoint\":\"http://rails.kinexis.com:5000/lti2_tp/tool_proxies\",\"format\":[\"\"]}]},\"security_contract\":{\"shared_secret\":\"7337946f6c3c370ad9582750c0cb1214\",\"tool_service\":[{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxy.collection\",\"action\":[\"POST\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxy.item\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:Result.item\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:LtiLinkSettings\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxyBindingSettings\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxySettings\",\"action\":[\"GET\",\"PUT\"]}]}}', `updated_at` = '2015-05-11 23:39:04' WHERE `lti2_tp_registrations`.`id` = 2[0m
  [1m[35m (5.4ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE `lti2_tp_registrations` SET `status` = 'register', `updated_at` = '2015-05-11 23:39:05' WHERE `lti2_tp_registrations`.`id` = 2
  [1m[36m (6.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mTenant Exists (5.7ms)[0m  [1mSELECT  1 AS one FROM `tenants`  WHERE (`tenants`.`tenant_name` = BINARY 'Elan University438' AND `tenants`.`id` != 2) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE `tenants` SET `secret` = '7337946f6c3c370ad9582750c0cb1214', `tenant_key` = 'ac89de40-da64-0132-d246-20c9d07c6451', `updated_at` = '2015-05-11 23:39:05' WHERE `tenants`.`id` = 2
  [1m[36m (6.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.9ms)[0m  [1mUPDATE `lti2_tp_registrations` SET `tenant_id` = 2, `updated_at` = '2015-05-11 23:39:05' WHERE `lti2_tp_registrations`.`id` = 2[0m
  [1m[35m (0.6ms)[0m  COMMIT
Redirected to http://localhost:5000/lti2_tp/registrations?status=success&tool_guid=ac89de40-da64-0132-d246-20c9d07c6451&&id=2
Completed 302 Found in 369ms (ActiveRecord: 116.8ms)
Started GET "/lti2_tp/registrations?status=success&tool_guid=ac89de40-da64-0132-d246-20c9d07c6451&&id=2" for 127.0.0.1 at 2015-05-11 16:39:05 -0700
Processing by Lti2Tp::RegistrationsController#index as HTML
  Parameters: {"status"=>"success", "tool_guid"=>"ac89de40-da64-0132-d246-20c9d07c6451", "id"=>"2"}
  [1m[36mLti2Tp::Registration Load (0.4ms)[0m  [1mSELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 2 LIMIT 1[0m
Redirected to http://rails.kinexis.com:4000/admin/tool_actions?status=success&tool_guid=ac89de40-da64-0132-d246-20c9d07c6451
Completed 302 Found in 2ms (ActiveRecord: 0.4ms)
  [1m[36mLti2Tp::Registry Load (0.4ms)[0m  [1mSELECT `lti2_tp_registries`.* FROM `lti2_tp_registries`[0m
  [1m[36mLti2Tp::Registry Load (0.3ms)[0m  [1mSELECT `lti2_tp_registries`.* FROM `lti2_tp_registries`[0m
  [1m[35mActiveRecord::SchemaMigration Load (26.1ms)[0m  SELECT `schema_migrations`.* FROM `schema_migrations`
  [1m[36mSQL (15.0ms)[0m  [1mDELETE FROM `lti2_tp_registrations`[0m
  [1m[35mSQL (10.1ms)[0m  DELETE FROM `lti_registration_wips`
  [1m[36mSQL (10.6ms)[0m  [1mDELETE FROM `tenants`[0m
  [1m[35mSQL (24.8ms)[0m  DELETE FROM `iresources`
Started POST "/lti2_tp/registrations" for 127.0.0.1 at 2015-05-12 14:08:11 -0700
Processing by Lti2Tp::RegistrationsController#create as HTML
  Parameters: {"lti_message_type"=>"ToolProxyRegistrationRequest", "lti_version"=>"LTI-2p0", "user_id"=>"2", "roles"=>"urn:lti:sysrole:ims/lis/SysAdmin", "tc_profile_url"=>"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/e8dbc090-db18-0132-d251-20c9d07c6451", "reg_key"=>"e8dbba20-db18-0132-d251-20c9d07c6451", "reg_password"=>"[FILTERED]", "tc_oauth_half_secret"=>"cc43928f4a5720a12b1413cac0249779165aa2fe4ed4f0035004d6e5b2620ec948ae0ca0d09b6f13d82a40a7e8064c50533525a9fe7e8b7e986649847ab1ca103de4793975934d4b7f260cd54a43e0bc4087cca89f5529a19f489ea771e0feb04144c46b8b7ec5601ed472ca7eade3d0200446683a0ac288e18e075d32d10092", "launch_presentation_return_url"=>"http://rails.kinexis.com:4000/admin/tool_actions", "launch_presentation_document_target"=>"window"}
  [1m[35mLti2Tp::Tool Load (0.2ms)[0m  SELECT  `lti2_tp_tools`.* FROM `lti2_tp_tools`   ORDER BY `lti2_tp_tools`.`id` ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO `lti2_tp_registrations` (`created_at`, `launch_presentation_return_url`, `lti_version`, `message_type`, `reg_key`, `reg_password`, `status`, `tc_oauth_half_secret`, `tc_profile_url`, `tenant_basename`, `tenant_name`, `tool_consumer_profile_json`, `tool_id`, `tool_profile_json`, `updated_at`, `user_id`) VALUES ('2015-05-12 21:08:11', 'http://rails.kinexis.com:4000/admin/tool_actions', 'LTI-2p0', 'registration', 'e8dbba20-db18-0132-d251-20c9d07c6451', '8791c6de73b8d68b2ad034707933a5c9', 'received', 'cc43928f4a5720a12b1413cac0249779165aa2fe4ed4f0035004d6e5b2620ec948ae0ca0d09b6f13d82a40a7e8064c50533525a9fe7e8b7e986649847ab1ca103de4793975934d4b7f260cd54a43e0bc4087cca89f5529a19f489ea771e0feb04144c46b8b7ec5601ed472ca7eade3d0200446683a0ac288e18e075d32d10092', 'http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/e8dbc090-db18-0132-d251-20c9d07c6451', 'Elan University', 'Elan University', '{\"@context\":[\"http://purl.imsglobal.org/ctx/lti/v2/ToolConsumerProfile\",{\"ltitcp\":\"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/e8dbc090-db18-0132-d251-20c9d07c6451#\"}],\"@type\":\"ToolConsumerProfile\",\"@id\":\"http://rails.kinexis.com:4000/tool_consumer_profiles/e8dbc090-db18-0132-d251-20c9d07c6451\",\"lti_version\":\"LTI-2p0\",\"guid\":\"e8dbc090-db18-0132-d251-20c9d07c6451\",\"product_instance\":{\"guid\":\"dcddf9808107-81ea-eaa4-1edf-5d24568c\",\"product_info\":{\"product_name\":{\"default_value\":\"Elan/LuMoS\",\"key\":\"product.name\"},\"product_version\":\"3.1\",\"description\":{\"default_value\":\"Elan University/LuMoS Learning Platform\",\"key\":\"product.version\"},\"technical_description\":{\"default_value\":\"LTI 1, 1.1 and 2.0 compliant\",\"key\":\"product.technicalDescription\"},\"product_family\":{\"code\":\"LuMoS\",\"vendor\":{\"code\":\"lms.LuMoS.org\",\"vendor_name\":{\"default_value\":\"LuMoS Corporation\",\"key\":\"product.vendor.name\"},\"description\":{\"default_value\":\"LuMoS Corporation is a fictitious vendor of a Learning Management System\",\"key\":\"product.vendor.description\"},\"website\":\"http://lms.LuMoS.org/products/omega\",\"timestamp\":\"2012-07-09T012:08:16-04:00\",\"contact\":{\"email\":\"support@lms.LuMoS.org\"}}}},\"support\":{\"email\":\"john.tibbetts@kinexis.com\"},\"service_owner\":{\"@id\":\"http://ec2.LuMoS.org/ServiceOwner\",\"timestamp\":\"2012-03-28T09:08:16-04:00\",\"service_owner_name\":{\"default_value\":\"Elan University\",\"key\":\"service_owner.name\"},\"description\":{\"default_value\":\"Elan University EC2 Cloud\",\"key\":\"service_owner.description\"},\"support\":{\"email\":\"techsupport@elan.edu\"}},\"service_provider\":{\"@id\":\"http://ec2.LuMoS.org/ServiceProvider\",\"guid\":\"ec2.LuMoS.org\",\"timestamp\":\"2012-07-09T012:08:16-04:00\",\"service_provider_name\":{\"default_value\":\"Elan University\",\"key\":\"service_provider.name\"},\"description\":{\"default_value\":\"Elan University EC2 Cloud\",\"key\":\"service_provider.description\"},\"support\":{\"email\":\"support@yasp.LuMoS.org\"}}},\"capability_offered\":[\"basic-lti-launch-request\",\"Result.autocreate\",\"Result.sourcedId\",\"User.id\",\"User.username\",\"CourseSection.sourcedId\",\"Person.sourcedId\",\"Person.email.primary\",\"Person.name.given\",\"Person.name.family\",\"Person.name.full\",\"Membership.role\",\"ToolProxy.custom.url\",\"ToolProxyBinding.custom.url\",\"LtiLink.custom.url\",\"ToolConsumerProfile.url\",\"OAuth.splitsecret\"],\"service_offered\":[{\"@type\":\"RestService\",\"@id\":\"ltitcp:ToolProxy.collection\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tools\",\"format\":[\"application/vnd.ims.lti.v2.toolproxy+json\"],\"action\":[\"POST\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:ToolProxy.item\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tools/{tool_proxy_guid}\",\"format\":[\"application/vnd.ims.lti.v2.toolproxy+json\"],\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:Result.item\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/resources/Result/{sourcedId}\",\"format\":[\"application/vnd.ims.lis.v2.result+json\"],\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:LtiLinkSettings\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tool_settings/{tool_proxy_guid}/ltilink/{link_id}\",\"format\":[\"application/vnd.ims.lti.v2.toolsettings+json\",\"application/vnd.ims.lti.v2.toolsettings.simple+json\"],\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:ToolProxyBindingSettings\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tool_settings/{tool_proxy_guid}/context/{context_id}\",\"format\":[\"application/vnd.ims.lti.v2.toolsettings+json\",\"application/vnd.ims.lti.v2.toolsettings.simple+json\"],\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:ToolProxySettings\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tool_settings/{tool_proxy_guid}\",\"format\":[\"application/vnd.ims.lti.v2.toolsettings+json\",\"application/vnd.ims.lti.v2.toolsettings.simple+json\"],\"action\":[\"GET\",\"PUT\"]}]}', 2, '{\"base_url_choice\":[{\"default_base_url\":\"http://rails.kinexis.com:5000\",\"selector\":{\"applies_to\":[\"IconEndpoint\",\"MessageHandler\"]}}],\"lti_version\":\"LTI-2p0\",\"message\":[{\"message_type\":[\"ToolProxyRegistrationRequest\",\"ToolProxyReregistrationRequest\"],\"parameter\":[{\"name\":\"tc_profile_url\",\"variable\":\"ToolConsumerProfile.url\"}],\"path\":\"http://rails.kinexis.com:5000/lti2_tp/reregistrations\"}],\"product_instance\":{\"guid\":\"fd75124a-140e-470f-944c-114d2d92bb40\",\"product_info\":{\"description\":{\"default_value\":\"Fabericious reflowable ePub3 Textbook\",\"key\":\"tool.description\"},\"product_family\":{\"code\":\"assessment-tool\",\"vendor\":{\"code\":\"fabericious.org\",\"contact\":{\"email\":\"info@fabericious.com\"},\"description\":{\"default_value\":\"Fabericious is a leading provider of interactive tools for education\",\"key\":\"tool.vendor.description\"},\"vendor_name\":{\"default_value\":\"Fab\",\"key\":\"tool.vendor.name\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\",\"website\":\"{http://rails.kinexis.com:5000}\"}},\"product_name\":{\"default_value\":\"LTI2 BookTools\",\"key\":\"tool.name\"},\"product_version\":\"10.3\",\"technical_description\":{\"default_value\":\"Support provided for all LTI 1 extensions as well as LTI 2\",\"key\":\"tool.technical\"}},\"service_provider\":{\"description\":{\"default_value\":\"Provider of high performance managed hosting environments\",\"key\":\"service_provider.description\"},\"guid\":\"18e7ea50-3d6d-4f6b-aff2-ed3ab577716c\",\"service_provider_name\":{\"default_value\":\"Amazon Cloud\",\"key\":\"service_provider.name\"},\"support\":{\"email\":\"support@ec2.fabericious.com\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\"},\"support\":{\"email\":\"helpdesk@fabericious.com\"}},\"resource_handler\":[{\"description\":{\"default_value\":\"Settings service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"tool_proxy_custom_url\",\"variable\":\"ToolProxy.custom.url\"},{\"name\":\"tool_proxy_binding_custom_url\",\"variable\":\"ToolProxyBinding.custom.url\"},{\"name\":\"lti_link_custom_url\",\"variable\":\"LtiLink.custom.url\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"ToolProxy.custom.url\",\"ToolProxyBinding.custom.url\",\"LtiLink.custom.url\"],\"path\":\"/settings\"}],\"resource_name\":{\"default_value\":\"Settings\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"setting\"}},{\"description\":{\"default_value\":\"Echo service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"fixed\":\"Narcissus\",\"name\":\"referrer\"},{\"fixed\":\"3.14159\",\"name\":\"pi\"},{\"name\":\"user_primary_email\",\"variable\":\"Person.email.primary\"},{\"name\":\"discipline\",\"variable\":\"CourseOffering.label\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\"],\"path\":\"/echoes\"}],\"resource_name\":{\"default_value\":\"Echo\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"echo\"}},{\"description\":{\"default_value\":\"Interactive resource\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"vbid\"},{\"name\":\"result_uri\",\"variable\":\"Result.uri\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"Result.autocreate\"],\"path\":\"/iresources\"}],\"resource_name\":{\"default_value\":\"InteractiveResource\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"iresource\"}}],\"service_offered\":[{\"@id\":\"http://rails.kinexis.com:5000/lti2_tp/ToolProxy.collection\",\"@type\":\"RestService\",\"action\":[\"PUT\"],\"endpoint\":\"http://rails.kinexis.com:5000/lti2_tp/tool_proxies\",\"format\":[\"\"]}]}', '2015-05-12 21:08:11', '2')
  [1m[36m (10.5ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:5000/lti_registration_wips?registration_id=3&return_url=/lti2_tp/registrations
Completed 302 Found in 113ms (ActiveRecord: 32.8ms)
Started GET "/lti_registration_wips?registration_id=3&return_url=/lti2_tp/registrations" for 127.0.0.1 at 2015-05-12 14:08:11 -0700
Processing by LtiRegistrationWipsController#index as HTML
  Parameters: {"registration_id"=>"3", "return_url"=>"/lti2_tp/registrations"}
  [1m[35mLti2Tp::Registration Load (0.5ms)[0m  SELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 3 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `lti_registration_wips` (`created_at`, `product_name`, `registration_id`, `registration_return_url`, `support_email`, `tenant_name`, `updated_at`) VALUES ('2015-05-12 21:08:11', 'Elan/LuMoS', 3, '/lti2_tp/registrations', 'john.tibbetts@kinexis.com', 'Elan University', '2015-05-12 21:08:11')
  [1m[36m (0.4ms)[0m  [1mCOMMIT[0m
  Rendered lti_registration_wips/_form.html.haml (121.6ms)
  Rendered lti_registration_wips/index.html.haml within layouts/application (126.7ms)
Completed 200 OK in 224ms (Views: 191.1ms | ActiveRecord: 20.4ms)
Started PATCH "/lti_registration_wips/3" for 127.0.0.1 at 2015-05-12 14:08:17 -0700
Processing by LtiRegistrationWipsController#update as HTML
  Parameters: {"utf8"=>"âœ“", "lti_registration_wip"=>{"support_email"=>"john.tibbetts@kinexis.com", "product_name"=>"Elan/LuMoS", "tenant_name"=>"Elan University208"}, "commit"=>"Update Lti registration wip", "id"=>"3"}
  [1m[35mLtiRegistrationWip Load (0.3ms)[0m  SELECT  `lti_registration_wips`.* FROM `lti_registration_wips`  WHERE `lti_registration_wips`.`id` = 3 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE `lti_registration_wips` SET `tenant_name` = 'Elan University208', `updated_at` = '2015-05-12 21:08:17' WHERE `lti_registration_wips`.`id` = 3
  [1m[36m (6.1ms)[0m  [1mCOMMIT[0m
  [1m[35mLti2Tp::Registration Load (0.3ms)[0m  SELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 3 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE `lti2_tp_registrations` SET `tenant_name` = 'Elan University208', `updated_at` = '2015-05-12 21:08:17' WHERE `lti2_tp_registrations`.`id` = 3
  [1m[36m (6.0ms)[0m  [1mCOMMIT[0m
  [1m[35mLtiRegistrationWip Load (0.3ms)[0m  SELECT  `lti_registration_wips`.* FROM `lti_registration_wips`  WHERE `lti_registration_wips`.`id` = 3 LIMIT 1
  [1m[36mLti2Tp::Registration Load (0.2ms)[0m  [1mSELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 3 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mTenant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `tenants`  WHERE `tenants`.`tenant_name` = BINARY 'Elan University208' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `tenants` (`created_at`, `tenant_name`, `updated_at`) VALUES ('2015-05-12 21:08:17', 'Elan University208', '2015-05-12 21:08:17')
  [1m[36m (6.0ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE `lti2_tp_registrations` SET `end_registration_id` = 'ef3c4510-db18-0132-d252-20c9d07c6451', `tool_proxy_json` = '{\"@context\":[\"http://purl.imsglobal.org/ctx/lti/v2/ToolConsumerProfile\",{\"ltitcp\":\"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/e8dbc090-db18-0132-d251-20c9d07c6451#\"}],\"@type\":\"ToolProxy\",\"@id\":\"ToolProxyProposal_at_2015-05-12T21:08:17Z\",\"lti_version\":\"LTI-2p0\",\"tool_proxy_guid\":\"e8dbba20-db18-0132-d251-20c9d07c6451\",\"tool_consumer_profile\":\"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/e8dbc090-db18-0132-d251-20c9d07c6451\",\"tool_profile\":{\"base_url_choice\":[{\"default_base_url\":\"http://rails.kinexis.com:5000\",\"selector\":{\"applies_to\":[\"IconEndpoint\",\"MessageHandler\"]}}],\"lti_version\":\"LTI-2p0\",\"message\":[{\"message_type\":[\"ToolProxyRegistrationRequest\",\"ToolProxyReregistrationRequest\"],\"parameter\":[{\"name\":\"tc_profile_url\",\"variable\":\"ToolConsumerProfile.url\"}],\"path\":\"http://rails.kinexis.com:5000/lti2_tp/reregistrations\"}],\"product_instance\":{\"guid\":\"fd75124a-140e-470f-944c-114d2d92bb40\",\"product_info\":{\"description\":{\"default_value\":\"Fabericious reflowable ePub3 Textbook\",\"key\":\"tool.description\"},\"product_family\":{\"code\":\"assessment-tool\",\"vendor\":{\"code\":\"fabericious.org\",\"contact\":{\"email\":\"info@fabericious.com\"},\"description\":{\"default_value\":\"Fabericious is a leading provider of interactive tools for education\",\"key\":\"tool.vendor.description\"},\"vendor_name\":{\"default_value\":\"Fab\",\"key\":\"tool.vendor.name\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\",\"website\":\"{http://rails.kinexis.com:5000}\"}},\"product_name\":{\"default_value\":\"LTI2 BookTools\",\"key\":\"tool.name\"},\"product_version\":\"10.3\",\"technical_description\":{\"default_value\":\"Support provided for all LTI 1 extensions as well as LTI 2\",\"key\":\"tool.technical\"}},\"service_provider\":{\"description\":{\"default_value\":\"Provider of high performance managed hosting environments\",\"key\":\"service_provider.description\"},\"guid\":\"18e7ea50-3d6d-4f6b-aff2-ed3ab577716c\",\"service_provider_name\":{\"default_value\":\"Amazon Cloud\",\"key\":\"service_provider.name\"},\"support\":{\"email\":\"support@ec2.fabericious.com\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\"},\"support\":{\"email\":\"helpdesk@fabericious.com\"}},\"resource_handler\":[{\"description\":{\"default_value\":\"Settings service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"tool_proxy_custom_url\",\"variable\":\"ToolProxy.custom.url\"},{\"name\":\"tool_proxy_binding_custom_url\",\"variable\":\"ToolProxyBinding.custom.url\"},{\"name\":\"lti_link_custom_url\",\"variable\":\"LtiLink.custom.url\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"ToolProxy.custom.url\",\"ToolProxyBinding.custom.url\",\"LtiLink.custom.url\"],\"path\":\"/settings\"}],\"resource_name\":{\"default_value\":\"Settings\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"setting\"}},{\"description\":{\"default_value\":\"Echo service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"fixed\":\"Narcissus\",\"name\":\"referrer\"},{\"fixed\":\"3.14159\",\"name\":\"pi\"},{\"name\":\"user_primary_email\",\"variable\":\"Person.email.primary\"},{\"name\":\"discipline\",\"variable\":\"CourseOffering.label\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\"],\"path\":\"/echoes\"}],\"resource_name\":{\"default_value\":\"Echo\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"echo\"}},{\"description\":{\"default_value\":\"Interactive resource\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"vbid\"},{\"name\":\"result_uri\",\"variable\":\"Result.uri\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"Result.autocreate\"],\"path\":\"/iresources\"}],\"resource_name\":{\"default_value\":\"InteractiveResource\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"iresource\"}}],\"service_offered\":[{\"@id\":\"http://rails.kinexis.com:5000/lti2_tp/ToolProxy.collection\",\"@type\":\"RestService\",\"action\":[\"PUT\"],\"endpoint\":\"http://rails.kinexis.com:5000/lti2_tp/tool_proxies\",\"format\":[\"\"]}]},\"security_contract\":{\"shared_secret\":\"0d079fe2ce4668bd9dd778fe4fe2fb61\",\"tool_service\":[{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxy.collection\",\"action\":[\"POST\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxy.item\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:Result.item\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:LtiLinkSettings\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxyBindingSettings\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxySettings\",\"action\":[\"GET\",\"PUT\"]}]}}', `updated_at` = '2015-05-12 21:08:17' WHERE `lti2_tp_registrations`.`id` = 3[0m
  [1m[35m (12.6ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE `lti2_tp_registrations` SET `status` = 'register', `updated_at` = '2015-05-12 21:08:17' WHERE `lti2_tp_registrations`.`id` = 3
  [1m[36m (6.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mTenant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `tenants`  WHERE (`tenants`.`tenant_name` = BINARY 'Elan University208' AND `tenants`.`id` != 3) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE `tenants` SET `secret` = '0d079fe2ce4668bd9dd778fe4fe2fb61', `tenant_key` = 'e8dbba20-db18-0132-d251-20c9d07c6451', `updated_at` = '2015-05-12 21:08:17' WHERE `tenants`.`id` = 3
  [1m[36m (6.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE `lti2_tp_registrations` SET `tenant_id` = 3, `updated_at` = '2015-05-12 21:08:17' WHERE `lti2_tp_registrations`.`id` = 3[0m
  [1m[35m (5.0ms)[0m  COMMIT
Redirected to http://localhost:5000/lti2_tp/registrations?status=success&tool_guid=e8dbba20-db18-0132-d251-20c9d07c6451&&id=3
Completed 302 Found in 340ms (ActiveRecord: 71.6ms)
Started GET "/lti2_tp/registrations?status=success&tool_guid=e8dbba20-db18-0132-d251-20c9d07c6451&&id=3" for 127.0.0.1 at 2015-05-12 14:08:17 -0700
Processing by Lti2Tp::RegistrationsController#index as HTML
  Parameters: {"status"=>"success", "tool_guid"=>"e8dbba20-db18-0132-d251-20c9d07c6451", "id"=>"3"}
  [1m[36mLti2Tp::Registration Load (0.4ms)[0m  [1mSELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 3 LIMIT 1[0m
Redirected to http://rails.kinexis.com:4000/admin/tool_actions?status=success&tool_guid=e8dbba20-db18-0132-d251-20c9d07c6451
Completed 302 Found in 1ms (ActiveRecord: 0.4ms)
Started POST "/iresources" for 127.0.0.1 at 2015-05-12 14:08:48 -0700
Processing by IresourcesController#create as HTML
  Parameters: {"lti_version"=>"LTI-2p0", "lti_message_type"=>"basic-lti-launch-request", "resource_link_id"=>"25", "user_id"=>"2", "roles"=>"Instructor", "launch_presentation_return_url"=>"http://rails.kinexis.com:4000/admin/course_page?method=show&course_id=2", "launch_presentation_document_target"=>"window", "context_id"=>"2", "launch_presentation_locale"=>"en_US", "context_label"=>"SMPL101A", "context_title"=>"Nursing Compendium", "lis_course_section_sourcedid"=>"2", "tool_consumer_info_product_family_code"=>"LuMoS", "tool_consumer_info_version"=>"3.1", "custom_vbid"=>"L-999-74180", "custom_result_uri"=>"http://rails.kinexis.com:4000/results/1", "oauth_consumer_key"=>"e8dbba20-db18-0132-d251-20c9d07c6451", "oauth_nonce"=>"9498666833302", "oauth_signature_method"=>"HMAC-SHA1", "oauth_timestamp"=>"1431464928", "oauth_version"=>"1.0", "oauth_callback"=>"about:blank", "oauth_signature"=>"w7inxXdUhGmOuT5/OglKCBGpqbA="}
AuthHdr_Parms: {}
  [1m[35mTenant Load (0.3ms)[0m  SELECT  `tenants`.* FROM `tenants`  WHERE `tenants`.`tenant_key` = 'e8dbba20-db18-0132-d251-20c9d07c6451'  ORDER BY `tenants`.`id` ASC LIMIT 1
  [1m[36mLti2Tp::Registration Load (0.3ms)[0m  [1mSELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`tenant_id` = 3  ORDER BY `lti2_tp_registrations`.`id` ASC LIMIT 1[0m
AuthHdr_Parms: {}
in verify_signature
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `iresources` (`created_at`, `tenant_id`, `updated_at`) VALUES ('2015-05-12 21:08:48', 3, '2015-05-12 21:08:48')[0m
  [1m[35m (6.0ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE `iresources` SET `contextid` = '2', `result_uri` = 'http://rails.kinexis.com:4000/results/1', `updated_at` = '2015-05-12 21:08:48', `userid` = '2' WHERE `iresources`.`id` = 1
  [1m[36m (6.2ms)[0m  [1mCOMMIT[0m
  Rendered iresources/_form.html.haml (13.7ms)
  Rendered iresources/create.html.haml within layouts/application (16.4ms)
Completed 200 OK in 91ms (Views: 21.5ms | ActiveRecord: 39.2ms)
Started GET "/assets/application.css" for 127.0.0.1 at 2015-05-12 14:08:48 -0700
Started GET "/assets/formtastic.css" for 127.0.0.1 at 2015-05-12 14:08:48 -0700
Started GET "/assets/my_formtastic_changes.css" for 127.0.0.1 at 2015-05-12 14:08:48 -0700
Started GET "/assets/fabericious.png" for 127.0.0.1 at 2015-05-12 14:08:48 -0700
Started PATCH "/iresources/1" for 127.0.0.1 at 2015-05-12 14:08:54 -0700
Processing by IresourcesController#update as HTML
  Parameters: {"utf8"=>"âœ“", "iresource"=>{"score"=>".57"}, "commit"=>"Update Iresource", "id"=>"1"}
  [1m[35mTenant Load (0.3ms)[0m  SELECT  `tenants`.* FROM `tenants`  WHERE `tenants`.`id` = 3 LIMIT 1
  [1m[36mIresource Load (0.2ms)[0m  [1mSELECT  `iresources`.* FROM `iresources`  WHERE `iresources`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE `iresources` SET `score` = 0.57, `updated_at` = '2015-05-12 21:08:54' WHERE `iresources`.`id` = 1[0m
  [1m[35m (5.9ms)[0m  COMMIT
Redirected to http://rails.kinexis.com:4000/admin/course_page?method=show&course_id=2
Completed 302 Found in 40ms (ActiveRecord: 6.8ms)
Started POST "/settings" for 127.0.0.1 at 2015-05-12 14:09:22 -0700
Processing by SettingsController#create as HTML
  Parameters: {"lti_version"=>"LTI-2p0", "lti_message_type"=>"basic-lti-launch-request", "resource_link_id"=>"19", "user_id"=>"2", "roles"=>"Instructor", "launch_presentation_return_url"=>"http://rails.kinexis.com:4000/admin/course_page?method=show&course_id=2", "launch_presentation_document_target"=>"window", "context_id"=>"2", "launch_presentation_locale"=>"en_US", "context_label"=>"SMPL101A", "context_title"=>"Nursing Compendium", "lis_course_section_sourcedid"=>"2", "tool_consumer_info_product_family_code"=>"LuMoS", "tool_consumer_info_version"=>"3.1", "custom_tool_proxy_custom_url"=>"http://rails.kinexis.com:4000/lti2_tc/tool_settings/e8dbba20-db18-0132-d251-20c9d07c6451", "custom_tool_proxy_binding_custom_url"=>"http://rails.kinexis.com:4000/lti2_tc/tool_settings/e8dbba20-db18-0132-d251-20c9d07c6451/context/2", "custom_lti_link_custom_url"=>"http://rails.kinexis.com:4000/lti2_tc/tool_settings/e8dbba20-db18-0132-d251-20c9d07c6451/ltilink/19", "oauth_consumer_key"=>"e8dbba20-db18-0132-d251-20c9d07c6451", "oauth_nonce"=>"4576225709378", "oauth_signature_method"=>"HMAC-SHA1", "oauth_timestamp"=>"1431464962", "oauth_version"=>"1.0", "oauth_callback"=>"about:blank", "oauth_signature"=>"yD9hdDdgRgyVLp/gT1MWal9AAX4="}
PrePreProcessTenant
AuthHdr_Parms: {}
  [1m[36mTenant Load (0.4ms)[0m  [1mSELECT  `tenants`.* FROM `tenants`  WHERE `tenants`.`tenant_key` = 'e8dbba20-db18-0132-d251-20c9d07c6451'  ORDER BY `tenants`.`id` ASC LIMIT 1[0m
  [1m[35mLti2Tp::Registration Load (0.5ms)[0m  SELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`tenant_id` = 3  ORDER BY `lti2_tp_registrations`.`id` ASC LIMIT 1
AuthHdr_Parms: {}
in verify_signature
  Rendered inline template (0.4ms)
Completed 200 OK in 59ms (Views: 1.1ms | ActiveRecord: 0.9ms)
Started POST "/settings" for 127.0.0.1 at 2015-05-12 14:09:30 -0700
Processing by SettingsController#create as HTML
  Parameters: {"registration_id"=>"3", "custom_tool_proxy_custom_url"=>"http://rails.kinexis.com:4000/lti2_tc/tool_settings/e8dbba20-db18-0132-d251-20c9d07c6451", "custom_tool_proxy_binding_custom_url"=>"http://rails.kinexis.com:4000/lti2_tc/tool_settings/e8dbba20-db18-0132-d251-20c9d07c6451/context/2", "custom_lti_link_custom_url"=>"http://rails.kinexis.com:4000/lti2_tc/tool_settings/e8dbba20-db18-0132-d251-20c9d07c6451/ltilink/19", "toolproxy"=>"client=k12", "toolproxybinding"=>"", "ltilink"=>""}
  [1m[36mLti2Tp::Registration Load (0.3ms)[0m  [1mSELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 3 LIMIT 1[0m
  [1m[35mTenant Load (0.2ms)[0m  SELECT  `tenants`.* FROM `tenants`  WHERE `tenants`.`id` = 3 LIMIT 1
  Rendered text template (0.0ms)
Completed 200 OK in 61ms (Views: 1.6ms | ActiveRecord: 0.6ms)
Started POST "/echoes" for 127.0.0.1 at 2015-05-12 14:09:45 -0700
Processing by EchoesController#create as HTML
  Parameters: {"lti_version"=>"LTI-2p0", "lti_message_type"=>"basic-lti-launch-request", "resource_link_id"=>"22", "user_id"=>"2", "roles"=>"Instructor", "launch_presentation_return_url"=>"http://rails.kinexis.com:4000/admin/course_page?method=show&course_id=2", "launch_presentation_document_target"=>"window", "context_id"=>"2", "launch_presentation_locale"=>"en_US", "context_label"=>"SMPL101A", "context_title"=>"Nursing Compendium", "lis_course_section_sourcedid"=>"2", "tool_consumer_info_product_family_code"=>"LuMoS", "tool_consumer_info_version"=>"3.1", "custom_referrer"=>"Narcissus", "custom_pi"=>"3.14159", "custom_user_primary_email"=>"admin@lumos.org", "custom_discipline"=>"SMPL101A", "custom_client"=>"k12", "oauth_consumer_key"=>"e8dbba20-db18-0132-d251-20c9d07c6451", "oauth_nonce"=>"7563545787623", "oauth_signature_method"=>"HMAC-SHA1", "oauth_timestamp"=>"1431464985", "oauth_version"=>"1.0", "oauth_callback"=>"about:blank", "oauth_signature"=>"oz2CNukDr/XK4LFRnm76Ld0aKvs="}
AuthHdr_Parms: {}
  [1m[36mTenant Load (0.4ms)[0m  [1mSELECT  `tenants`.* FROM `tenants`  WHERE `tenants`.`tenant_key` = 'e8dbba20-db18-0132-d251-20c9d07c6451'  ORDER BY `tenants`.`id` ASC LIMIT 1[0m
  [1m[35mLti2Tp::Registration Load (0.5ms)[0m  SELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`tenant_id` = 3  ORDER BY `lti2_tp_registrations`.`id` ASC LIMIT 1
AuthHdr_Parms: {}
in verify_signature
  Rendered inline template (0.4ms)
Completed 200 OK in 7ms (Views: 1.0ms | ActiveRecord: 0.9ms)
Started POST "/lti2_tp/reregistrations" for 127.0.0.1 at 2015-05-12 14:10:31 -0700
Processing by Lti2Tp::RegistrationsController#reregister as HTML
  Parameters: {"tc_profile_url"=>"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/e8dbc090-db18-0132-d251-20c9d07c6451", "launch_presentation_return_url"=>"http://rails.kinexis.com:4000/admin/tool_actions", "lti_message_type"=>"ToolProxyReregistrationRequest", "oauth_consumer_key"=>"e8dbba20-db18-0132-d251-20c9d07c6451", "oauth_nonce"=>"3046567632322", "oauth_signature_method"=>"HMAC-SHA1", "oauth_timestamp"=>"1431465031", "oauth_version"=>"1.0", "oauth_callback"=>"about:blank", "oauth_signature"=>"D9aJuSXnUP7xcloo1ITnIk2USyA="}
AuthHdr_Parms: {}
  [1m[36mTenant Load (0.4ms)[0m  [1mSELECT  `tenants`.* FROM `tenants`  WHERE `tenants`.`tenant_key` = 'e8dbba20-db18-0132-d251-20c9d07c6451'  ORDER BY `tenants`.`id` ASC LIMIT 1[0m
  [1m[35mLti2Tp::Registration Load (0.4ms)[0m  SELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`tenant_id` = 3  ORDER BY `lti2_tp_registrations`.`id` ASC LIMIT 1
AuthHdr_Parms: {}
in verify_signature
  [1m[36mLti2Tp::Registration Load (0.5ms)[0m  [1mSELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`tenant_name` = 'Elan University208'  ORDER BY `lti2_tp_registrations`.`id` ASC LIMIT 1[0m
  [1m[35mTenant Load (0.6ms)[0m  SELECT  `tenants`.* FROM `tenants`  WHERE `tenants`.`id` = 3 LIMIT 1
  [1m[36mLti2Tp::Tool Load (0.4ms)[0m  [1mSELECT  `lti2_tp_tools`.* FROM `lti2_tp_tools`  WHERE `lti2_tp_tools`.`id` = 2 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE `lti2_tp_registrations` SET `message_type` = 'reregistration', `reg_password` = '0d079fe2ce4668bd9dd778fe4fe2fb61', `status` = 'received', `updated_at` = '2015-05-12 21:10:31' WHERE `lti2_tp_registrations`.`id` = 3[0m
  [1m[35m (11.5ms)[0m  COMMIT
Redirected to http://rails.kinexis.com:5000/lti_registration_wips?registration_id=3&return_url=/lti2_tp/registrations
Completed 302 Found in 47ms (ActiveRecord: 14.2ms)
Started GET "/lti_registration_wips?registration_id=3&return_url=/lti2_tp/registrations" for 127.0.0.1 at 2015-05-12 14:10:31 -0700
Processing by LtiRegistrationWipsController#index as HTML
  Parameters: {"registration_id"=>"3", "return_url"=>"/lti2_tp/registrations"}
  [1m[36mLti2Tp::Registration Load (0.4ms)[0m  [1mSELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 3 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `lti_registration_wips` (`created_at`, `product_name`, `registration_id`, `registration_return_url`, `support_email`, `tenant_name`, `updated_at`) VALUES ('2015-05-12 21:10:31', 'Elan/LuMoS', 3, '/lti2_tp/registrations', 'john.tibbetts@kinexis.com', 'Elan University208', '2015-05-12 21:10:31')[0m
  [1m[35m (11.6ms)[0m  COMMIT
  Rendered lti_registration_wips/_form.html.haml (10.4ms)
  Rendered lti_registration_wips/index.html.haml within layouts/application (10.7ms)
Completed 200 OK in 28ms (Views: 12.6ms | ActiveRecord: 12.4ms)
Started PATCH "/lti_registration_wips/4" for 127.0.0.1 at 2015-05-12 14:10:33 -0700
Processing by LtiRegistrationWipsController#update as HTML
  Parameters: {"utf8"=>"âœ“", "lti_registration_wip"=>{"support_email"=>"john.tibbetts@kinexis.com", "product_name"=>"Elan/LuMoS", "tenant_name"=>"Elan University208"}, "commit"=>"Update Lti registration wip", "id"=>"4"}
  [1m[36mLtiRegistrationWip Load (0.3ms)[0m  [1mSELECT  `lti_registration_wips`.* FROM `lti_registration_wips`  WHERE `lti_registration_wips`.`id` = 4 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35mLti2Tp::Registration Load (0.2ms)[0m  SELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 3 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  `lti_registration_wips`.* FROM `lti_registration_wips`  WHERE `lti_registration_wips`.`id` = 4 LIMIT 1[0m  [["id", "4"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 3 LIMIT 1  [["id", 3]]
  [1m[36mTenant Load (0.2ms)[0m  [1mSELECT  `tenants`.* FROM `tenants`  WHERE `tenants`.`tenant_name` = 'Elan University208'  ORDER BY `tenants`.`id` ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE `lti2_tp_registrations` SET `end_registration_id` = '402a0c10-db19-0132-d252-20c9d07c6451', `proposed_tool_proxy_json` = '{\"@context\":[\"http://purl.imsglobal.org/ctx/lti/v2/ToolConsumerProfile\",{\"ltitcp\":\"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/e8dbc090-db18-0132-d251-20c9d07c6451#\"}],\"@type\":\"ToolProxy\",\"@id\":\"ToolProxyProposal_at_2015-05-12T21:10:33Z\",\"lti_version\":\"LTI-2p0\",\"tool_proxy_guid\":\"e8dbba20-db18-0132-d251-20c9d07c6451\",\"tool_consumer_profile\":\"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/e8dbc090-db18-0132-d251-20c9d07c6451\",\"tool_profile\":{\"base_url_choice\":[{\"default_base_url\":\"http://rails.kinexis.com:5000\",\"selector\":{\"applies_to\":[\"IconEndpoint\",\"MessageHandler\"]}}],\"lti_version\":\"LTI-2p0\",\"message\":[{\"message_type\":[\"ToolProxyRegistrationRequest\",\"ToolProxyReregistrationRequest\"],\"parameter\":[{\"name\":\"tc_profile_url\",\"variable\":\"ToolConsumerProfile.url\"}],\"path\":\"http://rails.kinexis.com:5000/lti2_tp/reregistrations\"}],\"product_instance\":{\"guid\":\"fd75124a-140e-470f-944c-114d2d92bb40\",\"product_info\":{\"description\":{\"default_value\":\"Fabericious reflowable ePub3 Textbook\",\"key\":\"tool.description\"},\"product_family\":{\"code\":\"assessment-tool\",\"vendor\":{\"code\":\"fabericious.org\",\"contact\":{\"email\":\"info@fabericious.com\"},\"description\":{\"default_value\":\"Fabericious is a leading provider of interactive tools for education\",\"key\":\"tool.vendor.description\"},\"vendor_name\":{\"default_value\":\"Fab\",\"key\":\"tool.vendor.name\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\",\"website\":\"{http://rails.kinexis.com:5000}\"}},\"product_name\":{\"default_value\":\"LTI2 BookTools\",\"key\":\"tool.name\"},\"product_version\":\"10.3\",\"technical_description\":{\"default_value\":\"Support provided for all LTI 1 extensions as well as LTI 2\",\"key\":\"tool.technical\"}},\"service_provider\":{\"description\":{\"default_value\":\"Provider of high performance managed hosting environments\",\"key\":\"service_provider.description\"},\"guid\":\"18e7ea50-3d6d-4f6b-aff2-ed3ab577716c\",\"service_provider_name\":{\"default_value\":\"Amazon Cloud\",\"key\":\"service_provider.name\"},\"support\":{\"email\":\"support@ec2.fabericious.com\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\"},\"support\":{\"email\":\"helpdesk@fabericious.com\"}},\"resource_handler\":[{\"description\":{\"default_value\":\"Settings service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"tool_proxy_custom_url\",\"variable\":\"ToolProxy.custom.url\"},{\"name\":\"tool_proxy_binding_custom_url\",\"variable\":\"ToolProxyBinding.custom.url\"},{\"name\":\"lti_link_custom_url\",\"variable\":\"LtiLink.custom.url\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"ToolProxy.custom.url\",\"ToolProxyBinding.custom.url\",\"LtiLink.custom.url\"],\"path\":\"/settings\"}],\"resource_name\":{\"default_value\":\"Settings\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"setting\"}},{\"description\":{\"default_value\":\"Echo service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"fixed\":\"Narcissus\",\"name\":\"referrer\"},{\"fixed\":\"3.14159\",\"name\":\"pi\"},{\"name\":\"user_primary_email\",\"variable\":\"Person.email.primary\"},{\"name\":\"discipline\",\"variable\":\"CourseOffering.label\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\"],\"path\":\"/echoes\"}],\"resource_name\":{\"default_value\":\"Echo\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"echo\"}},{\"description\":{\"default_value\":\"Interactive resource\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"vbid\"},{\"name\":\"result_uri\",\"variable\":\"Result.uri\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"Result.autocreate\"],\"path\":\"/iresources\"}],\"resource_name\":{\"default_value\":\"InteractiveResource\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"iresource\"}}],\"service_offered\":[{\"@id\":\"http://rails.kinexis.com:5000/lti2_tp/ToolProxy.collection\",\"@type\":\"RestService\",\"action\":[\"PUT\"],\"endpoint\":\"http://rails.kinexis.com:5000/lti2_tp/tool_proxies\",\"format\":[\"\"]}]},\"security_contract\":{\"shared_secret\":\"ceaf4ecd890151e8cebcecda8f16805b\",\"tool_service\":[{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxy.collection\",\"action\":[\"POST\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxy.item\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:Result.item\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:LtiLinkSettings\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxyBindingSettings\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxySettings\",\"action\":[\"GET\",\"PUT\"]}]}}', `updated_at` = '2015-05-12 21:10:33' WHERE `lti2_tp_registrations`.`id` = 3[0m
  [1m[35m (6.2ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE `lti2_tp_registrations` SET `status` = 'reregistered', `updated_at` = '2015-05-12 21:10:33' WHERE `lti2_tp_registrations`.`id` = 3
  [1m[36m (11.6ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mTenant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `tenants`  WHERE (`tenants`.`tenant_name` = BINARY 'Elan University208' AND `tenants`.`id` != 3) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  COMMIT
Redirected to http://rails.kinexis.com:5000/lti2_tp/registrations?status=success&&id=3
Completed 302 Found in 72ms (ActiveRecord: 20.4ms)
Started GET "/lti2_tp/registrations?status=success&&id=3" for 127.0.0.1 at 2015-05-12 14:10:33 -0700
Processing by Lti2Tp::RegistrationsController#index as HTML
  Parameters: {"status"=>"success", "id"=>"3"}
  [1m[36mLti2Tp::Registration Load (0.4ms)[0m  [1mSELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 3 LIMIT 1[0m
Redirected to http://rails.kinexis.com:4000/admin/tool_actions?status=success
Completed 302 Found in 1ms (ActiveRecord: 0.4ms)
Started PUT "/lti2_tp/tool_proxies/e8dbba20-db18-0132-d251-20c9d07c6451?correlation=402a0c10-db19-0132-d252-20c9d07c6451" for 127.0.0.1 at 2015-05-12 14:10:34 -0700
Processing by Lti2Tp::RegistrationsController#complete_reregistration as HTML
  Parameters: {"correlation"=>"402a0c10-db19-0132-d252-20c9d07c6451", "id"=>"e8dbba20-db18-0132-d251-20c9d07c6451"}
AuthHdr_Parms: {:oauth_consumer_key=>"e8dbba20-db18-0132-d251-20c9d07c6451", :oauth_nonce=>"2361775652731", :oauth_signature_method=>"HMAC-SHA1", :oauth_timestamp=>"1431465034", :oauth_version=>"1.0", :oauth_callback=>"about:blank", :oauth_signature=>"rWRejrGhlxxOkeCPxJdJEW+iXNw="}
  [1m[35mTenant Load (0.3ms)[0m  SELECT  `tenants`.* FROM `tenants`  WHERE `tenants`.`tenant_key` = 'e8dbba20-db18-0132-d251-20c9d07c6451'  ORDER BY `tenants`.`id` ASC LIMIT 1
  [1m[36mLti2Tp::Registration Load (0.3ms)[0m  [1mSELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`tenant_id` = 3  ORDER BY `lti2_tp_registrations`.`id` ASC LIMIT 1[0m
AuthHdr_Parms: {:oauth_consumer_key=>"e8dbba20-db18-0132-d251-20c9d07c6451", :oauth_nonce=>"2361775652731", :oauth_signature_method=>"HMAC-SHA1", :oauth_timestamp=>"1431465034", :oauth_version=>"1.0", :oauth_callback=>"about:blank", :oauth_signature=>"rWRejrGhlxxOkeCPxJdJEW+iXNw="}
in verify_signature
  [1m[35mLti2Tp::Registration Load (0.4ms)[0m  SELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`tenant_name` = 'Elan University208'  ORDER BY `lti2_tp_registrations`.`id` ASC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`tenant_id` = 3  ORDER BY `lti2_tp_registrations`.`id` ASC LIMIT 1[0m
  [1m[35mTenant Load (0.5ms)[0m  SELECT  `tenants`.* FROM `tenants`  WHERE `tenants`.`id` = 3 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mTenant Exists (0.3ms)[0m  SELECT  1 AS one FROM `tenants`  WHERE (`tenants`.`tenant_name` = BINARY 'Elan University208' AND `tenants`.`id` != 3) LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE `tenants` SET `secret` = 'ceaf4ecd890151e8cebcecda8f16805b', `updated_at` = '2015-05-12 21:10:34' WHERE `tenants`.`id` = 3[0m
  [1m[35m (5.8ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  UPDATE `lti2_tp_registrations` SET `end_registration_id` = NULL, `proposed_tool_proxy_json` = NULL, `reg_password` = 'ceaf4ecd890151e8cebcecda8f16805b', `tool_proxy_json` = '{\"@context\":[\"http://purl.imsglobal.org/ctx/lti/v2/ToolConsumerProfile\",{\"ltitcp\":\"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/e8dbc090-db18-0132-d251-20c9d07c6451#\"}],\"@type\":\"ToolProxy\",\"@id\":\"ToolProxyProposal_at_2015-05-12T21:10:33Z\",\"lti_version\":\"LTI-2p0\",\"tool_proxy_guid\":\"e8dbba20-db18-0132-d251-20c9d07c6451\",\"tool_consumer_profile\":\"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/e8dbc090-db18-0132-d251-20c9d07c6451\",\"tool_profile\":{\"base_url_choice\":[{\"default_base_url\":\"http://rails.kinexis.com:5000\",\"selector\":{\"applies_to\":[\"IconEndpoint\",\"MessageHandler\"]}}],\"lti_version\":\"LTI-2p0\",\"message\":[{\"message_type\":[\"ToolProxyRegistrationRequest\",\"ToolProxyReregistrationRequest\"],\"parameter\":[{\"name\":\"tc_profile_url\",\"variable\":\"ToolConsumerProfile.url\"}],\"path\":\"http://rails.kinexis.com:5000/lti2_tp/reregistrations\"}],\"product_instance\":{\"guid\":\"fd75124a-140e-470f-944c-114d2d92bb40\",\"product_info\":{\"description\":{\"default_value\":\"Fabericious reflowable ePub3 Textbook\",\"key\":\"tool.description\"},\"product_family\":{\"code\":\"assessment-tool\",\"vendor\":{\"code\":\"fabericious.org\",\"contact\":{\"email\":\"info@fabericious.com\"},\"description\":{\"default_value\":\"Fabericious is a leading provider of interactive tools for education\",\"key\":\"tool.vendor.description\"},\"vendor_name\":{\"default_value\":\"Fab\",\"key\":\"tool.vendor.name\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\",\"website\":\"{http://rails.kinexis.com:5000}\"}},\"product_name\":{\"default_value\":\"LTI2 BookTools\",\"key\":\"tool.name\"},\"product_version\":\"10.3\",\"technical_description\":{\"default_value\":\"Support provided for all LTI 1 extensions as well as LTI 2\",\"key\":\"tool.technical\"}},\"service_provider\":{\"description\":{\"default_value\":\"Provider of high performance managed hosting environments\",\"key\":\"service_provider.description\"},\"guid\":\"18e7ea50-3d6d-4f6b-aff2-ed3ab577716c\",\"service_provider_name\":{\"default_value\":\"Amazon Cloud\",\"key\":\"service_provider.name\"},\"support\":{\"email\":\"support@ec2.fabericious.com\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\"},\"support\":{\"email\":\"helpdesk@fabericious.com\"}},\"resource_handler\":[{\"description\":{\"default_value\":\"Settings service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"tool_proxy_custom_url\",\"variable\":\"ToolProxy.custom.url\"},{\"name\":\"tool_proxy_binding_custom_url\",\"variable\":\"ToolProxyBinding.custom.url\"},{\"name\":\"lti_link_custom_url\",\"variable\":\"LtiLink.custom.url\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"ToolProxy.custom.url\",\"ToolProxyBinding.custom.url\",\"LtiLink.custom.url\"],\"path\":\"/settings\"}],\"resource_name\":{\"default_value\":\"Settings\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"setting\"}},{\"description\":{\"default_value\":\"Echo service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"fixed\":\"Narcissus\",\"name\":\"referrer\"},{\"fixed\":\"3.14159\",\"name\":\"pi\"},{\"name\":\"user_primary_email\",\"variable\":\"Person.email.primary\"},{\"name\":\"discipline\",\"variable\":\"CourseOffering.label\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\"],\"path\":\"/echoes\"}],\"resource_name\":{\"default_value\":\"Echo\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"echo\"}},{\"description\":{\"default_value\":\"Interactive resource\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"vbid\"},{\"name\":\"result_uri\",\"variable\":\"Result.uri\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"Result.autocreate\"],\"path\":\"/iresources\"}],\"resource_name\":{\"default_value\":\"InteractiveResource\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"iresource\"}}],\"service_offered\":[{\"@id\":\"http://rails.kinexis.com:5000/lti2_tp/ToolProxy.collection\",\"@type\":\"RestService\",\"action\":[\"PUT\"],\"endpoint\":\"http://rails.kinexis.com:5000/lti2_tp/tool_proxies\",\"format\":[\"\"]}]},\"security_contract\":{\"shared_secret\":\"ceaf4ecd890151e8cebcecda8f16805b\",\"tool_service\":[{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxy.collection\",\"action\":[\"POST\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxy.item\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:Result.item\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:LtiLinkSettings\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxyBindingSettings\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxySettings\",\"action\":[\"GET\",\"PUT\"]}]}}', `updated_at` = '2015-05-12 21:10:34' WHERE `lti2_tp_registrations`.`id` = 3
  [1m[36m (5.5ms)[0m  [1mCOMMIT[0m
"reregistration complete for e8dbba20-db18-0132-d251-20c9d07c6451"
  Rendered text template (0.0ms)
Completed 200 OK in 23ms (Views: 0.5ms | ActiveRecord: 13.9ms)
Started POST "/echoes" for 127.0.0.1 at 2015-05-12 14:10:43 -0700
Processing by EchoesController#create as HTML
  Parameters: {"lti_version"=>"LTI-2p0", "lti_message_type"=>"basic-lti-launch-request", "resource_link_id"=>"22", "user_id"=>"2", "roles"=>"Instructor", "launch_presentation_return_url"=>"http://rails.kinexis.com:4000/admin/course_page?method=show&course_id=2", "launch_presentation_document_target"=>"window", "context_id"=>"2", "launch_presentation_locale"=>"en_US", "context_label"=>"SMPL101A", "context_title"=>"Nursing Compendium", "lis_course_section_sourcedid"=>"2", "tool_consumer_info_product_family_code"=>"LuMoS", "tool_consumer_info_version"=>"3.1", "custom_referrer"=>"Narcissus", "custom_pi"=>"3.14159", "custom_user_primary_email"=>"admin@lumos.org", "custom_discipline"=>"SMPL101A", "custom_client"=>"k12", "oauth_consumer_key"=>"e8dbba20-db18-0132-d251-20c9d07c6451", "oauth_nonce"=>"5785927288510", "oauth_signature_method"=>"HMAC-SHA1", "oauth_timestamp"=>"1431465043", "oauth_version"=>"1.0", "oauth_callback"=>"about:blank", "oauth_signature"=>"vyJQPWwhcuiBnBzG5SiDyf6Uvgk="}
AuthHdr_Parms: {}
  [1m[35mTenant Load (0.3ms)[0m  SELECT  `tenants`.* FROM `tenants`  WHERE `tenants`.`tenant_key` = 'e8dbba20-db18-0132-d251-20c9d07c6451'  ORDER BY `tenants`.`id` ASC LIMIT 1
  [1m[36mLti2Tp::Registration Load (0.3ms)[0m  [1mSELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`tenant_id` = 3  ORDER BY `lti2_tp_registrations`.`id` ASC LIMIT 1[0m
AuthHdr_Parms: {}
in verify_signature
  Rendered inline template (0.3ms)
Completed 200 OK in 6ms (Views: 0.7ms | ActiveRecord: 0.6ms)
