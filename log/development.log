  [1m[36mLti2Tp::Registry Load (6.9ms)[0m  [1mSELECT `lti2_tp_registries`.* FROM `lti2_tp_registries`[0m
  [1m[36mLti2Tp::Registry Load (0.3ms)[0m  [1mSELECT `lti2_tp_registries`.* FROM `lti2_tp_registries`[0m


Started POST "/lti2_tp/reregistrations" for 127.0.0.1 at 2015-04-23 14:17:05 -0700
  [1m[35mActiveRecord::SchemaMigration Load (0.5ms)[0m  SELECT `schema_migrations`.* FROM `schema_migrations`
Processing by Lti2Tp::RegistrationsController#reregister as HTML
  Parameters: {"tc_profile_url"=>"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/74c340c0-cb7b-0132-536b-20c9d07c6451", "launch_presentation_return_url"=>"http://rails.kinexis.com:4000/admin/tool_actions", "lti_message_type"=>"ToolProxyReregistrationRequest", "oauth_consumer_key"=>"74c33940-cb7b-0132-536b-20c9d07c6451", "oauth_nonce"=>"1255704047888", "oauth_signature_method"=>"HMAC-SHA1", "oauth_timestamp"=>"1429823825", "oauth_version"=>"1.0", "oauth_callback"=>"about:blank", "oauth_signature"=>"LI0JIzG+4QOb8B6N3JCYcdUDlS8="}
Can't verify CSRF token authenticity
AuthHdr_Parms: {}
  [1m[36mTenant Load (0.4ms)[0m  [1mSELECT  `tenants`.* FROM `tenants`  WHERE `tenants`.`tenant_key` = '74c33940-cb7b-0132-536b-20c9d07c6451'  ORDER BY `tenants`.`id` ASC LIMIT 1[0m
  [1m[35mLti2Tp::Registration Load (0.5ms)[0m  SELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`tenant_id` = 115  ORDER BY `lti2_tp_registrations`.`id` ASC LIMIT 1
AuthHdr_Parms: {}
in verify_signature
  [1m[36mLti2Tp::Registration Load (0.4ms)[0m  [1mSELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`tenant_name` = 'Elan University513'  ORDER BY `lti2_tp_registrations`.`id` ASC LIMIT 1[0m
  [1m[35mTenant Load (0.4ms)[0m  SELECT  `tenants`.* FROM `tenants`  WHERE `tenants`.`id` = 115 LIMIT 1
  [1m[36mLti2Tp::Tool Load (0.5ms)[0m  [1mSELECT  `lti2_tp_tools`.* FROM `lti2_tp_tools`  WHERE `lti2_tp_tools`.`id` = 2 LIMIT 1[0m
Completed 500 Internal Server Error in 183ms

TypeError - no implicit conversion of nil into String:
  /Users/johntibbetts/git/LTI2/lib/lti2_commons/lib/lti2_commons/json_wrapper.rb:114:in `block in substitute_template_values_from_hash'
  /Users/johntibbetts/git/LTI2/lib/lti2_commons/lib/lti2_commons/json_wrapper.rb:113:in `substitute_template_values_from_hash'
  /Users/johntibbetts/git/LTI2/lib/lti2_commons/lib/lti2_commons/json_wrapper.rb:91:in `block in substitute_text_in_all_nodes'
  /Users/johntibbetts/git/LTI2/lib/lti2_commons/lib/lti2_commons/json_wrapper.rb:26:in `block in each_leaf'
  /Users/johntibbetts/git/LTI2/lib/lti2_commons/lib/lti2_commons/json_wrapper.rb:25:in `each_leaf'
  /Users/johntibbetts/git/LTI2/lib/lti2_commons/lib/lti2_commons/json_wrapper.rb:90:in `substitute_text_in_all_nodes'
  /Users/johntibbetts/git/LTI2/lti2_tp/app/models/lti2_tp/tool.rb:7:in `get_tool_profile'
  /Users/johntibbetts/git/LTI2/lti2_tp/app/controllers/lti2_tp/registrations_controller.rb:131:in `reregister'
  actionpack (4.1.9) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.1.9) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.1.9) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.1.9) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.1.9) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.9) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.9) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.9) lib/active_support/callbacks.rb:86:in `run_callbacks'
  actionpack (4.1.9) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.1.9) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.1.9) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.1.9) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.9) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.9) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.1.9) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.1.9) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.1.9) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.1.9) lib/abstract_controller/base.rb:136:in `process'
  actionview (4.1.9) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.1.9) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.1.9) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.1.9) lib/action_controller/metal.rb:232:in `block in action'
  actionpack (4.1.9) lib/action_dispatch/routing/route_set.rb:82:in `dispatch'
  actionpack (4.1.9) lib/action_dispatch/routing/route_set.rb:50:in `call'
  actionpack (4.1.9) lib/action_dispatch/journey/router.rb:73:in `block in call'
  actionpack (4.1.9) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.9) lib/action_dispatch/routing/route_set.rb:685:in `call'
  railties (4.1.9) lib/rails/engine.rb:514:in `call'
  railties (4.1.9) lib/rails/railtie.rb:194:in `method_missing'
  actionpack (4.1.9) lib/action_dispatch/journey/router.rb:73:in `block in call'
  actionpack (4.1.9) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.9) lib/action_dispatch/routing/route_set.rb:685:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:35:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.1.9) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.1.9) lib/action_dispatch/middleware/flash.rb:254:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.1.9) lib/action_dispatch/middleware/cookies.rb:562:in `call'
  activerecord (4.1.9) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.1.9) lib/active_record/connection_adapters/abstract/connection_pool.rb:621:in `call'
  activerecord (4.1.9) lib/active_record/migration.rb:380:in `call'
  actionpack (4.1.9) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.1.9) lib/active_support/callbacks.rb:82:in `run_callbacks'
  actionpack (4.1.9) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.1.9) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.1.9) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (4.1.9) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.1.9) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.9) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.9) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.9) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.9) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.9) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.9) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.1.0) lib/quiet_assets.rb:27:in `call_with_quiet_assets'
  actionpack (4.1.9) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.9) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.9) lib/action_dispatch/middleware/static.rb:84:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.1.9) lib/rails/engine.rb:514:in `call'
  railties (4.1.9) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/johntibbetts/.rbenv/versions/2.1.4/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/johntibbetts/.rbenv/versions/2.1.4/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/johntibbetts/.rbenv/versions/2.1.4/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/lti2_tp/__better_errors/4ec477e00aae0304/variables" for 127.0.0.1 at 2015-04-23 14:17:05 -0700


Started POST "/lti2_tp/reregistrations" for 127.0.0.1 at 2015-04-23 14:17:21 -0700
Processing by Lti2Tp::RegistrationsController#reregister as HTML
  Parameters: {"tc_profile_url"=>"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/74c340c0-cb7b-0132-536b-20c9d07c6451", "launch_presentation_return_url"=>"http://rails.kinexis.com:4000/admin/tool_actions", "lti_message_type"=>"ToolProxyReregistrationRequest", "oauth_consumer_key"=>"74c33940-cb7b-0132-536b-20c9d07c6451", "oauth_nonce"=>"1255704047888", "oauth_signature_method"=>"HMAC-SHA1", "oauth_timestamp"=>"1429823825", "oauth_version"=>"1.0", "oauth_callback"=>"about:blank", "oauth_signature"=>"LI0JIzG+4QOb8B6N3JCYcdUDlS8="}
Can't verify CSRF token authenticity
AuthHdr_Parms: {}
  [1m[35mTenant Load (0.3ms)[0m  SELECT  `tenants`.* FROM `tenants`  WHERE `tenants`.`tenant_key` = '74c33940-cb7b-0132-536b-20c9d07c6451'  ORDER BY `tenants`.`id` ASC LIMIT 1
  [1m[36mLti2Tp::Registration Load (0.4ms)[0m  [1mSELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`tenant_id` = 115  ORDER BY `lti2_tp_registrations`.`id` ASC LIMIT 1[0m
AuthHdr_Parms: {}
in verify_signature
Duplicate nonce to one already received
Redirected to http://rails.kinexis.com:4000/admin/tool_actions?status=failure&lti_errormsg=Invalid+signature&lti_errorlog=Invalid+signature
Completed 302 Found in 8ms (ActiveRecord: 0.8ms)


Started POST "/lti2_tp/reregistrations" for 127.0.0.1 at 2015-04-23 14:17:41 -0700
Processing by Lti2Tp::RegistrationsController#reregister as HTML
  Parameters: {"tc_profile_url"=>"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/74c340c0-cb7b-0132-536b-20c9d07c6451", "launch_presentation_return_url"=>"http://rails.kinexis.com:4000/admin/tool_actions", "lti_message_type"=>"ToolProxyReregistrationRequest", "oauth_consumer_key"=>"74c33940-cb7b-0132-536b-20c9d07c6451", "oauth_nonce"=>"8109904240661", "oauth_signature_method"=>"HMAC-SHA1", "oauth_timestamp"=>"1429823861", "oauth_version"=>"1.0", "oauth_callback"=>"about:blank", "oauth_signature"=>"IlVjbKwIAEH/PNt6MIZU7TER1+o="}
Can't verify CSRF token authenticity
AuthHdr_Parms: {}
  [1m[35mTenant Load (0.3ms)[0m  SELECT  `tenants`.* FROM `tenants`  WHERE `tenants`.`tenant_key` = '74c33940-cb7b-0132-536b-20c9d07c6451'  ORDER BY `tenants`.`id` ASC LIMIT 1
  [1m[36mLti2Tp::Registration Load (0.5ms)[0m  [1mSELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`tenant_id` = 115  ORDER BY `lti2_tp_registrations`.`id` ASC LIMIT 1[0m
AuthHdr_Parms: {}
in verify_signature
  [1m[35mLti2Tp::Registration Load (0.4ms)[0m  SELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`tenant_name` = 'Elan University513'  ORDER BY `lti2_tp_registrations`.`id` ASC LIMIT 1
  [1m[36mTenant Load (0.5ms)[0m  [1mSELECT  `tenants`.* FROM `tenants`  WHERE `tenants`.`id` = 115 LIMIT 1[0m
  [1m[35mLti2Tp::Tool Load (0.6ms)[0m  SELECT  `lti2_tp_tools`.* FROM `lti2_tp_tools`  WHERE `lti2_tp_tools`.`id` = 2 LIMIT 1
Completed 500 Internal Server Error in 36ms

TypeError - no implicit conversion of nil into String:
  /Users/johntibbetts/git/LTI2/lib/lti2_commons/lib/lti2_commons/json_wrapper.rb:114:in `block in substitute_template_values_from_hash'
  /Users/johntibbetts/git/LTI2/lib/lti2_commons/lib/lti2_commons/json_wrapper.rb:113:in `substitute_template_values_from_hash'
  /Users/johntibbetts/git/LTI2/lib/lti2_commons/lib/lti2_commons/json_wrapper.rb:91:in `block in substitute_text_in_all_nodes'
  /Users/johntibbetts/git/LTI2/lib/lti2_commons/lib/lti2_commons/json_wrapper.rb:26:in `block in each_leaf'
  /Users/johntibbetts/git/LTI2/lib/lti2_commons/lib/lti2_commons/json_wrapper.rb:25:in `each_leaf'
  /Users/johntibbetts/git/LTI2/lib/lti2_commons/lib/lti2_commons/json_wrapper.rb:90:in `substitute_text_in_all_nodes'
  /Users/johntibbetts/git/LTI2/lti2_tp/app/models/lti2_tp/tool.rb:7:in `get_tool_profile'
  /Users/johntibbetts/git/LTI2/lti2_tp/app/controllers/lti2_tp/registrations_controller.rb:131:in `reregister'
  actionpack (4.1.9) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.1.9) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.1.9) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.1.9) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.1.9) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.9) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.9) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.9) lib/active_support/callbacks.rb:86:in `run_callbacks'
  actionpack (4.1.9) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.1.9) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.1.9) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.1.9) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.9) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.9) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.1.9) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.1.9) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.1.9) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.1.9) lib/abstract_controller/base.rb:136:in `process'
  actionview (4.1.9) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.1.9) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.1.9) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.1.9) lib/action_controller/metal.rb:232:in `block in action'
  actionpack (4.1.9) lib/action_dispatch/routing/route_set.rb:82:in `dispatch'
  actionpack (4.1.9) lib/action_dispatch/routing/route_set.rb:50:in `call'
  actionpack (4.1.9) lib/action_dispatch/journey/router.rb:73:in `block in call'
  actionpack (4.1.9) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.9) lib/action_dispatch/routing/route_set.rb:685:in `call'
  railties (4.1.9) lib/rails/engine.rb:514:in `call'
  railties (4.1.9) lib/rails/railtie.rb:194:in `method_missing'
  actionpack (4.1.9) lib/action_dispatch/journey/router.rb:73:in `block in call'
  actionpack (4.1.9) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.9) lib/action_dispatch/routing/route_set.rb:685:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:35:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.1.9) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.1.9) lib/action_dispatch/middleware/flash.rb:254:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.1.9) lib/action_dispatch/middleware/cookies.rb:562:in `call'
  activerecord (4.1.9) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.1.9) lib/active_record/connection_adapters/abstract/connection_pool.rb:621:in `call'
  activerecord (4.1.9) lib/active_record/migration.rb:380:in `call'
  actionpack (4.1.9) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.1.9) lib/active_support/callbacks.rb:82:in `run_callbacks'
  actionpack (4.1.9) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.1.9) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.1.9) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (4.1.9) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.1.9) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.9) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.9) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.9) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.9) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.9) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.9) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.1.0) lib/quiet_assets.rb:27:in `call_with_quiet_assets'
  actionpack (4.1.9) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.9) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.9) lib/action_dispatch/middleware/static.rb:84:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.1.9) lib/rails/engine.rb:514:in `call'
  railties (4.1.9) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/johntibbetts/.rbenv/versions/2.1.4/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/johntibbetts/.rbenv/versions/2.1.4/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/johntibbetts/.rbenv/versions/2.1.4/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/lti2_tp/__better_errors/15f0945fd5b04b49/variables" for 127.0.0.1 at 2015-04-23 14:17:41 -0700


Started POST "/lti2_tp/reregistrations" for 127.0.0.1 at 2015-04-23 14:17:44 -0700
Processing by Lti2Tp::RegistrationsController#reregister as HTML
  Parameters: {"tc_profile_url"=>"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/74c340c0-cb7b-0132-536b-20c9d07c6451", "launch_presentation_return_url"=>"http://rails.kinexis.com:4000/admin/tool_actions", "lti_message_type"=>"ToolProxyReregistrationRequest", "oauth_consumer_key"=>"74c33940-cb7b-0132-536b-20c9d07c6451", "oauth_nonce"=>"8109904240661", "oauth_signature_method"=>"HMAC-SHA1", "oauth_timestamp"=>"1429823861", "oauth_version"=>"1.0", "oauth_callback"=>"about:blank", "oauth_signature"=>"IlVjbKwIAEH/PNt6MIZU7TER1+o="}
Can't verify CSRF token authenticity
AuthHdr_Parms: {}
  [1m[36mTenant Load (0.3ms)[0m  [1mSELECT  `tenants`.* FROM `tenants`  WHERE `tenants`.`tenant_key` = '74c33940-cb7b-0132-536b-20c9d07c6451'  ORDER BY `tenants`.`id` ASC LIMIT 1[0m
  [1m[35mLti2Tp::Registration Load (0.4ms)[0m  SELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`tenant_id` = 115  ORDER BY `lti2_tp_registrations`.`id` ASC LIMIT 1
AuthHdr_Parms: {}
in verify_signature
Duplicate nonce to one already received
Redirected to http://rails.kinexis.com:4000/admin/tool_actions?status=failure&lti_errormsg=Invalid+signature&lti_errorlog=Invalid+signature
Completed 302 Found in 8ms (ActiveRecord: 0.7ms)


Started POST "/lti2_tp/reregistrations" for 127.0.0.1 at 2015-04-23 14:17:45 -0700
Processing by Lti2Tp::RegistrationsController#reregister as HTML
  Parameters: {"tc_profile_url"=>"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/74c340c0-cb7b-0132-536b-20c9d07c6451", "launch_presentation_return_url"=>"http://rails.kinexis.com:4000/admin/tool_actions", "lti_message_type"=>"ToolProxyReregistrationRequest", "oauth_consumer_key"=>"74c33940-cb7b-0132-536b-20c9d07c6451", "oauth_nonce"=>"8109904240661", "oauth_signature_method"=>"HMAC-SHA1", "oauth_timestamp"=>"1429823861", "oauth_version"=>"1.0", "oauth_callback"=>"about:blank", "oauth_signature"=>"IlVjbKwIAEH/PNt6MIZU7TER1+o="}
Can't verify CSRF token authenticity
AuthHdr_Parms: {}
  [1m[36mTenant Load (0.3ms)[0m  [1mSELECT  `tenants`.* FROM `tenants`  WHERE `tenants`.`tenant_key` = '74c33940-cb7b-0132-536b-20c9d07c6451'  ORDER BY `tenants`.`id` ASC LIMIT 1[0m
  [1m[35mLti2Tp::Registration Load (0.4ms)[0m  SELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`tenant_id` = 115  ORDER BY `lti2_tp_registrations`.`id` ASC LIMIT 1
AuthHdr_Parms: {}
in verify_signature
Duplicate nonce to one already received
Redirected to http://rails.kinexis.com:4000/admin/tool_actions?status=failure&lti_errormsg=Invalid+signature&lti_errorlog=Invalid+signature
Completed 302 Found in 8ms (ActiveRecord: 0.7ms)
  [1m[36mLti2Tp::Registry Load (0.3ms)[0m  [1mSELECT `lti2_tp_registries`.* FROM `lti2_tp_registries`[0m


Started POST "/lti2_tp/reregistrations" for 127.0.0.1 at 2015-04-23 16:50:32 -0700
  [1m[35mActiveRecord::SchemaMigration Load (0.4ms)[0m  SELECT `schema_migrations`.* FROM `schema_migrations`
Processing by Lti2Tp::RegistrationsController#reregister as HTML
  Parameters: {"tc_profile_url"=>"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/74c340c0-cb7b-0132-536b-20c9d07c6451", "launch_presentation_return_url"=>"http://rails.kinexis.com:4000/admin/tool_actions", "lti_message_type"=>"ToolProxyReregistrationRequest", "oauth_consumer_key"=>"74c33940-cb7b-0132-536b-20c9d07c6451", "oauth_nonce"=>"9978203583469", "oauth_signature_method"=>"HMAC-SHA1", "oauth_timestamp"=>"1429833032", "oauth_version"=>"1.0", "oauth_callback"=>"about:blank", "oauth_signature"=>"9i8ko79BPpkrbx7825Mni6GoBLE="}
Can't verify CSRF token authenticity
AuthHdr_Parms: {}
  [1m[36mTenant Load (0.3ms)[0m  [1mSELECT  `tenants`.* FROM `tenants`  WHERE `tenants`.`tenant_key` = '74c33940-cb7b-0132-536b-20c9d07c6451'  ORDER BY `tenants`.`id` ASC LIMIT 1[0m
  [1m[35mLti2Tp::Registration Load (0.4ms)[0m  SELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`tenant_id` = 115  ORDER BY `lti2_tp_registrations`.`id` ASC LIMIT 1
AuthHdr_Parms: {}
in verify_signature
  [1m[36mLti2Tp::Registration Load (0.4ms)[0m  [1mSELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`tenant_name` = 'Elan University513'  ORDER BY `lti2_tp_registrations`.`id` ASC LIMIT 1[0m
  [1m[35mTenant Load (0.3ms)[0m  SELECT  `tenants`.* FROM `tenants`  WHERE `tenants`.`id` = 115 LIMIT 1
  [1m[36mLti2Tp::Tool Load (0.4ms)[0m  [1mSELECT  `lti2_tp_tools`.* FROM `lti2_tp_tools`  WHERE `lti2_tp_tools`.`id` = 2 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mUPDATE `lti2_tp_registrations` SET `message_type` = 'reregistration', `reg_password` = 'a43b527a38f9ea486ea442dabf83a514', `status` = 'received', `updated_at` = '2015-04-23 23:50:33' WHERE `lti2_tp_registrations`.`id` = 119[0m
  [1m[35m (12.5ms)[0m  COMMIT
Redirected to http://rails.kinexis.com:5000/lti_registration_wips?registration_id=119&return_url=/lti2_tp/registrations
Completed 302 Found in 196ms (ActiveRecord: 55.6ms)


Started GET "/lti_registration_wips?registration_id=119&return_url=/lti2_tp/registrations" for 127.0.0.1 at 2015-04-23 16:50:33 -0700
Processing by LtiRegistrationWipsController#index as HTML
  Parameters: {"registration_id"=>"119", "return_url"=>"/lti2_tp/registrations"}
  [1m[36mLti2Tp::Registration Load (0.3ms)[0m  [1mSELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 119 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `lti_registration_wips` (`created_at`, `product_name`, `registration_id`, `registration_return_url`, `support_email`, `tenant_name`, `updated_at`) VALUES ('2015-04-23 23:50:33', 'Elan/LuMoS', 119, '/lti2_tp/registrations', 'john.tibbetts@kinexis.com', 'Elan University513', '2015-04-23 23:50:33')[0m
  [1m[35m (0.3ms)[0m  COMMIT
  Rendered lti_registration_wips/_form.html.haml (147.2ms)
  Rendered lti_registration_wips/index.html.haml within layouts/application (159.4ms)
Completed 200 OK in 2188ms (Views: 2150.7ms | ActiveRecord: 19.7ms)


Started PATCH "/lti_registration_wips/202" for 127.0.0.1 at 2015-04-23 16:50:37 -0700
Processing by LtiRegistrationWipsController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"IQFZGw6wnlWi/3CBlIM3+AF7VnawHoFXbIG63BJKK5Q=", "lti_registration_wip"=>{"support_email"=>"john.tibbetts@kinexis.com", "product_name"=>"Elan/LuMoS", "tenant_name"=>"Elan University513"}, "commit"=>"Update Lti registration wip", "id"=>"202"}
  [1m[36mLtiRegistrationWip Load (0.3ms)[0m  [1mSELECT  `lti_registration_wips`.* FROM `lti_registration_wips`  WHERE `lti_registration_wips`.`id` = 202 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35mLti2Tp::Registration Load (0.2ms)[0m  SELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 119 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  `lti_registration_wips`.* FROM `lti_registration_wips`  WHERE `lti_registration_wips`.`id` = 202 LIMIT 1[0m  [["id", "202"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 119 LIMIT 1  [["id", 119]]
  [1m[36mTenant Load (0.3ms)[0m  [1mSELECT  `tenants`.* FROM `tenants`  WHERE `tenants`.`tenant_name` = 'Elan University513'  ORDER BY `tenants`.`id` ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (13.4ms)[0m  [1mUPDATE `lti2_tp_registrations` SET `end_registration_id` = '771f6700-cc41-0132-536f-20c9d07c6451', `proposed_tool_proxy_json` = '{\"@context\":[\"http://purl.imsglobal.org/ctx/lti/v2/ToolConsumerProfile\",{\"ltitcp\":\"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/74c340c0-cb7b-0132-536b-20c9d07c6451#\"}],\"@type\":\"ToolProxy\",\"@id\":\"ToolProxyProposal_at_2015-04-23T23:50:37Z\",\"lti_version\":\"LTI-2p0\",\"tool_proxy_guid\":\"74c33940-cb7b-0132-536b-20c9d07c6451\",\"tool_consumer_profile\":\"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/74c340c0-cb7b-0132-536b-20c9d07c6451\",\"tool_profile\":{\"base_url_choice\":[{\"default_base_url\":\"http://rails.kinexis.com:5000\",\"selector\":{\"applies_to\":[\"IconEndpoint\",\"MessageHandler\"]}}],\"lti_version\":\"LTI-2p0\",\"message\":[{\"message_type\":[\"ToolProxyRegistrationRequest\",\"ToolProxyReregistrationRequest\"],\"parameter\":[{\"name\":\"tc_profile_url\",\"variable\":\"ToolConsumerProfile.url\"}],\"path\":\"http://rails.kinexis.com:5000/lti2_tp/reregistrations\"}],\"product_instance\":{\"guid\":\"fd75124a-140e-470f-944c-114d2d92bb40\",\"product_info\":{\"description\":{\"default_value\":\"Fabericious reflowable ePub3 Textbook\",\"key\":\"tool.description\"},\"product_family\":{\"code\":\"assessment-tool\",\"vendor\":{\"code\":\"fabericious.org\",\"contact\":{\"email\":\"info@fabericious.com\"},\"description\":{\"default_value\":\"Fabericious is a leading provider of interactive tools for education\",\"key\":\"tool.vendor.description\"},\"vendor_name\":{\"default_value\":\"Fab\",\"key\":\"tool.vendor.name\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\",\"website\":\"{http://rails.kinexis.com:5000}\"}},\"product_name\":{\"default_value\":\"LTI2 BookTools\",\"key\":\"tool.name\"},\"product_version\":\"10.3\",\"technical_description\":{\"default_value\":\"Support provided for all LTI 1 extensions as well as LTI 2\",\"key\":\"tool.technical\"}},\"service_provider\":{\"description\":{\"default_value\":\"Provider of high performance managed hosting environments\",\"key\":\"service_provider.description\"},\"guid\":\"18e7ea50-3d6d-4f6b-aff2-ed3ab577716c\",\"service_provider_name\":{\"default_value\":\"Amazon Cloud\",\"key\":\"service_provider.name\"},\"support\":{\"email\":\"support@ec2.fabericious.com\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\"},\"support\":{\"email\":\"helpdesk@fabericious.com\"}},\"resource_handler\":[{\"description\":{\"default_value\":\"Settings service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"tool_proxy_custom_url\",\"variable\":\"ToolProxy.custom.url\"},{\"name\":\"tool_proxy_binding_custom_url\",\"variable\":\"ToolProxyBinding.custom.url\"},{\"name\":\"lti_link_custom_url\",\"variable\":\"LtiLink.custom.url\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"ToolProxy.custom.url\",\"ToolProxyBinding.custom.url\",\"LtiLink.custom.url\"],\"path\":\"/settings\"}],\"resource_name\":{\"default_value\":\"Settings\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"setting\"}},{\"description\":{\"default_value\":\"Echo service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"fixed\":\"Narcissus\",\"name\":\"referrer\"},{\"fixed\":\"3.14159\",\"name\":\"pi\"},{\"name\":\"user_primary_email\",\"variable\":\"Person.email.primary\"},{\"name\":\"discipline\",\"variable\":\"CourseOffering.label\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\"],\"path\":\"/echoes\"}],\"resource_name\":{\"default_value\":\"Echo\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"echo\"}},{\"description\":{\"default_value\":\"Interactive resource\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"vbid\"},{\"name\":\"result_uri\",\"variable\":\"Result.uri\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"Result.autocreate\"],\"path\":\"/iresources\"}],\"resource_name\":{\"default_value\":\"InteractiveResource\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"iresource\"}}],\"service_offered\":[{\"@id\":\"http://rails.kinexis.com:5000/lti2_tp/ToolProxy.collection\",\"@type\":\"RestService\",\"action\":[\"PUT\"],\"endpoint\":\"http://rails.kinexis.com:5000/lti2_tp/tool_proxies\",\"format\":[\"\"]}]},\"security_contract\":{\"shared_secret\":\"0bb4f1c1f0d69b123a84158c4a9cffb2\",\"tool_service\":[{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxy.collection\",\"action\":[\"POST\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxy.item\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:Result.item\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:LtiLinkSettings\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxyBindingSettings\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxySettings\",\"action\":[\"GET\",\"PUT\"]}]}}', `updated_at` = '2015-04-23 23:50:37' WHERE `lti2_tp_registrations`.`id` = 119[0m
  [1m[35m (9.4ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE `lti2_tp_registrations` SET `status` = 'reregistered', `updated_at` = '2015-04-23 23:50:37' WHERE `lti2_tp_registrations`.`id` = 119
  [1m[36m (11.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mTenant Exists (5.9ms)[0m  [1mSELECT  1 AS one FROM `tenants`  WHERE (`tenants`.`tenant_name` = BINARY 'Elan University513' AND `tenants`.`id` != 115) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  COMMIT
Redirected to http://rails.kinexis.com:5000/lti2_tp/registrations?status=success&&id=119
Completed 302 Found in 116ms (ActiveRecord: 41.8ms)


Started GET "/lti2_tp/registrations?status=success&&id=119" for 127.0.0.1 at 2015-04-23 16:50:38 -0700
Processing by Lti2Tp::RegistrationsController#index as HTML
  Parameters: {"status"=>"success", "id"=>"119"}
  [1m[36mLti2Tp::Registration Load (0.4ms)[0m  [1mSELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 119 LIMIT 1[0m
Redirected to http://rails.kinexis.com:4000/admin/tool_actions?status=success
Completed 302 Found in 2ms (ActiveRecord: 0.4ms)


Started PUT "/lti2_tp/tool_proxies/74c33940-cb7b-0132-536b-20c9d07c6451?correlation=771f6700-cc41-0132-536f-20c9d07c6451" for 127.0.0.1 at 2015-04-23 16:50:51 -0700
Processing by Lti2Tp::RegistrationsController#complete_reregistration as HTML
  Parameters: {"correlation"=>"771f6700-cc41-0132-536f-20c9d07c6451", "id"=>"74c33940-cb7b-0132-536b-20c9d07c6451"}
Can't verify CSRF token authenticity
AuthHdr_Parms: {:oauth_consumer_key=>"74c33940-cb7b-0132-536b-20c9d07c6451", :oauth_nonce=>"7527558875310", :oauth_signature_method=>"HMAC-SHA1", :oauth_timestamp=>"1429833051", :oauth_version=>"1.0", :oauth_callback=>"about:blank", :oauth_signature=>"pNTu6E2eEl7pKizxF2XxFZlyZ/M="}
  [1m[35mTenant Load (0.3ms)[0m  SELECT  `tenants`.* FROM `tenants`  WHERE `tenants`.`tenant_key` = '74c33940-cb7b-0132-536b-20c9d07c6451'  ORDER BY `tenants`.`id` ASC LIMIT 1
  [1m[36mLti2Tp::Registration Load (0.2ms)[0m  [1mSELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`tenant_id` = 115  ORDER BY `lti2_tp_registrations`.`id` ASC LIMIT 1[0m
AuthHdr_Parms: {:oauth_consumer_key=>"74c33940-cb7b-0132-536b-20c9d07c6451", :oauth_nonce=>"7527558875310", :oauth_signature_method=>"HMAC-SHA1", :oauth_timestamp=>"1429833051", :oauth_version=>"1.0", :oauth_callback=>"about:blank", :oauth_signature=>"pNTu6E2eEl7pKizxF2XxFZlyZ/M="}
in verify_signature
  [1m[35mLti2Tp::Registration Load (0.3ms)[0m  SELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`tenant_name` = 'Elan University513'  ORDER BY `lti2_tp_registrations`.`id` ASC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`tenant_id` = 115  ORDER BY `lti2_tp_registrations`.`id` ASC LIMIT 1[0m
  [1m[35mTenant Load (0.3ms)[0m  SELECT  `tenants`.* FROM `tenants`  WHERE `tenants`.`id` = 115 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mTenant Exists (0.4ms)[0m  SELECT  1 AS one FROM `tenants`  WHERE (`tenants`.`tenant_name` = BINARY 'Elan University513' AND `tenants`.`id` != 115) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE `tenants` SET `secret` = '0bb4f1c1f0d69b123a84158c4a9cffb2', `updated_at` = '2015-04-23 23:50:51' WHERE `tenants`.`id` = 115[0m
  [1m[35m (10.7ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  UPDATE `lti2_tp_registrations` SET `end_registration_id` = NULL, `proposed_tool_proxy_json` = NULL, `reg_password` = '0bb4f1c1f0d69b123a84158c4a9cffb2', `tool_proxy_json` = '{\"@context\":[\"http://purl.imsglobal.org/ctx/lti/v2/ToolConsumerProfile\",{\"ltitcp\":\"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/74c340c0-cb7b-0132-536b-20c9d07c6451#\"}],\"@type\":\"ToolProxy\",\"@id\":\"ToolProxyProposal_at_2015-04-23T23:50:37Z\",\"lti_version\":\"LTI-2p0\",\"tool_proxy_guid\":\"74c33940-cb7b-0132-536b-20c9d07c6451\",\"tool_consumer_profile\":\"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/74c340c0-cb7b-0132-536b-20c9d07c6451\",\"tool_profile\":{\"base_url_choice\":[{\"default_base_url\":\"http://rails.kinexis.com:5000\",\"selector\":{\"applies_to\":[\"IconEndpoint\",\"MessageHandler\"]}}],\"lti_version\":\"LTI-2p0\",\"message\":[{\"message_type\":[\"ToolProxyRegistrationRequest\",\"ToolProxyReregistrationRequest\"],\"parameter\":[{\"name\":\"tc_profile_url\",\"variable\":\"ToolConsumerProfile.url\"}],\"path\":\"http://rails.kinexis.com:5000/lti2_tp/reregistrations\"}],\"product_instance\":{\"guid\":\"fd75124a-140e-470f-944c-114d2d92bb40\",\"product_info\":{\"description\":{\"default_value\":\"Fabericious reflowable ePub3 Textbook\",\"key\":\"tool.description\"},\"product_family\":{\"code\":\"assessment-tool\",\"vendor\":{\"code\":\"fabericious.org\",\"contact\":{\"email\":\"info@fabericious.com\"},\"description\":{\"default_value\":\"Fabericious is a leading provider of interactive tools for education\",\"key\":\"tool.vendor.description\"},\"vendor_name\":{\"default_value\":\"Fab\",\"key\":\"tool.vendor.name\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\",\"website\":\"{http://rails.kinexis.com:5000}\"}},\"product_name\":{\"default_value\":\"LTI2 BookTools\",\"key\":\"tool.name\"},\"product_version\":\"10.3\",\"technical_description\":{\"default_value\":\"Support provided for all LTI 1 extensions as well as LTI 2\",\"key\":\"tool.technical\"}},\"service_provider\":{\"description\":{\"default_value\":\"Provider of high performance managed hosting environments\",\"key\":\"service_provider.description\"},\"guid\":\"18e7ea50-3d6d-4f6b-aff2-ed3ab577716c\",\"service_provider_name\":{\"default_value\":\"Amazon Cloud\",\"key\":\"service_provider.name\"},\"support\":{\"email\":\"support@ec2.fabericious.com\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\"},\"support\":{\"email\":\"helpdesk@fabericious.com\"}},\"resource_handler\":[{\"description\":{\"default_value\":\"Settings service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"tool_proxy_custom_url\",\"variable\":\"ToolProxy.custom.url\"},{\"name\":\"tool_proxy_binding_custom_url\",\"variable\":\"ToolProxyBinding.custom.url\"},{\"name\":\"lti_link_custom_url\",\"variable\":\"LtiLink.custom.url\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"ToolProxy.custom.url\",\"ToolProxyBinding.custom.url\",\"LtiLink.custom.url\"],\"path\":\"/settings\"}],\"resource_name\":{\"default_value\":\"Settings\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"setting\"}},{\"description\":{\"default_value\":\"Echo service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"fixed\":\"Narcissus\",\"name\":\"referrer\"},{\"fixed\":\"3.14159\",\"name\":\"pi\"},{\"name\":\"user_primary_email\",\"variable\":\"Person.email.primary\"},{\"name\":\"discipline\",\"variable\":\"CourseOffering.label\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\"],\"path\":\"/echoes\"}],\"resource_name\":{\"default_value\":\"Echo\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"echo\"}},{\"description\":{\"default_value\":\"Interactive resource\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"vbid\"},{\"name\":\"result_uri\",\"variable\":\"Result.uri\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"Result.autocreate\"],\"path\":\"/iresources\"}],\"resource_name\":{\"default_value\":\"InteractiveResource\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"iresource\"}}],\"service_offered\":[{\"@id\":\"http://rails.kinexis.com:5000/lti2_tp/ToolProxy.collection\",\"@type\":\"RestService\",\"action\":[\"PUT\"],\"endpoint\":\"http://rails.kinexis.com:5000/lti2_tp/tool_proxies\",\"format\":[\"\"]}]},\"security_contract\":{\"shared_secret\":\"0bb4f1c1f0d69b123a84158c4a9cffb2\",\"tool_service\":[{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxy.collection\",\"action\":[\"POST\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxy.item\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:Result.item\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:LtiLinkSettings\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxyBindingSettings\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxySettings\",\"action\":[\"GET\",\"PUT\"]}]}}', `updated_at` = '2015-04-23 23:50:51' WHERE `lti2_tp_registrations`.`id` = 119
  [1m[36m (0.6ms)[0m  [1mCOMMIT[0m
"reregistration complete for 74c33940-cb7b-0132-536b-20c9d07c6451"
  Rendered text template (0.0ms)
Completed 200 OK in 54ms (Views: 2.4ms | ActiveRecord: 13.8ms)


Started POST "/echoes" for 127.0.0.1 at 2015-04-23 16:51:01 -0700
Processing by EchoesController#create as HTML
  Parameters: {"lti_version"=>"LTI-2p0", "lti_message_type"=>"basic-lti-launch-request", "resource_link_id"=>"2401", "user_id"=>"2", "roles"=>"Instructor", "launch_presentation_return_url"=>"http://rails.kinexis.com:4000/admin/course_page?method=show&course_id=2", "launch_presentation_document_target"=>"window", "context_id"=>"2", "launch_presentation_locale"=>"en_US", "context_label"=>"SMPL101A", "context_title"=>"Nursing Compendium", "lis_course_section_sourcedid"=>"2", "tool_consumer_info_product_family_code"=>"LuMoS", "tool_consumer_info_version"=>"3.1", "custom_referrer"=>"Narcissus", "custom_pi"=>"3.14159", "custom_user_primary_email"=>"admin@lumos.org", "custom_discipline"=>"SMPL101A", "custom_c"=>"1", "oauth_consumer_key"=>"74c33940-cb7b-0132-536b-20c9d07c6451", "oauth_nonce"=>"2950307071872", "oauth_signature_method"=>"HMAC-SHA1", "oauth_timestamp"=>"1429833061", "oauth_version"=>"1.0", "oauth_callback"=>"about:blank", "oauth_signature"=>"AkrVWgLBLDo9YlA7XyTNHS6AcOI="}
Can't verify CSRF token authenticity
AuthHdr_Parms: {}
  [1m[35mTenant Load (0.3ms)[0m  SELECT  `tenants`.* FROM `tenants`  WHERE `tenants`.`tenant_key` = '74c33940-cb7b-0132-536b-20c9d07c6451'  ORDER BY `tenants`.`id` ASC LIMIT 1
  [1m[36mLti2Tp::Registration Load (0.3ms)[0m  [1mSELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`tenant_id` = 115  ORDER BY `lti2_tp_registrations`.`id` ASC LIMIT 1[0m
AuthHdr_Parms: {}
in verify_signature
  Rendered inline template (0.3ms)
Completed 200 OK in 6ms (Views: 0.8ms | ActiveRecord: 0.7ms)
  [1m[36mLti2Tp::Registry Load (0.3ms)[0m  [1mSELECT `lti2_tp_registries`.* FROM `lti2_tp_registries`[0m


Started POST "/lti2_tp/reregistrations" for 127.0.0.1 at 2015-04-24 11:49:50 -0700
  [1m[35mActiveRecord::SchemaMigration Load (0.3ms)[0m  SELECT `schema_migrations`.* FROM `schema_migrations`
Processing by Lti2Tp::RegistrationsController#reregister as HTML
  Parameters: {"tc_profile_url"=>"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/13efb090-ccde-0132-5374-20c9d07c6451", "launch_presentation_return_url"=>"http://rails.kinexis.com:4000/admin/tool_actions", "lti_message_type"=>"ToolProxyReregistrationRequest", "oauth_consumer_key"=>"13efae70-ccde-0132-5374-20c9d07c6451", "oauth_nonce"=>"8673099862550", "oauth_signature_method"=>"HMAC-SHA1", "oauth_timestamp"=>"1429901390", "oauth_version"=>"1.0", "oauth_callback"=>"about:blank", "oauth_signature"=>"2voEMAQwVGniv9DB1qG4gNiKXQQ="}
Can't verify CSRF token authenticity
AuthHdr_Parms: {}
  [1m[36mTenant Load (0.3ms)[0m  [1mSELECT  `tenants`.* FROM `tenants`  WHERE `tenants`.`tenant_key` = '13efae70-ccde-0132-5374-20c9d07c6451'  ORDER BY `tenants`.`id` ASC LIMIT 1[0m
  [1m[35mLti2Tp::Registration Load (0.3ms)[0m  SELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`tenant_id` = 117  ORDER BY `lti2_tp_registrations`.`id` ASC LIMIT 1
AuthHdr_Parms: {}
in verify_signature
  [1m[36mLti2Tp::Registration Load (0.4ms)[0m  [1mSELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`tenant_name` = 'Elan University1131'  ORDER BY `lti2_tp_registrations`.`id` ASC LIMIT 1[0m
  [1m[35mTenant Load (0.3ms)[0m  SELECT  `tenants`.* FROM `tenants`  WHERE `tenants`.`id` = 117 LIMIT 1
  [1m[36mLti2Tp::Tool Load (0.3ms)[0m  [1mSELECT  `lti2_tp_tools`.* FROM `lti2_tp_tools`  WHERE `lti2_tp_tools`.`id` = 2 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE `lti2_tp_registrations` SET `status` = 'received', `tool_consumer_profile_json` = '{\"@context\":[\"http://purl.imsglobal.org/ctx/lti/v2/ToolConsumerProfile\",{\"ltitcp\":\"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/13efb090-ccde-0132-5374-20c9d07c6451#\"}],\"@type\":\"ToolConsumerProfile\",\"@id\":\"http://rails.kinexis.com:4000/tool_consumer_profiles/13efb090-ccde-0132-5374-20c9d07c6451\",\"lti_version\":\"LTI-2p0\",\"guid\":\"13efb090-ccde-0132-5374-20c9d07c6451\",\"product_instance\":{\"guid\":\"dcddf9808107-81ea-eaa4-1edf-5d24568c\",\"product_info\":{\"product_name\":{\"default_value\":\"Elan/LuMoS\",\"key\":\"product.name\"},\"product_version\":\"3.1\",\"description\":{\"default_value\":\"Elan University/LuMoS Learning Platform\",\"key\":\"product.version\"},\"technical_description\":{\"default_value\":\"LTI 1, 1.1 and 2.0 compliant\",\"key\":\"product.technicalDescription\"},\"product_family\":{\"code\":\"LuMoS\",\"vendor\":{\"code\":\"lms.LuMoS.org\",\"vendor_name\":{\"default_value\":\"LuMoS Corporation\",\"key\":\"product.vendor.name\"},\"description\":{\"default_value\":\"LuMoS Corporation is a fictitious vendor of a Learning Management System\",\"key\":\"product.vendor.description\"},\"website\":\"http://lms.LuMoS.org/products/omega\",\"timestamp\":\"2012-07-09T012:08:16-04:00\",\"contact\":{\"email\":\"support@lms.LuMoS.org\"}}}},\"support\":{\"email\":\"john.tibbetts@kinexis.com\"},\"service_owner\":{\"@id\":\"http://ec2.LuMoS.org/ServiceOwner\",\"timestamp\":\"2012-03-28T09:08:16-04:00\",\"service_owner_name\":{\"default_value\":\"Elan University\",\"key\":\"service_owner.name\"},\"description\":{\"default_value\":\"Elan University EC2 Cloud\",\"key\":\"service_owner.description\"},\"support\":{\"email\":\"techsupport@elan.edu\"}},\"service_provider\":{\"@id\":\"http://ec2.LuMoS.org/ServiceProvider\",\"guid\":\"ec2.LuMoS.org\",\"timestamp\":\"2012-07-09T012:08:16-04:00\",\"service_provider_name\":{\"default_value\":\"Elan University\",\"key\":\"service_provider.name\"},\"description\":{\"default_value\":\"Elan University EC2 Cloud\",\"key\":\"service_provider.description\"},\"support\":{\"email\":\"support@yasp.LuMoS.org\"}}},\"capability_offered\":[\"basic-lti-launch-request\",\"Result.autocreate\",\"Result.sourcedId\",\"User.id\",\"User.username\",\"CourseSection.sourcedId\",\"Person.sourcedId\",\"Person.email.primary\",\"Person.name.given\",\"Person.name.family\",\"Person.name.full\",\"Membership.role\",\"ToolProxy.custom.url\",\"ToolProxyBinding.custom.url\",\"LtiLink.custom.url\",\"ToolConsumerProfile.url\"],\"service_offered\":[{\"@type\":\"RestService\",\"@id\":\"ltitcp:ToolProxy.collection\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tools\",\"format\":[\"application/vnd.ims.lti.v2.toolproxy+json\"],\"action\":[\"POST\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:ToolProxy.item\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tools/{tool_proxy_guid}\",\"format\":[\"application/vnd.ims.lti.v2.toolproxy+json\"],\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:Result.item\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/resources/Result/{sourcedId}\",\"format\":[\"application/vnd.ims.lis.v2.result+json\"],\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:LtiLinkSettings\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tool_settings/{tool_proxy_guid}/ltilink/{link_id}\",\"format\":[\"application/vnd.ims.lti.v2.toolsettings+json\",\"application/vnd.ims.lti.v2.toolsettings.simple+json\"],\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:ToolProxyBindingSettings\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tool_settings/{tool_proxy_guid}/context/{context_id}\",\"format\":[\"application/vnd.ims.lti.v2.toolsettings+json\",\"application/vnd.ims.lti.v2.toolsettings.simple+json\"],\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:ToolProxySettings\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tool_settings/{tool_proxy_guid}\",\"format\":[\"application/vnd.ims.lti.v2.toolsettings+json\",\"application/vnd.ims.lti.v2.toolsettings.simple+json\"],\"action\":[\"GET\",\"PUT\"]}]}', `updated_at` = '2015-04-24 18:49:51' WHERE `lti2_tp_registrations`.`id` = 121[0m
  [1m[35m (0.6ms)[0m  COMMIT
Redirected to http://rails.kinexis.com:5000/lti_registration_wips?registration_id=121&return_url=/lti2_tp/registrations
Completed 302 Found in 167ms (ActiveRecord: 43.9ms)


Started GET "/lti_registration_wips?registration_id=121&return_url=/lti2_tp/registrations" for 127.0.0.1 at 2015-04-24 11:49:51 -0700
Processing by LtiRegistrationWipsController#index as HTML
  Parameters: {"registration_id"=>"121", "return_url"=>"/lti2_tp/registrations"}
  [1m[36mLti2Tp::Registration Load (1.0ms)[0m  [1mSELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 121 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `lti_registration_wips` (`created_at`, `product_name`, `registration_id`, `registration_return_url`, `support_email`, `tenant_name`, `updated_at`) VALUES ('2015-04-24 18:49:51', 'Elan/LuMoS', 121, '/lti2_tp/registrations', 'john.tibbetts@kinexis.com', 'Elan University1131', '2015-04-24 18:49:51')[0m
  [1m[35m (0.3ms)[0m  COMMIT
  Rendered lti_registration_wips/_form.html.haml (137.0ms)
  Rendered lti_registration_wips/index.html.haml within layouts/application (150.1ms)
Completed 200 OK in 325ms (Views: 290.2ms | ActiveRecord: 20.5ms)


Started PATCH "/lti_registration_wips/209" for 127.0.0.1 at 2015-04-24 11:49:53 -0700
Processing by LtiRegistrationWipsController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"IQFZGw6wnlWi/3CBlIM3+AF7VnawHoFXbIG63BJKK5Q=", "lti_registration_wip"=>{"support_email"=>"john.tibbetts@kinexis.com", "product_name"=>"Elan/LuMoS", "tenant_name"=>"Elan University1131"}, "commit"=>"Update Lti registration wip", "id"=>"209"}
  [1m[36mLtiRegistrationWip Load (0.3ms)[0m  [1mSELECT  `lti_registration_wips`.* FROM `lti_registration_wips`  WHERE `lti_registration_wips`.`id` = 209 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35mLti2Tp::Registration Load (0.4ms)[0m  SELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 121 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  `lti_registration_wips`.* FROM `lti_registration_wips`  WHERE `lti_registration_wips`.`id` = 209 LIMIT 1[0m  [["id", "209"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 121 LIMIT 1  [["id", 121]]
  [1m[36mTenant Load (0.3ms)[0m  [1mSELECT  `tenants`.* FROM `tenants`  WHERE `tenants`.`tenant_name` = 'Elan University1131'  ORDER BY `tenants`.`id` ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE `lti2_tp_registrations` SET `end_registration_id` = '9e1f4630-cce0-0132-5375-20c9d07c6451', `proposed_tool_proxy_json` = '{\"@context\":[\"http://purl.imsglobal.org/ctx/lti/v2/ToolConsumerProfile\",{\"ltitcp\":\"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/13efb090-ccde-0132-5374-20c9d07c6451#\"}],\"@type\":\"ToolProxy\",\"@id\":\"ToolProxyProposal_at_2015-04-24T18:49:53Z\",\"lti_version\":\"LTI-2p0\",\"tool_proxy_guid\":\"13efae70-ccde-0132-5374-20c9d07c6451\",\"tool_consumer_profile\":\"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/13efb090-ccde-0132-5374-20c9d07c6451\",\"tool_profile\":{\"base_url_choice\":[{\"default_base_url\":\"http://rails.kinexis.com:5000\",\"selector\":{\"applies_to\":[\"IconEndpoint\",\"MessageHandler\"]}}],\"lti_version\":\"LTI-2p0\",\"message\":[{\"message_type\":[\"ToolProxyRegistrationRequest\",\"ToolProxyReregistrationRequest\"],\"parameter\":[{\"name\":\"tc_profile_url\",\"variable\":\"ToolConsumerProfile.url\"}],\"path\":\"http://rails.kinexis.com:5000/lti2_tp/reregistrations\"}],\"product_instance\":{\"guid\":\"fd75124a-140e-470f-944c-114d2d92bb40\",\"product_info\":{\"description\":{\"default_value\":\"Fabericious reflowable ePub3 Textbook\",\"key\":\"tool.description\"},\"product_family\":{\"code\":\"assessment-tool\",\"vendor\":{\"code\":\"fabericious.org\",\"contact\":{\"email\":\"info@fabericious.com\"},\"description\":{\"default_value\":\"Fabericious is a leading provider of interactive tools for education\",\"key\":\"tool.vendor.description\"},\"vendor_name\":{\"default_value\":\"Fab\",\"key\":\"tool.vendor.name\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\",\"website\":\"{http://rails.kinexis.com:5000}\"}},\"product_name\":{\"default_value\":\"LTI2 BookTools\",\"key\":\"tool.name\"},\"product_version\":\"10.3\",\"technical_description\":{\"default_value\":\"Support provided for all LTI 1 extensions as well as LTI 2\",\"key\":\"tool.technical\"}},\"service_provider\":{\"description\":{\"default_value\":\"Provider of high performance managed hosting environments\",\"key\":\"service_provider.description\"},\"guid\":\"18e7ea50-3d6d-4f6b-aff2-ed3ab577716c\",\"service_provider_name\":{\"default_value\":\"Amazon Cloud\",\"key\":\"service_provider.name\"},\"support\":{\"email\":\"support@ec2.fabericious.com\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\"},\"support\":{\"email\":\"helpdesk@fabericious.com\"}},\"resource_handler\":[{\"description\":{\"default_value\":\"Settings service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"tool_proxy_custom_url\",\"variable\":\"ToolProxy.custom.url\"},{\"name\":\"tool_proxy_binding_custom_url\",\"variable\":\"ToolProxyBinding.custom.url\"},{\"name\":\"lti_link_custom_url\",\"variable\":\"LtiLink.custom.url\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"ToolProxy.custom.url\",\"ToolProxyBinding.custom.url\",\"LtiLink.custom.url\"],\"path\":\"/settings\"}],\"resource_name\":{\"default_value\":\"Settings\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"setting\"}},{\"description\":{\"default_value\":\"Echo service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"fixed\":\"Narcissus\",\"name\":\"referrer\"},{\"fixed\":\"3.14159\",\"name\":\"pi\"},{\"name\":\"user_primary_email\",\"variable\":\"Person.email.primary\"},{\"name\":\"discipline\",\"variable\":\"CourseOffering.label\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\"],\"path\":\"/echoes\"}],\"resource_name\":{\"default_value\":\"Echo\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"echo\"}},{\"description\":{\"default_value\":\"Interactive resource\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"vbid\"},{\"name\":\"result_uri\",\"variable\":\"Result.uri\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"Result.autocreate\"],\"path\":\"/iresources\"}],\"resource_name\":{\"default_value\":\"InteractiveResource\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"iresource\"}}],\"service_offered\":[{\"@id\":\"http://rails.kinexis.com:5000/lti2_tp/ToolProxy.collection\",\"@type\":\"RestService\",\"action\":[\"PUT\"],\"endpoint\":\"http://rails.kinexis.com:5000/lti2_tp/tool_proxies\",\"format\":[\"\"]}]},\"security_contract\":{\"shared_secret\":\"42a06fd979b14dfafa6969fb9b90b299\",\"tool_service\":[{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxy.collection\",\"action\":[\"POST\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxy.item\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:Result.item\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:LtiLinkSettings\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxyBindingSettings\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxySettings\",\"action\":[\"GET\",\"PUT\"]}]}}', `updated_at` = '2015-04-24 18:49:53' WHERE `lti2_tp_registrations`.`id` = 121[0m
  [1m[35m (5.9ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE `lti2_tp_registrations` SET `status` = 'reregistered', `updated_at` = '2015-04-24 18:49:53' WHERE `lti2_tp_registrations`.`id` = 121
  [1m[36m (12.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mTenant Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM `tenants`  WHERE (`tenants`.`tenant_name` = BINARY 'Elan University1131' AND `tenants`.`id` != 117) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  COMMIT
Redirected to http://rails.kinexis.com:5000/lti2_tp/registrations?status=failure&lti_errormsg=500-Internal+Server+Error+&lti_errorlog=500-Internal+Server+Error+&&id=121
Completed 302 Found in 93ms (ActiveRecord: 21.5ms)


Started GET "/lti2_tp/registrations?status=failure&lti_errormsg=500-Internal+Server+Error+&lti_errorlog=500-Internal+Server+Error+&&id=121" for 127.0.0.1 at 2015-04-24 11:49:53 -0700
Processing by Lti2Tp::RegistrationsController#index as HTML
  Parameters: {"status"=>"failure", "lti_errormsg"=>"500-Internal Server Error ", "lti_errorlog"=>"500-Internal Server Error ", "id"=>"121"}
  [1m[36mLti2Tp::Registration Load (0.5ms)[0m  [1mSELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 121 LIMIT 1[0m
Redirected to http://rails.kinexis.com:4000/admin/tool_actions?lti_errorlog=500-Internal+Server+Error+&lti_errormsg=500-Internal+Server+Error+&status=failure
Completed 302 Found in 3ms (ActiveRecord: 0.5ms)
  [1m[36mLti2Tp::Registry Load (0.3ms)[0m  [1mSELECT `lti2_tp_registries`.* FROM `lti2_tp_registries`[0m


Started POST "/lti2_tp/reregistrations" for 127.0.0.1 at 2015-04-24 11:52:45 -0700
  [1m[35mActiveRecord::SchemaMigration Load (0.5ms)[0m  SELECT `schema_migrations`.* FROM `schema_migrations`
Processing by Lti2Tp::RegistrationsController#reregister as HTML
  Parameters: {"tc_profile_url"=>"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/13efb090-ccde-0132-5374-20c9d07c6451", "launch_presentation_return_url"=>"http://rails.kinexis.com:4000/admin/tool_actions", "lti_message_type"=>"ToolProxyReregistrationRequest", "oauth_consumer_key"=>"13efae70-ccde-0132-5374-20c9d07c6451", "oauth_nonce"=>"5585221912330", "oauth_signature_method"=>"HMAC-SHA1", "oauth_timestamp"=>"1429901565", "oauth_version"=>"1.0", "oauth_callback"=>"about:blank", "oauth_signature"=>"sp4gEY3tsVNrPiP/UAYhdIZyyjQ="}
Can't verify CSRF token authenticity
AuthHdr_Parms: {}
  [1m[36mTenant Load (0.3ms)[0m  [1mSELECT  `tenants`.* FROM `tenants`  WHERE `tenants`.`tenant_key` = '13efae70-ccde-0132-5374-20c9d07c6451'  ORDER BY `tenants`.`id` ASC LIMIT 1[0m
  [1m[35mLti2Tp::Registration Load (0.3ms)[0m  SELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`tenant_id` = 117  ORDER BY `lti2_tp_registrations`.`id` ASC LIMIT 1
AuthHdr_Parms: {}
in verify_signature
  [1m[36mLti2Tp::Registration Load (0.6ms)[0m  [1mSELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`tenant_name` = 'Elan University1131'  ORDER BY `lti2_tp_registrations`.`id` ASC LIMIT 1[0m
  [1m[35mTenant Load (0.4ms)[0m  SELECT  `tenants`.* FROM `tenants`  WHERE `tenants`.`id` = 117 LIMIT 1
  [1m[36mLti2Tp::Tool Load (0.3ms)[0m  [1mSELECT  `lti2_tp_tools`.* FROM `lti2_tp_tools`  WHERE `lti2_tp_tools`.`id` = 2 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (2.3ms)[0m  [1mUPDATE `lti2_tp_registrations` SET `status` = 'received', `updated_at` = '2015-04-24 18:52:45' WHERE `lti2_tp_registrations`.`id` = 121[0m
  [1m[35m (1.0ms)[0m  COMMIT
Redirected to http://rails.kinexis.com:5000/lti_registration_wips?registration_id=121&return_url=/lti2_tp/registrations
Completed 302 Found in 158ms (ActiveRecord: 58.5ms)


Started GET "/lti_registration_wips?registration_id=121&return_url=/lti2_tp/registrations" for 127.0.0.1 at 2015-04-24 11:52:45 -0700
Processing by LtiRegistrationWipsController#index as HTML
  Parameters: {"registration_id"=>"121", "return_url"=>"/lti2_tp/registrations"}
  [1m[36mLti2Tp::Registration Load (0.6ms)[0m  [1mSELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 121 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `lti_registration_wips` (`created_at`, `product_name`, `registration_id`, `registration_return_url`, `support_email`, `tenant_name`, `updated_at`) VALUES ('2015-04-24 18:52:45', 'Elan/LuMoS', 121, '/lti2_tp/registrations', 'john.tibbetts@kinexis.com', 'Elan University1131', '2015-04-24 18:52:45')[0m
  [1m[35m (0.2ms)[0m  COMMIT
  Rendered lti_registration_wips/_form.html.haml (123.9ms)
  Rendered lti_registration_wips/index.html.haml within layouts/application (130.7ms)
Completed 200 OK in 312ms (Views: 259.0ms | ActiveRecord: 21.3ms)


Started PATCH "/lti_registration_wips/210" for 127.0.0.1 at 2015-04-24 11:52:47 -0700
Processing by LtiRegistrationWipsController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"IQFZGw6wnlWi/3CBlIM3+AF7VnawHoFXbIG63BJKK5Q=", "lti_registration_wip"=>{"support_email"=>"john.tibbetts@kinexis.com", "product_name"=>"Elan/LuMoS", "tenant_name"=>"Elan University1131"}, "commit"=>"Update Lti registration wip", "id"=>"210"}
  [1m[36mLtiRegistrationWip Load (0.3ms)[0m  [1mSELECT  `lti_registration_wips`.* FROM `lti_registration_wips`  WHERE `lti_registration_wips`.`id` = 210 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35mLti2Tp::Registration Load (0.3ms)[0m  SELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 121 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  `lti_registration_wips`.* FROM `lti_registration_wips`  WHERE `lti_registration_wips`.`id` = 210 LIMIT 1[0m  [["id", "210"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 121 LIMIT 1  [["id", 121]]
  [1m[36mTenant Load (0.3ms)[0m  [1mSELECT  `tenants`.* FROM `tenants`  WHERE `tenants`.`tenant_name` = 'Elan University1131'  ORDER BY `tenants`.`id` ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE `lti2_tp_registrations` SET `end_registration_id` = '06284a90-cce1-0132-5376-20c9d07c6451', `proposed_tool_proxy_json` = '{\"@context\":[\"http://purl.imsglobal.org/ctx/lti/v2/ToolConsumerProfile\",{\"ltitcp\":\"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/13efb090-ccde-0132-5374-20c9d07c6451#\"}],\"@type\":\"ToolProxy\",\"@id\":\"ToolProxyProposal_at_2015-04-24T18:52:47Z\",\"lti_version\":\"LTI-2p0\",\"tool_proxy_guid\":\"13efae70-ccde-0132-5374-20c9d07c6451\",\"tool_consumer_profile\":\"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/13efb090-ccde-0132-5374-20c9d07c6451\",\"tool_profile\":{\"base_url_choice\":[{\"default_base_url\":\"http://rails.kinexis.com:5000\",\"selector\":{\"applies_to\":[\"IconEndpoint\",\"MessageHandler\"]}}],\"lti_version\":\"LTI-2p0\",\"message\":[{\"message_type\":[\"ToolProxyRegistrationRequest\",\"ToolProxyReregistrationRequest\"],\"parameter\":[{\"name\":\"tc_profile_url\",\"variable\":\"ToolConsumerProfile.url\"}],\"path\":\"http://rails.kinexis.com:5000/lti2_tp/reregistrations\"}],\"product_instance\":{\"guid\":\"fd75124a-140e-470f-944c-114d2d92bb40\",\"product_info\":{\"description\":{\"default_value\":\"Fabericious reflowable ePub3 Textbook\",\"key\":\"tool.description\"},\"product_family\":{\"code\":\"assessment-tool\",\"vendor\":{\"code\":\"fabericious.org\",\"contact\":{\"email\":\"info@fabericious.com\"},\"description\":{\"default_value\":\"Fabericious is a leading provider of interactive tools for education\",\"key\":\"tool.vendor.description\"},\"vendor_name\":{\"default_value\":\"Fab\",\"key\":\"tool.vendor.name\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\",\"website\":\"{http://rails.kinexis.com:5000}\"}},\"product_name\":{\"default_value\":\"LTI2 BookTools\",\"key\":\"tool.name\"},\"product_version\":\"10.3\",\"technical_description\":{\"default_value\":\"Support provided for all LTI 1 extensions as well as LTI 2\",\"key\":\"tool.technical\"}},\"service_provider\":{\"description\":{\"default_value\":\"Provider of high performance managed hosting environments\",\"key\":\"service_provider.description\"},\"guid\":\"18e7ea50-3d6d-4f6b-aff2-ed3ab577716c\",\"service_provider_name\":{\"default_value\":\"Amazon Cloud\",\"key\":\"service_provider.name\"},\"support\":{\"email\":\"support@ec2.fabericious.com\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\"},\"support\":{\"email\":\"helpdesk@fabericious.com\"}},\"resource_handler\":[{\"description\":{\"default_value\":\"Settings service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"tool_proxy_custom_url\",\"variable\":\"ToolProxy.custom.url\"},{\"name\":\"tool_proxy_binding_custom_url\",\"variable\":\"ToolProxyBinding.custom.url\"},{\"name\":\"lti_link_custom_url\",\"variable\":\"LtiLink.custom.url\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"ToolProxy.custom.url\",\"ToolProxyBinding.custom.url\",\"LtiLink.custom.url\"],\"path\":\"/settings\"}],\"resource_name\":{\"default_value\":\"Settings\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"setting\"}},{\"description\":{\"default_value\":\"Echo service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"fixed\":\"Narcissus\",\"name\":\"referrer\"},{\"fixed\":\"3.14159\",\"name\":\"pi\"},{\"name\":\"user_primary_email\",\"variable\":\"Person.email.primary\"},{\"name\":\"discipline\",\"variable\":\"CourseOffering.label\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\"],\"path\":\"/echoes\"}],\"resource_name\":{\"default_value\":\"Echo\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"echo\"}},{\"description\":{\"default_value\":\"Interactive resource\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"vbid\"},{\"name\":\"result_uri\",\"variable\":\"Result.uri\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"Result.autocreate\"],\"path\":\"/iresources\"}],\"resource_name\":{\"default_value\":\"InteractiveResource\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"iresource\"}}],\"service_offered\":[{\"@id\":\"http://rails.kinexis.com:5000/lti2_tp/ToolProxy.collection\",\"@type\":\"RestService\",\"action\":[\"PUT\"],\"endpoint\":\"http://rails.kinexis.com:5000/lti2_tp/tool_proxies\",\"format\":[\"\"]}]},\"security_contract\":{\"shared_secret\":\"01ddf6b28aa10f2207e2cd64a08972bf\",\"tool_service\":[{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxy.collection\",\"action\":[\"POST\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxy.item\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:Result.item\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:LtiLinkSettings\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxyBindingSettings\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxySettings\",\"action\":[\"GET\",\"PUT\"]}]}}', `updated_at` = '2015-04-24 18:52:47' WHERE `lti2_tp_registrations`.`id` = 121[0m
  [1m[35m (12.2ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE `lti2_tp_registrations` SET `status` = 'reregistered', `updated_at` = '2015-04-24 18:52:47' WHERE `lti2_tp_registrations`.`id` = 121
  [1m[36m (12.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mTenant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `tenants`  WHERE (`tenants`.`tenant_name` = BINARY 'Elan University1131' AND `tenants`.`id` != 117) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  COMMIT
Redirected to http://rails.kinexis.com:5000/lti2_tp/registrations?status=success&&id=121
Completed 302 Found in 111ms (ActiveRecord: 27.4ms)


Started GET "/lti2_tp/registrations?status=success&&id=121" for 127.0.0.1 at 2015-04-24 11:52:47 -0700
Processing by Lti2Tp::RegistrationsController#index as HTML
  Parameters: {"status"=>"success", "id"=>"121"}
  [1m[36mLti2Tp::Registration Load (0.5ms)[0m  [1mSELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 121 LIMIT 1[0m
Redirected to http://rails.kinexis.com:4000/admin/tool_actions?status=success
Completed 302 Found in 2ms (ActiveRecord: 0.5ms)


Started PUT "/lti2_tp/tool_proxies/13efae70-ccde-0132-5374-20c9d07c6451?correlation=06284a90-cce1-0132-5376-20c9d07c6451" for 127.0.0.1 at 2015-04-24 11:52:49 -0700
Processing by Lti2Tp::RegistrationsController#complete_reregistration as HTML
  Parameters: {"correlation"=>"06284a90-cce1-0132-5376-20c9d07c6451", "id"=>"13efae70-ccde-0132-5374-20c9d07c6451"}
Can't verify CSRF token authenticity
AuthHdr_Parms: {:oauth_consumer_key=>"13efae70-ccde-0132-5374-20c9d07c6451", :oauth_nonce=>"1714937366375", :oauth_signature_method=>"HMAC-SHA1", :oauth_timestamp=>"1429901569", :oauth_version=>"1.0", :oauth_callback=>"about:blank", :oauth_signature=>"pszvxQqMNR3khXkqipQBSr2+384="}
  [1m[35mTenant Load (0.3ms)[0m  SELECT  `tenants`.* FROM `tenants`  WHERE `tenants`.`tenant_key` = '13efae70-ccde-0132-5374-20c9d07c6451'  ORDER BY `tenants`.`id` ASC LIMIT 1
  [1m[36mLti2Tp::Registration Load (0.3ms)[0m  [1mSELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`tenant_id` = 117  ORDER BY `lti2_tp_registrations`.`id` ASC LIMIT 1[0m
AuthHdr_Parms: {:oauth_consumer_key=>"13efae70-ccde-0132-5374-20c9d07c6451", :oauth_nonce=>"1714937366375", :oauth_signature_method=>"HMAC-SHA1", :oauth_timestamp=>"1429901569", :oauth_version=>"1.0", :oauth_callback=>"about:blank", :oauth_signature=>"pszvxQqMNR3khXkqipQBSr2+384="}
in verify_signature
  [1m[35mLti2Tp::Registration Load (0.5ms)[0m  SELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`tenant_name` = 'Elan University1131'  ORDER BY `lti2_tp_registrations`.`id` ASC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`tenant_id` = 117  ORDER BY `lti2_tp_registrations`.`id` ASC LIMIT 1[0m
  [1m[35mTenant Load (0.6ms)[0m  SELECT  `tenants`.* FROM `tenants`  WHERE `tenants`.`id` = 117 LIMIT 1
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mTenant Exists (0.3ms)[0m  SELECT  1 AS one FROM `tenants`  WHERE (`tenants`.`tenant_name` = BINARY 'Elan University1131' AND `tenants`.`id` != 117) LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE `tenants` SET `secret` = '01ddf6b28aa10f2207e2cd64a08972bf', `updated_at` = '2015-04-24 18:52:49' WHERE `tenants`.`id` = 117[0m
  [1m[35m (0.3ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE `lti2_tp_registrations` SET `end_registration_id` = NULL, `proposed_tool_proxy_json` = NULL, `reg_password` = '01ddf6b28aa10f2207e2cd64a08972bf', `tool_proxy_json` = '{\"@context\":[\"http://purl.imsglobal.org/ctx/lti/v2/ToolConsumerProfile\",{\"ltitcp\":\"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/13efb090-ccde-0132-5374-20c9d07c6451#\"}],\"@type\":\"ToolProxy\",\"@id\":\"ToolProxyProposal_at_2015-04-24T18:52:47Z\",\"lti_version\":\"LTI-2p0\",\"tool_proxy_guid\":\"13efae70-ccde-0132-5374-20c9d07c6451\",\"tool_consumer_profile\":\"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/13efb090-ccde-0132-5374-20c9d07c6451\",\"tool_profile\":{\"base_url_choice\":[{\"default_base_url\":\"http://rails.kinexis.com:5000\",\"selector\":{\"applies_to\":[\"IconEndpoint\",\"MessageHandler\"]}}],\"lti_version\":\"LTI-2p0\",\"message\":[{\"message_type\":[\"ToolProxyRegistrationRequest\",\"ToolProxyReregistrationRequest\"],\"parameter\":[{\"name\":\"tc_profile_url\",\"variable\":\"ToolConsumerProfile.url\"}],\"path\":\"http://rails.kinexis.com:5000/lti2_tp/reregistrations\"}],\"product_instance\":{\"guid\":\"fd75124a-140e-470f-944c-114d2d92bb40\",\"product_info\":{\"description\":{\"default_value\":\"Fabericious reflowable ePub3 Textbook\",\"key\":\"tool.description\"},\"product_family\":{\"code\":\"assessment-tool\",\"vendor\":{\"code\":\"fabericious.org\",\"contact\":{\"email\":\"info@fabericious.com\"},\"description\":{\"default_value\":\"Fabericious is a leading provider of interactive tools for education\",\"key\":\"tool.vendor.description\"},\"vendor_name\":{\"default_value\":\"Fab\",\"key\":\"tool.vendor.name\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\",\"website\":\"{http://rails.kinexis.com:5000}\"}},\"product_name\":{\"default_value\":\"LTI2 BookTools\",\"key\":\"tool.name\"},\"product_version\":\"10.3\",\"technical_description\":{\"default_value\":\"Support provided for all LTI 1 extensions as well as LTI 2\",\"key\":\"tool.technical\"}},\"service_provider\":{\"description\":{\"default_value\":\"Provider of high performance managed hosting environments\",\"key\":\"service_provider.description\"},\"guid\":\"18e7ea50-3d6d-4f6b-aff2-ed3ab577716c\",\"service_provider_name\":{\"default_value\":\"Amazon Cloud\",\"key\":\"service_provider.name\"},\"support\":{\"email\":\"support@ec2.fabericious.com\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\"},\"support\":{\"email\":\"helpdesk@fabericious.com\"}},\"resource_handler\":[{\"description\":{\"default_value\":\"Settings service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"tool_proxy_custom_url\",\"variable\":\"ToolProxy.custom.url\"},{\"name\":\"tool_proxy_binding_custom_url\",\"variable\":\"ToolProxyBinding.custom.url\"},{\"name\":\"lti_link_custom_url\",\"variable\":\"LtiLink.custom.url\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"ToolProxy.custom.url\",\"ToolProxyBinding.custom.url\",\"LtiLink.custom.url\"],\"path\":\"/settings\"}],\"resource_name\":{\"default_value\":\"Settings\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"setting\"}},{\"description\":{\"default_value\":\"Echo service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"fixed\":\"Narcissus\",\"name\":\"referrer\"},{\"fixed\":\"3.14159\",\"name\":\"pi\"},{\"name\":\"user_primary_email\",\"variable\":\"Person.email.primary\"},{\"name\":\"discipline\",\"variable\":\"CourseOffering.label\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\"],\"path\":\"/echoes\"}],\"resource_name\":{\"default_value\":\"Echo\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"echo\"}},{\"description\":{\"default_value\":\"Interactive resource\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"vbid\"},{\"name\":\"result_uri\",\"variable\":\"Result.uri\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"Result.autocreate\"],\"path\":\"/iresources\"}],\"resource_name\":{\"default_value\":\"InteractiveResource\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"iresource\"}}],\"service_offered\":[{\"@id\":\"http://rails.kinexis.com:5000/lti2_tp/ToolProxy.collection\",\"@type\":\"RestService\",\"action\":[\"PUT\"],\"endpoint\":\"http://rails.kinexis.com:5000/lti2_tp/tool_proxies\",\"format\":[\"\"]}]},\"security_contract\":{\"shared_secret\":\"01ddf6b28aa10f2207e2cd64a08972bf\",\"tool_service\":[{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxy.collection\",\"action\":[\"POST\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxy.item\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:Result.item\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:LtiLinkSettings\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxyBindingSettings\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxySettings\",\"action\":[\"GET\",\"PUT\"]}]}}', `updated_at` = '2015-04-24 18:52:49' WHERE `lti2_tp_registrations`.`id` = 121
  [1m[36m (0.6ms)[0m  [1mCOMMIT[0m
"reregistration complete for 13efae70-ccde-0132-5374-20c9d07c6451"
  Rendered text template (0.0ms)
Completed 200 OK in 21ms (Views: 2.2ms | ActiveRecord: 3.9ms)


Started POST "/echoes" for 127.0.0.1 at 2015-04-24 11:53:00 -0700
Processing by EchoesController#create as HTML
  Parameters: {"lti_version"=>"LTI-2p0", "lti_message_type"=>"basic-lti-launch-request", "resource_link_id"=>"2419", "user_id"=>"2", "roles"=>"Instructor", "launch_presentation_return_url"=>"http://rails.kinexis.com:4000/admin/course_page?method=show&course_id=2", "launch_presentation_document_target"=>"window", "context_id"=>"2", "launch_presentation_locale"=>"en_US", "context_label"=>"SMPL101A", "context_title"=>"Nursing Compendium", "lis_course_section_sourcedid"=>"2", "tool_consumer_info_product_family_code"=>"LuMoS", "tool_consumer_info_version"=>"3.1", "custom_referrer"=>"Narcissus", "custom_pi"=>"3.14159", "custom_user_primary_email"=>"admin@lumos.org", "custom_discipline"=>"SMPL101A", "custom_tp"=>"1131", "oauth_consumer_key"=>"13efae70-ccde-0132-5374-20c9d07c6451", "oauth_nonce"=>"8977272479512", "oauth_signature_method"=>"HMAC-SHA1", "oauth_timestamp"=>"1429901579", "oauth_version"=>"1.0", "oauth_callback"=>"about:blank", "oauth_signature"=>"RbsDgJ3Z70pdi7jTqn6hehX+OEE="}
Can't verify CSRF token authenticity
AuthHdr_Parms: {}
  [1m[35mTenant Load (0.4ms)[0m  SELECT  `tenants`.* FROM `tenants`  WHERE `tenants`.`tenant_key` = '13efae70-ccde-0132-5374-20c9d07c6451'  ORDER BY `tenants`.`id` ASC LIMIT 1
  [1m[36mLti2Tp::Registration Load (0.3ms)[0m  [1mSELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`tenant_id` = 117  ORDER BY `lti2_tp_registrations`.`id` ASC LIMIT 1[0m
AuthHdr_Parms: {}
in verify_signature
  Rendered inline template (0.4ms)
Completed 200 OK in 7ms (Views: 1.1ms | ActiveRecord: 0.7ms)


Started POST "/lti2_tp/reregistrations" for 127.0.0.1 at 2015-04-24 12:40:26 -0700
Processing by Lti2Tp::RegistrationsController#reregister as HTML
  Parameters: {"tc_profile_url"=>"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/13efb090-ccde-0132-5374-20c9d07c6451", "launch_presentation_return_url"=>"http://rails.kinexis.com:4000/admin/tool_actions", "lti_message_type"=>"ToolProxyReregistrationRequest", "oauth_consumer_key"=>"13efae70-ccde-0132-5374-20c9d07c6451", "oauth_nonce"=>"7309728648267", "oauth_signature_method"=>"HMAC-SHA1", "oauth_timestamp"=>"1429904426", "oauth_version"=>"1.0", "oauth_callback"=>"about:blank", "oauth_signature"=>"+nPibuByNuadKahIh5jrpayQBxc="}
Can't verify CSRF token authenticity
AuthHdr_Parms: {}
  [1m[35mTenant Load (0.8ms)[0m  SELECT  `tenants`.* FROM `tenants`  WHERE `tenants`.`tenant_key` = '13efae70-ccde-0132-5374-20c9d07c6451'  ORDER BY `tenants`.`id` ASC LIMIT 1
  [1m[36mLti2Tp::Registration Load (0.8ms)[0m  [1mSELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`tenant_id` = 117  ORDER BY `lti2_tp_registrations`.`id` ASC LIMIT 1[0m
AuthHdr_Parms: {}
in verify_signature
  [1m[35mLti2Tp::Registration Load (1.5ms)[0m  SELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`tenant_name` = 'Elan University1131'  ORDER BY `lti2_tp_registrations`.`id` ASC LIMIT 1
  [1m[36mTenant Load (0.6ms)[0m  [1mSELECT  `tenants`.* FROM `tenants`  WHERE `tenants`.`id` = 117 LIMIT 1[0m
  [1m[35mLti2Tp::Tool Load (0.5ms)[0m  SELECT  `lti2_tp_tools`.* FROM `lti2_tp_tools`  WHERE `lti2_tp_tools`.`id` = 2 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  UPDATE `lti2_tp_registrations` SET `status` = 'received', `updated_at` = '2015-04-24 19:40:26' WHERE `lti2_tp_registrations`.`id` = 121
  [1m[36m (0.6ms)[0m  [1mCOMMIT[0m
Redirected to http://rails.kinexis.com:5000/lti_registration_wips?registration_id=121&return_url=/lti2_tp/registrations
Completed 302 Found in 137ms (ActiveRecord: 5.6ms)


Started GET "/lti_registration_wips?registration_id=121&return_url=/lti2_tp/registrations" for 127.0.0.1 at 2015-04-24 12:40:26 -0700
Processing by LtiRegistrationWipsController#index as HTML
  Parameters: {"registration_id"=>"121", "return_url"=>"/lti2_tp/registrations"}
  [1m[35mLti2Tp::Registration Load (0.4ms)[0m  SELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 121 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO `lti_registration_wips` (`created_at`, `product_name`, `registration_id`, `registration_return_url`, `support_email`, `tenant_name`, `updated_at`) VALUES ('2015-04-24 19:40:26', 'Elan/LuMoS', 121, '/lti2_tp/registrations', 'john.tibbetts@kinexis.com', 'Elan University1131', '2015-04-24 19:40:26')
  [1m[36m (6.3ms)[0m  [1mCOMMIT[0m
  Rendered lti_registration_wips/_form.html.haml (57.4ms)
  Rendered lti_registration_wips/index.html.haml within layouts/application (62.9ms)
Completed 200 OK in 362ms (Views: 345.2ms | ActiveRecord: 7.8ms)


Started PATCH "/lti_registration_wips/211" for 127.0.0.1 at 2015-04-24 12:40:28 -0700
Processing by LtiRegistrationWipsController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"IQFZGw6wnlWi/3CBlIM3+AF7VnawHoFXbIG63BJKK5Q=", "lti_registration_wip"=>{"support_email"=>"john.tibbetts@kinexis.com", "product_name"=>"Elan/LuMoS", "tenant_name"=>"Elan University1131"}, "commit"=>"Update Lti registration wip", "id"=>"211"}
  [1m[35mLtiRegistrationWip Load (0.3ms)[0m  SELECT  `lti_registration_wips`.* FROM `lti_registration_wips`  WHERE `lti_registration_wips`.`id` = 211 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36mLti2Tp::Registration Load (0.3ms)[0m  [1mSELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 121 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  `lti_registration_wips`.* FROM `lti_registration_wips`  WHERE `lti_registration_wips`.`id` = 211 LIMIT 1  [["id", "211"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 121 LIMIT 1[0m  [["id", 121]]
  [1m[35mTenant Load (0.4ms)[0m  SELECT  `tenants`.* FROM `tenants`  WHERE `tenants`.`tenant_name` = 'Elan University1131'  ORDER BY `tenants`.`id` ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  UPDATE `lti2_tp_registrations` SET `end_registration_id` = 'af44ad90-cce7-0132-5376-20c9d07c6451', `proposed_tool_proxy_json` = '{\"@context\":[\"http://purl.imsglobal.org/ctx/lti/v2/ToolConsumerProfile\",{\"ltitcp\":\"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/13efb090-ccde-0132-5374-20c9d07c6451#\"}],\"@type\":\"ToolProxy\",\"@id\":\"ToolProxyProposal_at_2015-04-24T19:40:28Z\",\"lti_version\":\"LTI-2p0\",\"tool_proxy_guid\":\"13efae70-ccde-0132-5374-20c9d07c6451\",\"tool_consumer_profile\":\"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/13efb090-ccde-0132-5374-20c9d07c6451\",\"tool_profile\":{\"base_url_choice\":[{\"default_base_url\":\"http://rails.kinexis.com:5000\",\"selector\":{\"applies_to\":[\"IconEndpoint\",\"MessageHandler\"]}}],\"lti_version\":\"LTI-2p0\",\"message\":[{\"message_type\":[\"ToolProxyRegistrationRequest\",\"ToolProxyReregistrationRequest\"],\"parameter\":[{\"name\":\"tc_profile_url\",\"variable\":\"ToolConsumerProfile.url\"}],\"path\":\"http://rails.kinexis.com:5000/lti2_tp/reregistrations\"}],\"product_instance\":{\"guid\":\"fd75124a-140e-470f-944c-114d2d92bb40\",\"product_info\":{\"description\":{\"default_value\":\"Fabericious reflowable ePub3 Textbook\",\"key\":\"tool.description\"},\"product_family\":{\"code\":\"assessment-tool\",\"vendor\":{\"code\":\"fabericious.org\",\"contact\":{\"email\":\"info@fabericious.com\"},\"description\":{\"default_value\":\"Fabericious is a leading provider of interactive tools for education\",\"key\":\"tool.vendor.description\"},\"vendor_name\":{\"default_value\":\"Fab\",\"key\":\"tool.vendor.name\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\",\"website\":\"{http://rails.kinexis.com:5000}\"}},\"product_name\":{\"default_value\":\"LTI2 BookTools\",\"key\":\"tool.name\"},\"product_version\":\"10.3\",\"technical_description\":{\"default_value\":\"Support provided for all LTI 1 extensions as well as LTI 2\",\"key\":\"tool.technical\"}},\"service_provider\":{\"description\":{\"default_value\":\"Provider of high performance managed hosting environments\",\"key\":\"service_provider.description\"},\"guid\":\"18e7ea50-3d6d-4f6b-aff2-ed3ab577716c\",\"service_provider_name\":{\"default_value\":\"Amazon Cloud\",\"key\":\"service_provider.name\"},\"support\":{\"email\":\"support@ec2.fabericious.com\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\"},\"support\":{\"email\":\"helpdesk@fabericious.com\"}},\"resource_handler\":[{\"description\":{\"default_value\":\"Settings service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"tool_proxy_custom_url\",\"variable\":\"ToolProxy.custom.url\"},{\"name\":\"tool_proxy_binding_custom_url\",\"variable\":\"ToolProxyBinding.custom.url\"},{\"name\":\"lti_link_custom_url\",\"variable\":\"LtiLink.custom.url\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"ToolProxy.custom.url\",\"ToolProxyBinding.custom.url\",\"LtiLink.custom.url\"],\"path\":\"/settings\"}],\"resource_name\":{\"default_value\":\"Settings\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"setting\"}},{\"description\":{\"default_value\":\"Echo service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"fixed\":\"Narcissus\",\"name\":\"referrer\"},{\"fixed\":\"3.14159\",\"name\":\"pi\"},{\"name\":\"user_primary_email\",\"variable\":\"Person.email.primary\"},{\"name\":\"discipline\",\"variable\":\"CourseOffering.label\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\"],\"path\":\"/echoes\"}],\"resource_name\":{\"default_value\":\"Echo\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"echo\"}},{\"description\":{\"default_value\":\"Interactive resource\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"vbid\"},{\"name\":\"result_uri\",\"variable\":\"Result.uri\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"Result.autocreate\"],\"path\":\"/iresources\"}],\"resource_name\":{\"default_value\":\"InteractiveResource\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"iresource\"}}],\"service_offered\":[{\"@id\":\"http://rails.kinexis.com:5000/lti2_tp/ToolProxy.collection\",\"@type\":\"RestService\",\"action\":[\"PUT\"],\"endpoint\":\"http://rails.kinexis.com:5000/lti2_tp/tool_proxies\",\"format\":[\"\"]}]},\"security_contract\":{\"shared_secret\":\"0b134cae0ce8aaab42c0b4f6aef86257\",\"tool_service\":[{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxy.collection\",\"action\":[\"POST\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxy.item\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:Result.item\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:LtiLinkSettings\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxyBindingSettings\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxySettings\",\"action\":[\"GET\",\"PUT\"]}]}}', `updated_at` = '2015-04-24 19:40:28' WHERE `lti2_tp_registrations`.`id` = 121
  [1m[36m (0.7ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (6.4ms)[0m  [1mUPDATE `lti2_tp_registrations` SET `status` = 'reregistered', `updated_at` = '2015-04-24 19:40:28' WHERE `lti2_tp_registrations`.`id` = 121[0m
  [1m[35m (11.8ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mTenant Exists (0.5ms)[0m  SELECT  1 AS one FROM `tenants`  WHERE (`tenants`.`tenant_name` = BINARY 'Elan University1131' AND `tenants`.`id` != 117) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
Redirected to http://rails.kinexis.com:5000/lti2_tp/registrations?status=success&&id=121
Completed 302 Found in 93ms (ActiveRecord: 22.3ms)


Started GET "/lti2_tp/registrations?status=success&&id=121" for 127.0.0.1 at 2015-04-24 12:40:28 -0700
Processing by Lti2Tp::RegistrationsController#index as HTML
  Parameters: {"status"=>"success", "id"=>"121"}
  [1m[35mLti2Tp::Registration Load (0.6ms)[0m  SELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 121 LIMIT 1
Redirected to http://rails.kinexis.com:4000/admin/tool_actions?status=success
Completed 302 Found in 4ms (ActiveRecord: 0.6ms)


Started PUT "/lti2_tp/tool_proxies/13efae70-ccde-0132-5374-20c9d07c6451?correlation=af44ad90-cce7-0132-5376-20c9d07c6451" for 127.0.0.1 at 2015-04-24 12:40:30 -0700
Processing by Lti2Tp::RegistrationsController#complete_reregistration as HTML
  Parameters: {"correlation"=>"af44ad90-cce7-0132-5376-20c9d07c6451", "id"=>"13efae70-ccde-0132-5374-20c9d07c6451"}
Can't verify CSRF token authenticity
AuthHdr_Parms: {:oauth_consumer_key=>"13efae70-ccde-0132-5374-20c9d07c6451", :oauth_nonce=>"3206831540501", :oauth_signature_method=>"HMAC-SHA1", :oauth_timestamp=>"1429904430", :oauth_version=>"1.0", :oauth_callback=>"about:blank", :oauth_signature=>"5pkF7J6SasqtCYPr6gMVn82s+mk="}
  [1m[36mTenant Load (0.3ms)[0m  [1mSELECT  `tenants`.* FROM `tenants`  WHERE `tenants`.`tenant_key` = '13efae70-ccde-0132-5374-20c9d07c6451'  ORDER BY `tenants`.`id` ASC LIMIT 1[0m
  [1m[35mLti2Tp::Registration Load (0.5ms)[0m  SELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`tenant_id` = 117  ORDER BY `lti2_tp_registrations`.`id` ASC LIMIT 1
AuthHdr_Parms: {:oauth_consumer_key=>"13efae70-ccde-0132-5374-20c9d07c6451", :oauth_nonce=>"3206831540501", :oauth_signature_method=>"HMAC-SHA1", :oauth_timestamp=>"1429904430", :oauth_version=>"1.0", :oauth_callback=>"about:blank", :oauth_signature=>"5pkF7J6SasqtCYPr6gMVn82s+mk="}
in verify_signature
  [1m[36mLti2Tp::Registration Load (0.9ms)[0m  [1mSELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`tenant_name` = 'Elan University1131'  ORDER BY `lti2_tp_registrations`.`id` ASC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`tenant_id` = 117  ORDER BY `lti2_tp_registrations`.`id` ASC LIMIT 1
  [1m[36mTenant Load (0.3ms)[0m  [1mSELECT  `tenants`.* FROM `tenants`  WHERE `tenants`.`id` = 117 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mTenant Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM `tenants`  WHERE (`tenants`.`tenant_name` = BINARY 'Elan University1131' AND `tenants`.`id` != 117) LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE `tenants` SET `secret` = '0b134cae0ce8aaab42c0b4f6aef86257', `updated_at` = '2015-04-24 19:40:30' WHERE `tenants`.`id` = 117
  [1m[36m (0.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (4.2ms)[0m  [1mUPDATE `lti2_tp_registrations` SET `end_registration_id` = NULL, `proposed_tool_proxy_json` = NULL, `reg_password` = '0b134cae0ce8aaab42c0b4f6aef86257', `tool_proxy_json` = '{\"@context\":[\"http://purl.imsglobal.org/ctx/lti/v2/ToolConsumerProfile\",{\"ltitcp\":\"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/13efb090-ccde-0132-5374-20c9d07c6451#\"}],\"@type\":\"ToolProxy\",\"@id\":\"ToolProxyProposal_at_2015-04-24T19:40:28Z\",\"lti_version\":\"LTI-2p0\",\"tool_proxy_guid\":\"13efae70-ccde-0132-5374-20c9d07c6451\",\"tool_consumer_profile\":\"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/13efb090-ccde-0132-5374-20c9d07c6451\",\"tool_profile\":{\"base_url_choice\":[{\"default_base_url\":\"http://rails.kinexis.com:5000\",\"selector\":{\"applies_to\":[\"IconEndpoint\",\"MessageHandler\"]}}],\"lti_version\":\"LTI-2p0\",\"message\":[{\"message_type\":[\"ToolProxyRegistrationRequest\",\"ToolProxyReregistrationRequest\"],\"parameter\":[{\"name\":\"tc_profile_url\",\"variable\":\"ToolConsumerProfile.url\"}],\"path\":\"http://rails.kinexis.com:5000/lti2_tp/reregistrations\"}],\"product_instance\":{\"guid\":\"fd75124a-140e-470f-944c-114d2d92bb40\",\"product_info\":{\"description\":{\"default_value\":\"Fabericious reflowable ePub3 Textbook\",\"key\":\"tool.description\"},\"product_family\":{\"code\":\"assessment-tool\",\"vendor\":{\"code\":\"fabericious.org\",\"contact\":{\"email\":\"info@fabericious.com\"},\"description\":{\"default_value\":\"Fabericious is a leading provider of interactive tools for education\",\"key\":\"tool.vendor.description\"},\"vendor_name\":{\"default_value\":\"Fab\",\"key\":\"tool.vendor.name\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\",\"website\":\"{http://rails.kinexis.com:5000}\"}},\"product_name\":{\"default_value\":\"LTI2 BookTools\",\"key\":\"tool.name\"},\"product_version\":\"10.3\",\"technical_description\":{\"default_value\":\"Support provided for all LTI 1 extensions as well as LTI 2\",\"key\":\"tool.technical\"}},\"service_provider\":{\"description\":{\"default_value\":\"Provider of high performance managed hosting environments\",\"key\":\"service_provider.description\"},\"guid\":\"18e7ea50-3d6d-4f6b-aff2-ed3ab577716c\",\"service_provider_name\":{\"default_value\":\"Amazon Cloud\",\"key\":\"service_provider.name\"},\"support\":{\"email\":\"support@ec2.fabericious.com\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\"},\"support\":{\"email\":\"helpdesk@fabericious.com\"}},\"resource_handler\":[{\"description\":{\"default_value\":\"Settings service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"tool_proxy_custom_url\",\"variable\":\"ToolProxy.custom.url\"},{\"name\":\"tool_proxy_binding_custom_url\",\"variable\":\"ToolProxyBinding.custom.url\"},{\"name\":\"lti_link_custom_url\",\"variable\":\"LtiLink.custom.url\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"ToolProxy.custom.url\",\"ToolProxyBinding.custom.url\",\"LtiLink.custom.url\"],\"path\":\"/settings\"}],\"resource_name\":{\"default_value\":\"Settings\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"setting\"}},{\"description\":{\"default_value\":\"Echo service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"fixed\":\"Narcissus\",\"name\":\"referrer\"},{\"fixed\":\"3.14159\",\"name\":\"pi\"},{\"name\":\"user_primary_email\",\"variable\":\"Person.email.primary\"},{\"name\":\"discipline\",\"variable\":\"CourseOffering.label\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\"],\"path\":\"/echoes\"}],\"resource_name\":{\"default_value\":\"Echo\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"echo\"}},{\"description\":{\"default_value\":\"Interactive resource\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"vbid\"},{\"name\":\"result_uri\",\"variable\":\"Result.uri\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"Result.autocreate\"],\"path\":\"/iresources\"}],\"resource_name\":{\"default_value\":\"InteractiveResource\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"iresource\"}}],\"service_offered\":[{\"@id\":\"http://rails.kinexis.com:5000/lti2_tp/ToolProxy.collection\",\"@type\":\"RestService\",\"action\":[\"PUT\"],\"endpoint\":\"http://rails.kinexis.com:5000/lti2_tp/tool_proxies\",\"format\":[\"\"]}]},\"security_contract\":{\"shared_secret\":\"0b134cae0ce8aaab42c0b4f6aef86257\",\"tool_service\":[{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxy.collection\",\"action\":[\"POST\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxy.item\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:Result.item\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:LtiLinkSettings\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxyBindingSettings\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxySettings\",\"action\":[\"GET\",\"PUT\"]}]}}', `updated_at` = '2015-04-24 19:40:30' WHERE `lti2_tp_registrations`.`id` = 121[0m
  [1m[35m (0.8ms)[0m  COMMIT
"reregistration complete for 13efae70-ccde-0132-5374-20c9d07c6451"
  Rendered text template (0.0ms)
Completed 200 OK in 51ms (Views: 0.5ms | ActiveRecord: 8.4ms)


Started POST "/echoes" for 127.0.0.1 at 2015-04-24 12:40:40 -0700
Processing by EchoesController#create as HTML
  Parameters: {"lti_version"=>"LTI-2p0", "lti_message_type"=>"basic-lti-launch-request", "resource_link_id"=>"2419", "user_id"=>"2", "roles"=>"Instructor", "launch_presentation_return_url"=>"http://rails.kinexis.com:4000/admin/course_page?method=show&course_id=2", "launch_presentation_document_target"=>"window", "context_id"=>"2", "launch_presentation_locale"=>"en_US", "context_label"=>"SMPL101A", "context_title"=>"Nursing Compendium", "lis_course_section_sourcedid"=>"2", "tool_consumer_info_product_family_code"=>"LuMoS", "tool_consumer_info_version"=>"3.1", "custom_referrer"=>"Narcissus", "custom_pi"=>"3.14159", "custom_user_primary_email"=>"admin@lumos.org", "custom_discipline"=>"SMPL101A", "custom_tp"=>"1131", "oauth_consumer_key"=>"13efae70-ccde-0132-5374-20c9d07c6451", "oauth_nonce"=>"7803481348764", "oauth_signature_method"=>"HMAC-SHA1", "oauth_timestamp"=>"1429904440", "oauth_version"=>"1.0", "oauth_callback"=>"about:blank", "oauth_signature"=>"fp/jA5rwJo3brbfepcfBWXpYqXs="}
Can't verify CSRF token authenticity
AuthHdr_Parms: {}
  [1m[36mTenant Load (0.3ms)[0m  [1mSELECT  `tenants`.* FROM `tenants`  WHERE `tenants`.`tenant_key` = '13efae70-ccde-0132-5374-20c9d07c6451'  ORDER BY `tenants`.`id` ASC LIMIT 1[0m
  [1m[35mLti2Tp::Registration Load (0.5ms)[0m  SELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`tenant_id` = 117  ORDER BY `lti2_tp_registrations`.`id` ASC LIMIT 1
AuthHdr_Parms: {}
in verify_signature
  Rendered inline template (0.4ms)
Completed 200 OK in 8ms (Views: 0.9ms | ActiveRecord: 0.8ms)
  [1m[36mLti2Tp::Registry Load (0.7ms)[0m  [1mSELECT `lti2_tp_registries`.* FROM `lti2_tp_registries`[0m


Started POST "/lti2_tp/reregistrations" for 127.0.0.1 at 2015-04-25 07:06:57 -0700
  [1m[35mActiveRecord::SchemaMigration Load (0.7ms)[0m  SELECT `schema_migrations`.* FROM `schema_migrations`
Processing by Lti2Tp::RegistrationsController#reregister as HTML
  Parameters: {"tc_profile_url"=>"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/13efb090-ccde-0132-5374-20c9d07c6451", "launch_presentation_return_url"=>"http://rails.kinexis.com:4000/admin/tool_actions", "lti_message_type"=>"ToolProxyReregistrationRequest", "oauth_consumer_key"=>"13efae70-ccde-0132-5374-20c9d07c6451", "oauth_nonce"=>"8728590640524", "oauth_signature_method"=>"HMAC-SHA1", "oauth_timestamp"=>"1429970817", "oauth_version"=>"1.0", "oauth_callback"=>"about:blank", "oauth_signature"=>"BIKimwrEOmonVQiTEmY0UxSFQ1o="}
Can't verify CSRF token authenticity
AuthHdr_Parms: {}
  [1m[36mTenant Load (0.4ms)[0m  [1mSELECT  `tenants`.* FROM `tenants`  WHERE `tenants`.`tenant_key` = '13efae70-ccde-0132-5374-20c9d07c6451'  ORDER BY `tenants`.`id` ASC LIMIT 1[0m
  [1m[35mLti2Tp::Registration Load (0.7ms)[0m  SELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`tenant_id` = 117  ORDER BY `lti2_tp_registrations`.`id` ASC LIMIT 1
AuthHdr_Parms: {}
in verify_signature
  [1m[36mLti2Tp::Registration Load (0.5ms)[0m  [1mSELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`tenant_name` = 'Elan University1131'  ORDER BY `lti2_tp_registrations`.`id` ASC LIMIT 1[0m
  [1m[35mTenant Load (0.5ms)[0m  SELECT  `tenants`.* FROM `tenants`  WHERE `tenants`.`id` = 117 LIMIT 1
  [1m[36mLti2Tp::Tool Load (0.9ms)[0m  [1mSELECT  `lti2_tp_tools`.* FROM `lti2_tp_tools`  WHERE `lti2_tp_tools`.`id` = 2 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mUPDATE `lti2_tp_registrations` SET `status` = 'received', `updated_at` = '2015-04-25 14:06:58' WHERE `lti2_tp_registrations`.`id` = 121[0m
  [1m[35m (2.3ms)[0m  COMMIT
Redirected to http://rails.kinexis.com:5000/lti_registration_wips?registration_id=121&return_url=/lti2_tp/registrations
Completed 302 Found in 216ms (ActiveRecord: 60.3ms)


Started GET "/lti_registration_wips?registration_id=121&return_url=/lti2_tp/registrations" for 127.0.0.1 at 2015-04-25 07:06:58 -0700
Processing by LtiRegistrationWipsController#index as HTML
  Parameters: {"registration_id"=>"121", "return_url"=>"/lti2_tp/registrations"}
  [1m[36mLti2Tp::Registration Load (0.4ms)[0m  [1mSELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 121 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (3.9ms)[0m  [1mINSERT INTO `lti_registration_wips` (`created_at`, `product_name`, `registration_id`, `registration_return_url`, `support_email`, `tenant_name`, `updated_at`) VALUES ('2015-04-25 14:06:58', 'Elan/LuMoS', 121, '/lti2_tp/registrations', 'john.tibbetts@kinexis.com', 'Elan University1131', '2015-04-25 14:06:58')[0m
  [1m[35m (0.9ms)[0m  COMMIT
  Rendered lti_registration_wips/_form.html.haml (153.2ms)
  Rendered lti_registration_wips/index.html.haml within layouts/application (161.5ms)
Completed 200 OK in 415ms (Views: 301.7ms | ActiveRecord: 28.9ms)


Started PATCH "/lti_registration_wips/212" for 127.0.0.1 at 2015-04-25 07:07:00 -0700
Processing by LtiRegistrationWipsController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"IQFZGw6wnlWi/3CBlIM3+AF7VnawHoFXbIG63BJKK5Q=", "lti_registration_wip"=>{"support_email"=>"john.tibbetts@kinexis.com", "product_name"=>"Elan/LuMoS", "tenant_name"=>"Elan University1131"}, "commit"=>"Update Lti registration wip", "id"=>"212"}
  [1m[36mLtiRegistrationWip Load (0.3ms)[0m  [1mSELECT  `lti_registration_wips`.* FROM `lti_registration_wips`  WHERE `lti_registration_wips`.`id` = 212 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35mLti2Tp::Registration Load (0.3ms)[0m  SELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 121 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  `lti_registration_wips`.* FROM `lti_registration_wips`  WHERE `lti_registration_wips`.`id` = 212 LIMIT 1[0m  [["id", "212"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 121 LIMIT 1  [["id", 121]]
  [1m[36mTenant Load (0.3ms)[0m  [1mSELECT  `tenants`.* FROM `tenants`  WHERE `tenants`.`tenant_name` = 'Elan University1131'  ORDER BY `tenants`.`id` ASC LIMIT 1[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE `lti2_tp_registrations` SET `end_registration_id` = '442e6cc0-cd82-0132-5377-20c9d07c6451', `proposed_tool_proxy_json` = '{\"@context\":[\"http://purl.imsglobal.org/ctx/lti/v2/ToolConsumerProfile\",{\"ltitcp\":\"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/13efb090-ccde-0132-5374-20c9d07c6451#\"}],\"@type\":\"ToolProxy\",\"@id\":\"ToolProxyProposal_at_2015-04-25T14:07:00Z\",\"lti_version\":\"LTI-2p0\",\"tool_proxy_guid\":\"13efae70-ccde-0132-5374-20c9d07c6451\",\"tool_consumer_profile\":\"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/13efb090-ccde-0132-5374-20c9d07c6451\",\"tool_profile\":{\"base_url_choice\":[{\"default_base_url\":\"http://rails.kinexis.com:5000\",\"selector\":{\"applies_to\":[\"IconEndpoint\",\"MessageHandler\"]}}],\"lti_version\":\"LTI-2p0\",\"message\":[{\"message_type\":[\"ToolProxyRegistrationRequest\",\"ToolProxyReregistrationRequest\"],\"parameter\":[{\"name\":\"tc_profile_url\",\"variable\":\"ToolConsumerProfile.url\"}],\"path\":\"http://rails.kinexis.com:5000/lti2_tp/reregistrations\"}],\"product_instance\":{\"guid\":\"fd75124a-140e-470f-944c-114d2d92bb40\",\"product_info\":{\"description\":{\"default_value\":\"Fabericious reflowable ePub3 Textbook\",\"key\":\"tool.description\"},\"product_family\":{\"code\":\"assessment-tool\",\"vendor\":{\"code\":\"fabericious.org\",\"contact\":{\"email\":\"info@fabericious.com\"},\"description\":{\"default_value\":\"Fabericious is a leading provider of interactive tools for education\",\"key\":\"tool.vendor.description\"},\"vendor_name\":{\"default_value\":\"Fab\",\"key\":\"tool.vendor.name\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\",\"website\":\"{http://rails.kinexis.com:5000}\"}},\"product_name\":{\"default_value\":\"LTI2 BookTools\",\"key\":\"tool.name\"},\"product_version\":\"10.3\",\"technical_description\":{\"default_value\":\"Support provided for all LTI 1 extensions as well as LTI 2\",\"key\":\"tool.technical\"}},\"service_provider\":{\"description\":{\"default_value\":\"Provider of high performance managed hosting environments\",\"key\":\"service_provider.description\"},\"guid\":\"18e7ea50-3d6d-4f6b-aff2-ed3ab577716c\",\"service_provider_name\":{\"default_value\":\"Amazon Cloud\",\"key\":\"service_provider.name\"},\"support\":{\"email\":\"support@ec2.fabericious.com\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\"},\"support\":{\"email\":\"helpdesk@fabericious.com\"}},\"resource_handler\":[{\"description\":{\"default_value\":\"Settings service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"tool_proxy_custom_url\",\"variable\":\"ToolProxy.custom.url\"},{\"name\":\"tool_proxy_binding_custom_url\",\"variable\":\"ToolProxyBinding.custom.url\"},{\"name\":\"lti_link_custom_url\",\"variable\":\"LtiLink.custom.url\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"ToolProxy.custom.url\",\"ToolProxyBinding.custom.url\",\"LtiLink.custom.url\"],\"path\":\"/settings\"}],\"resource_name\":{\"default_value\":\"Settings\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"setting\"}},{\"description\":{\"default_value\":\"Echo service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"fixed\":\"Narcissus\",\"name\":\"referrer\"},{\"fixed\":\"3.14159\",\"name\":\"pi\"},{\"name\":\"user_primary_email\",\"variable\":\"Person.email.primary\"},{\"name\":\"discipline\",\"variable\":\"CourseOffering.label\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\"],\"path\":\"/echoes\"}],\"resource_name\":{\"default_value\":\"Echo\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"echo\"}},{\"description\":{\"default_value\":\"Interactive resource\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"vbid\"},{\"name\":\"result_uri\",\"variable\":\"Result.uri\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"Result.autocreate\"],\"path\":\"/iresources\"}],\"resource_name\":{\"default_value\":\"InteractiveResource\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"iresource\"}}],\"service_offered\":[{\"@id\":\"http://rails.kinexis.com:5000/lti2_tp/ToolProxy.collection\",\"@type\":\"RestService\",\"action\":[\"PUT\"],\"endpoint\":\"http://rails.kinexis.com:5000/lti2_tp/tool_proxies\",\"format\":[\"\"]}]},\"security_contract\":{\"shared_secret\":\"706ab044290d2a34517f296a070b1c8c\",\"tool_service\":[{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxy.collection\",\"action\":[\"POST\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxy.item\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:Result.item\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:LtiLinkSettings\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxyBindingSettings\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxySettings\",\"action\":[\"GET\",\"PUT\"]}]}}', `updated_at` = '2015-04-25 14:07:00' WHERE `lti2_tp_registrations`.`id` = 121[0m
  [1m[35m (11.8ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE `lti2_tp_registrations` SET `status` = 'reregistered', `updated_at` = '2015-04-25 14:07:00' WHERE `lti2_tp_registrations`.`id` = 121
  [1m[36m (11.5ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.5ms)[0m  BEGIN
  [1m[36mTenant Exists (12.7ms)[0m  [1mSELECT  1 AS one FROM `tenants`  WHERE (`tenants`.`tenant_name` = BINARY 'Elan University1131' AND `tenants`.`id` != 117) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  COMMIT
Redirected to http://rails.kinexis.com:5000/lti2_tp/registrations?status=success&&id=121
Completed 302 Found in 120ms (ActiveRecord: 39.1ms)


Started GET "/lti2_tp/registrations?status=success&&id=121" for 127.0.0.1 at 2015-04-25 07:07:01 -0700
Processing by Lti2Tp::RegistrationsController#index as HTML
  Parameters: {"status"=>"success", "id"=>"121"}
  [1m[36mLti2Tp::Registration Load (0.5ms)[0m  [1mSELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 121 LIMIT 1[0m
Redirected to http://rails.kinexis.com:4000/admin/tool_actions?status=success
Completed 302 Found in 2ms (ActiveRecord: 0.5ms)


Started PUT "/lti2_tp/tool_proxies/13efae70-ccde-0132-5374-20c9d07c6451?correlation=442e6cc0-cd82-0132-5377-20c9d07c6451" for 127.0.0.1 at 2015-04-25 07:07:03 -0700
Processing by Lti2Tp::RegistrationsController#complete_reregistration as HTML
  Parameters: {"correlation"=>"442e6cc0-cd82-0132-5377-20c9d07c6451", "id"=>"13efae70-ccde-0132-5374-20c9d07c6451"}
Can't verify CSRF token authenticity
AuthHdr_Parms: {:oauth_consumer_key=>"13efae70-ccde-0132-5374-20c9d07c6451", :oauth_nonce=>"7740033963729", :oauth_signature_method=>"HMAC-SHA1", :oauth_timestamp=>"1429970823", :oauth_version=>"1.0", :oauth_callback=>"about:blank", :oauth_signature=>"y9SX9d1v4rYpDkoSFPgBKvm5JHc="}
  [1m[35mTenant Load (0.3ms)[0m  SELECT  `tenants`.* FROM `tenants`  WHERE `tenants`.`tenant_key` = '13efae70-ccde-0132-5374-20c9d07c6451'  ORDER BY `tenants`.`id` ASC LIMIT 1
  [1m[36mLti2Tp::Registration Load (0.3ms)[0m  [1mSELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`tenant_id` = 117  ORDER BY `lti2_tp_registrations`.`id` ASC LIMIT 1[0m
AuthHdr_Parms: {:oauth_consumer_key=>"13efae70-ccde-0132-5374-20c9d07c6451", :oauth_nonce=>"7740033963729", :oauth_signature_method=>"HMAC-SHA1", :oauth_timestamp=>"1429970823", :oauth_version=>"1.0", :oauth_callback=>"about:blank", :oauth_signature=>"y9SX9d1v4rYpDkoSFPgBKvm5JHc="}
in verify_signature
  [1m[35mLti2Tp::Registration Load (6.8ms)[0m  SELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`tenant_name` = 'Elan University1131'  ORDER BY `lti2_tp_registrations`.`id` ASC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`tenant_id` = 117  ORDER BY `lti2_tp_registrations`.`id` ASC LIMIT 1[0m
  [1m[35mTenant Load (0.7ms)[0m  SELECT  `tenants`.* FROM `tenants`  WHERE `tenants`.`id` = 117 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mTenant Exists (0.8ms)[0m  SELECT  1 AS one FROM `tenants`  WHERE (`tenants`.`tenant_name` = BINARY 'Elan University1131' AND `tenants`.`id` != 117) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE `tenants` SET `secret` = '706ab044290d2a34517f296a070b1c8c', `updated_at` = '2015-04-25 14:07:03' WHERE `tenants`.`id` = 117[0m
  [1m[35m (0.3ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  UPDATE `lti2_tp_registrations` SET `end_registration_id` = NULL, `proposed_tool_proxy_json` = NULL, `reg_password` = '706ab044290d2a34517f296a070b1c8c', `tool_proxy_json` = '{\"@context\":[\"http://purl.imsglobal.org/ctx/lti/v2/ToolConsumerProfile\",{\"ltitcp\":\"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/13efb090-ccde-0132-5374-20c9d07c6451#\"}],\"@type\":\"ToolProxy\",\"@id\":\"ToolProxyProposal_at_2015-04-25T14:07:00Z\",\"lti_version\":\"LTI-2p0\",\"tool_proxy_guid\":\"13efae70-ccde-0132-5374-20c9d07c6451\",\"tool_consumer_profile\":\"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/13efb090-ccde-0132-5374-20c9d07c6451\",\"tool_profile\":{\"base_url_choice\":[{\"default_base_url\":\"http://rails.kinexis.com:5000\",\"selector\":{\"applies_to\":[\"IconEndpoint\",\"MessageHandler\"]}}],\"lti_version\":\"LTI-2p0\",\"message\":[{\"message_type\":[\"ToolProxyRegistrationRequest\",\"ToolProxyReregistrationRequest\"],\"parameter\":[{\"name\":\"tc_profile_url\",\"variable\":\"ToolConsumerProfile.url\"}],\"path\":\"http://rails.kinexis.com:5000/lti2_tp/reregistrations\"}],\"product_instance\":{\"guid\":\"fd75124a-140e-470f-944c-114d2d92bb40\",\"product_info\":{\"description\":{\"default_value\":\"Fabericious reflowable ePub3 Textbook\",\"key\":\"tool.description\"},\"product_family\":{\"code\":\"assessment-tool\",\"vendor\":{\"code\":\"fabericious.org\",\"contact\":{\"email\":\"info@fabericious.com\"},\"description\":{\"default_value\":\"Fabericious is a leading provider of interactive tools for education\",\"key\":\"tool.vendor.description\"},\"vendor_name\":{\"default_value\":\"Fab\",\"key\":\"tool.vendor.name\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\",\"website\":\"{http://rails.kinexis.com:5000}\"}},\"product_name\":{\"default_value\":\"LTI2 BookTools\",\"key\":\"tool.name\"},\"product_version\":\"10.3\",\"technical_description\":{\"default_value\":\"Support provided for all LTI 1 extensions as well as LTI 2\",\"key\":\"tool.technical\"}},\"service_provider\":{\"description\":{\"default_value\":\"Provider of high performance managed hosting environments\",\"key\":\"service_provider.description\"},\"guid\":\"18e7ea50-3d6d-4f6b-aff2-ed3ab577716c\",\"service_provider_name\":{\"default_value\":\"Amazon Cloud\",\"key\":\"service_provider.name\"},\"support\":{\"email\":\"support@ec2.fabericious.com\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\"},\"support\":{\"email\":\"helpdesk@fabericious.com\"}},\"resource_handler\":[{\"description\":{\"default_value\":\"Settings service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"tool_proxy_custom_url\",\"variable\":\"ToolProxy.custom.url\"},{\"name\":\"tool_proxy_binding_custom_url\",\"variable\":\"ToolProxyBinding.custom.url\"},{\"name\":\"lti_link_custom_url\",\"variable\":\"LtiLink.custom.url\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"ToolProxy.custom.url\",\"ToolProxyBinding.custom.url\",\"LtiLink.custom.url\"],\"path\":\"/settings\"}],\"resource_name\":{\"default_value\":\"Settings\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"setting\"}},{\"description\":{\"default_value\":\"Echo service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"fixed\":\"Narcissus\",\"name\":\"referrer\"},{\"fixed\":\"3.14159\",\"name\":\"pi\"},{\"name\":\"user_primary_email\",\"variable\":\"Person.email.primary\"},{\"name\":\"discipline\",\"variable\":\"CourseOffering.label\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\"],\"path\":\"/echoes\"}],\"resource_name\":{\"default_value\":\"Echo\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"echo\"}},{\"description\":{\"default_value\":\"Interactive resource\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"vbid\"},{\"name\":\"result_uri\",\"variable\":\"Result.uri\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"Result.autocreate\"],\"path\":\"/iresources\"}],\"resource_name\":{\"default_value\":\"InteractiveResource\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"iresource\"}}],\"service_offered\":[{\"@id\":\"http://rails.kinexis.com:5000/lti2_tp/ToolProxy.collection\",\"@type\":\"RestService\",\"action\":[\"PUT\"],\"endpoint\":\"http://rails.kinexis.com:5000/lti2_tp/tool_proxies\",\"format\":[\"\"]}]},\"security_contract\":{\"shared_secret\":\"706ab044290d2a34517f296a070b1c8c\",\"tool_service\":[{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxy.collection\",\"action\":[\"POST\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxy.item\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:Result.item\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:LtiLinkSettings\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxyBindingSettings\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxySettings\",\"action\":[\"GET\",\"PUT\"]}]}}', `updated_at` = '2015-04-25 14:07:03' WHERE `lti2_tp_registrations`.`id` = 121
  [1m[36m (2.2ms)[0m  [1mCOMMIT[0m
"reregistration complete for 13efae70-ccde-0132-5374-20c9d07c6451"
  Rendered text template (0.0ms)
Completed 200 OK in 64ms (Views: 3.4ms | ActiveRecord: 13.1ms)


Started POST "/settings" for 127.0.0.1 at 2015-04-25 07:07:43 -0700
Processing by SettingsController#create as HTML
  Parameters: {"lti_version"=>"LTI-2p0", "lti_message_type"=>"basic-lti-launch-request", "resource_link_id"=>"2416", "user_id"=>"2", "roles"=>"Instructor", "launch_presentation_return_url"=>"http://rails.kinexis.com:4000/admin/course_page?method=show&course_id=2", "launch_presentation_document_target"=>"window", "context_id"=>"2", "launch_presentation_locale"=>"en_US", "context_label"=>"SMPL101A", "context_title"=>"Nursing Compendium", "lis_course_section_sourcedid"=>"2", "tool_consumer_info_product_family_code"=>"LuMoS", "tool_consumer_info_version"=>"3.1", "custom_tool_proxy_custom_url"=>"http://rails.kinexis.com:4000/lti2_tc/tool_settings/13efae70-ccde-0132-5374-20c9d07c6451", "custom_tool_proxy_binding_custom_url"=>"http://rails.kinexis.com:4000/lti2_tc/tool_settings/13efae70-ccde-0132-5374-20c9d07c6451/context/2", "custom_lti_link_custom_url"=>"http://rails.kinexis.com:4000/lti2_tc/tool_settings/13efae70-ccde-0132-5374-20c9d07c6451/ltilink/2416", "custom_tp"=>"1131", "oauth_consumer_key"=>"13efae70-ccde-0132-5374-20c9d07c6451", "oauth_nonce"=>"7911439826005", "oauth_signature_method"=>"HMAC-SHA1", "oauth_timestamp"=>"1429970862", "oauth_version"=>"1.0", "oauth_callback"=>"about:blank", "oauth_signature"=>"8/UBfFAJql0Rd4v3TCTZPsj9LWs="}
Can't verify CSRF token authenticity
PrePreProcessTenant
AuthHdr_Parms: {}
  [1m[35mTenant Load (0.3ms)[0m  SELECT  `tenants`.* FROM `tenants`  WHERE `tenants`.`tenant_key` = '13efae70-ccde-0132-5374-20c9d07c6451'  ORDER BY `tenants`.`id` ASC LIMIT 1
  [1m[36mLti2Tp::Registration Load (0.4ms)[0m  [1mSELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`tenant_id` = 117  ORDER BY `lti2_tp_registrations`.`id` ASC LIMIT 1[0m
AuthHdr_Parms: {}
in verify_signature
  Rendered inline template (0.4ms)
Completed 200 OK in 62ms (Views: 0.9ms | ActiveRecord: 0.7ms)


Started POST "/settings" for 127.0.0.1 at 2015-04-25 07:07:46 -0700
Processing by SettingsController#create as HTML
  Parameters: {"registration_id"=>"121", "custom_tool_proxy_custom_url"=>"http://rails.kinexis.com:4000/lti2_tc/tool_settings/13efae70-ccde-0132-5374-20c9d07c6451", "custom_tool_proxy_binding_custom_url"=>"http://rails.kinexis.com:4000/lti2_tc/tool_settings/13efae70-ccde-0132-5374-20c9d07c6451/context/2", "custom_lti_link_custom_url"=>"http://rails.kinexis.com:4000/lti2_tc/tool_settings/13efae70-ccde-0132-5374-20c9d07c6451/ltilink/2416", "toolproxy"=>"tp=1131", "toolproxybinding"=>"", "ltilink"=>""}
Can't verify CSRF token authenticity
  [1m[35mLti2Tp::Registration Load (0.5ms)[0m  SELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 121 LIMIT 1
  [1m[36mTenant Load (0.4ms)[0m  [1mSELECT  `tenants`.* FROM `tenants`  WHERE `tenants`.`id` = 117 LIMIT 1[0m
  Rendered text template (0.1ms)
Completed 200 OK in 206ms (Views: 1.2ms | ActiveRecord: 0.9ms)


Started POST "/lti2_tp/registrations" for 127.0.0.1 at 2015-04-25 07:08:04 -0700
Processing by Lti2Tp::RegistrationsController#create as HTML
  Parameters: {"lti_message_type"=>"ToolProxyRegistrationRequest", "lti_version"=>"LTI-2p0", "user_id"=>"2", "roles"=>"urn:lti:sysrole:ims/lis/SysAdmin", "tc_profile_url"=>"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/66ff6c30-cd82-0132-5378-20c9d07c6451", "reg_key"=>"66ff6a00-cd82-0132-5378-20c9d07c6451", "reg_password"=>"[FILTERED]", "launch_presentation_return_url"=>"http://rails.kinexis.com:4000/admin/tool_actions", "launch_presentation_document_target"=>"window"}
  [1m[35mLti2Tp::Tool Load (0.3ms)[0m  SELECT  `lti2_tp_tools`.* FROM `lti2_tp_tools`   ORDER BY `lti2_tp_tools`.`id` ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (6.5ms)[0m  INSERT INTO `lti2_tp_registrations` (`created_at`, `launch_presentation_return_url`, `lti_version`, `message_type`, `reg_key`, `reg_password`, `status`, `tc_profile_url`, `tenant_basename`, `tenant_name`, `tool_consumer_profile_json`, `tool_id`, `tool_profile_json`, `updated_at`, `user_id`) VALUES ('2015-04-25 14:08:05', 'http://rails.kinexis.com:4000/admin/tool_actions', 'LTI-2p0', 'registration', '66ff6a00-cd82-0132-5378-20c9d07c6451', '325b68ff74e40e4b570eef8f2ac65f4f', 'received', 'http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/66ff6c30-cd82-0132-5378-20c9d07c6451', 'Elan University', 'Elan University', '{\"@context\":[\"http://purl.imsglobal.org/ctx/lti/v2/ToolConsumerProfile\",{\"ltitcp\":\"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/13efb090-ccde-0132-5374-20c9d07c6451#\"}],\"@type\":\"ToolConsumerProfile\",\"@id\":\"http://rails.kinexis.com:4000/tool_consumer_profiles/13efb090-ccde-0132-5374-20c9d07c6451\",\"lti_version\":\"LTI-2p0\",\"guid\":\"66ff6c30-cd82-0132-5378-20c9d07c6451\",\"product_instance\":{\"guid\":\"dcddf9808107-81ea-eaa4-1edf-5d24568c\",\"product_info\":{\"product_name\":{\"default_value\":\"Elan/LuMoS\",\"key\":\"product.name\"},\"product_version\":\"3.1\",\"description\":{\"default_value\":\"Elan University/LuMoS Learning Platform\",\"key\":\"product.version\"},\"technical_description\":{\"default_value\":\"LTI 1, 1.1 and 2.0 compliant\",\"key\":\"product.technicalDescription\"},\"product_family\":{\"code\":\"LuMoS\",\"vendor\":{\"code\":\"lms.LuMoS.org\",\"vendor_name\":{\"default_value\":\"LuMoS Corporation\",\"key\":\"product.vendor.name\"},\"description\":{\"default_value\":\"LuMoS Corporation is a fictitious vendor of a Learning Management System\",\"key\":\"product.vendor.description\"},\"website\":\"http://lms.LuMoS.org/products/omega\",\"timestamp\":\"2012-07-09T012:08:16-04:00\",\"contact\":{\"email\":\"support@lms.LuMoS.org\"}}}},\"support\":{\"email\":\"john.tibbetts@kinexis.com\"},\"service_owner\":{\"@id\":\"http://ec2.LuMoS.org/ServiceOwner\",\"timestamp\":\"2012-03-28T09:08:16-04:00\",\"service_owner_name\":{\"default_value\":\"Elan University\",\"key\":\"service_owner.name\"},\"description\":{\"default_value\":\"Elan University EC2 Cloud\",\"key\":\"service_owner.description\"},\"support\":{\"email\":\"techsupport@elan.edu\"}},\"service_provider\":{\"@id\":\"http://ec2.LuMoS.org/ServiceProvider\",\"guid\":\"ec2.LuMoS.org\",\"timestamp\":\"2012-07-09T012:08:16-04:00\",\"service_provider_name\":{\"default_value\":\"Elan University\",\"key\":\"service_provider.name\"},\"description\":{\"default_value\":\"Elan University EC2 Cloud\",\"key\":\"service_provider.description\"},\"support\":{\"email\":\"support@yasp.LuMoS.org\"}}},\"capability_offered\":[\"basic-lti-launch-request\",\"Result.autocreate\",\"Result.sourcedId\",\"User.id\",\"User.username\",\"CourseSection.sourcedId\",\"Person.sourcedId\",\"Person.email.primary\",\"Person.name.given\",\"Person.name.family\",\"Person.name.full\",\"Membership.role\",\"ToolProxy.custom.url\",\"ToolProxyBinding.custom.url\",\"LtiLink.custom.url\",\"ToolConsumerProfile.url\"],\"service_offered\":[{\"@type\":\"RestService\",\"@id\":\"ltitcp:ToolProxy.collection\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tools\",\"format\":[\"application/vnd.ims.lti.v2.toolproxy+json\"],\"action\":[\"POST\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:ToolProxy.item\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tools/{tool_proxy_guid}\",\"format\":[\"application/vnd.ims.lti.v2.toolproxy+json\"],\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:Result.item\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/resources/Result/{sourcedId}\",\"format\":[\"application/vnd.ims.lis.v2.result+json\"],\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:LtiLinkSettings\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tool_settings/{tool_proxy_guid}/ltilink/{link_id}\",\"format\":[\"application/vnd.ims.lti.v2.toolsettings+json\",\"application/vnd.ims.lti.v2.toolsettings.simple+json\"],\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:ToolProxyBindingSettings\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tool_settings/{tool_proxy_guid}/context/{context_id}\",\"format\":[\"application/vnd.ims.lti.v2.toolsettings+json\",\"application/vnd.ims.lti.v2.toolsettings.simple+json\"],\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:ToolProxySettings\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tool_settings/{tool_proxy_guid}\",\"format\":[\"application/vnd.ims.lti.v2.toolsettings+json\",\"application/vnd.ims.lti.v2.toolsettings.simple+json\"],\"action\":[\"GET\",\"PUT\"]}]}', 2, '{\"base_url_choice\":[{\"default_base_url\":\"http://rails.kinexis.com:5000\",\"selector\":{\"applies_to\":[\"IconEndpoint\",\"MessageHandler\"]}}],\"lti_version\":\"LTI-2p0\",\"message\":[{\"message_type\":[\"ToolProxyRegistrationRequest\",\"ToolProxyReregistrationRequest\"],\"parameter\":[{\"name\":\"tc_profile_url\",\"variable\":\"ToolConsumerProfile.url\"}],\"path\":\"http://rails.kinexis.com:5000/lti2_tp/reregistrations\"}],\"product_instance\":{\"guid\":\"fd75124a-140e-470f-944c-114d2d92bb40\",\"product_info\":{\"description\":{\"default_value\":\"Fabericious reflowable ePub3 Textbook\",\"key\":\"tool.description\"},\"product_family\":{\"code\":\"assessment-tool\",\"vendor\":{\"code\":\"fabericious.org\",\"contact\":{\"email\":\"info@fabericious.com\"},\"description\":{\"default_value\":\"Fabericious is a leading provider of interactive tools for education\",\"key\":\"tool.vendor.description\"},\"vendor_name\":{\"default_value\":\"Fab\",\"key\":\"tool.vendor.name\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\",\"website\":\"{http://rails.kinexis.com:5000}\"}},\"product_name\":{\"default_value\":\"LTI2 BookTools\",\"key\":\"tool.name\"},\"product_version\":\"10.3\",\"technical_description\":{\"default_value\":\"Support provided for all LTI 1 extensions as well as LTI 2\",\"key\":\"tool.technical\"}},\"service_provider\":{\"description\":{\"default_value\":\"Provider of high performance managed hosting environments\",\"key\":\"service_provider.description\"},\"guid\":\"18e7ea50-3d6d-4f6b-aff2-ed3ab577716c\",\"service_provider_name\":{\"default_value\":\"Amazon Cloud\",\"key\":\"service_provider.name\"},\"support\":{\"email\":\"support@ec2.fabericious.com\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\"},\"support\":{\"email\":\"helpdesk@fabericious.com\"}},\"resource_handler\":[{\"description\":{\"default_value\":\"Settings service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"tool_proxy_custom_url\",\"variable\":\"ToolProxy.custom.url\"},{\"name\":\"tool_proxy_binding_custom_url\",\"variable\":\"ToolProxyBinding.custom.url\"},{\"name\":\"lti_link_custom_url\",\"variable\":\"LtiLink.custom.url\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"ToolProxy.custom.url\",\"ToolProxyBinding.custom.url\",\"LtiLink.custom.url\"],\"path\":\"/settings\"}],\"resource_name\":{\"default_value\":\"Settings\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"setting\"}},{\"description\":{\"default_value\":\"Echo service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"fixed\":\"Narcissus\",\"name\":\"referrer\"},{\"fixed\":\"3.14159\",\"name\":\"pi\"},{\"name\":\"user_primary_email\",\"variable\":\"Person.email.primary\"},{\"name\":\"discipline\",\"variable\":\"CourseOffering.label\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\"],\"path\":\"/echoes\"}],\"resource_name\":{\"default_value\":\"Echo\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"echo\"}},{\"description\":{\"default_value\":\"Interactive resource\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"vbid\"},{\"name\":\"result_uri\",\"variable\":\"Result.uri\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"Result.autocreate\"],\"path\":\"/iresources\"}],\"resource_name\":{\"default_value\":\"InteractiveResource\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"iresource\"}}],\"service_offered\":[{\"@id\":\"http://rails.kinexis.com:5000/lti2_tp/ToolProxy.collection\",\"@type\":\"RestService\",\"action\":[\"PUT\"],\"endpoint\":\"http://rails.kinexis.com:5000/lti2_tp/tool_proxies\",\"format\":[\"\"]}]}', '2015-04-25 14:08:05', '2')
  [1m[36m (8.3ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:5000/lti_registration_wips?registration_id=122&return_url=/lti2_tp/registrations
Completed 302 Found in 116ms (ActiveRecord: 15.3ms)


Started GET "/lti_registration_wips?registration_id=122&return_url=/lti2_tp/registrations" for 127.0.0.1 at 2015-04-25 07:08:05 -0700
Processing by LtiRegistrationWipsController#index as HTML
  Parameters: {"registration_id"=>"122", "return_url"=>"/lti2_tp/registrations"}
  [1m[35mLti2Tp::Registration Load (0.3ms)[0m  SELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 122 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO `lti_registration_wips` (`created_at`, `product_name`, `registration_id`, `registration_return_url`, `support_email`, `tenant_name`, `updated_at`) VALUES ('2015-04-25 14:08:05', 'Elan/LuMoS', 122, '/lti2_tp/registrations', 'john.tibbetts@kinexis.com', 'Elan University', '2015-04-25 14:08:05')
  [1m[36m (11.2ms)[0m  [1mCOMMIT[0m
  Rendered lti_registration_wips/_form.html.haml (13.4ms)
  Rendered lti_registration_wips/index.html.haml within layouts/application (14.8ms)
Completed 200 OK in 53ms (Views: 35.2ms | ActiveRecord: 12.4ms)


Started PATCH "/lti_registration_wips/213" for 127.0.0.1 at 2015-04-25 07:08:10 -0700
Processing by LtiRegistrationWipsController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"M43il2V3jEVaEPp6JXt1mmJv07NVYlbO1a58pW42DXs=", "lti_registration_wip"=>{"support_email"=>"john.tibbetts@kinexis.com", "product_name"=>"Elan/LuMoS", "tenant_name"=>"Elan University708"}, "commit"=>"Update Lti registration wip", "id"=>"213"}
  [1m[35mLtiRegistrationWip Load (0.3ms)[0m  SELECT  `lti_registration_wips`.* FROM `lti_registration_wips`  WHERE `lti_registration_wips`.`id` = 213 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE `lti_registration_wips` SET `tenant_name` = 'Elan University708', `updated_at` = '2015-04-25 14:08:10' WHERE `lti_registration_wips`.`id` = 213
  [1m[36m (6.2ms)[0m  [1mCOMMIT[0m
  [1m[35mLti2Tp::Registration Load (0.5ms)[0m  SELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 122 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE `lti2_tp_registrations` SET `tenant_name` = 'Elan University708', `updated_at` = '2015-04-25 14:08:10' WHERE `lti2_tp_registrations`.`id` = 122
  [1m[36m (6.4ms)[0m  [1mCOMMIT[0m
  [1m[35mLtiRegistrationWip Load (0.3ms)[0m  SELECT  `lti_registration_wips`.* FROM `lti_registration_wips`  WHERE `lti_registration_wips`.`id` = 213 LIMIT 1
  [1m[36mLti2Tp::Registration Load (0.2ms)[0m  [1mSELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 122 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mTenant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `tenants`  WHERE `tenants`.`tenant_name` = BINARY 'Elan University708' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `tenants` (`created_at`, `tenant_name`, `updated_at`) VALUES ('2015-04-25 14:08:10', 'Elan University708', '2015-04-25 14:08:10')
  [1m[36m (0.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE `lti2_tp_registrations` SET `end_registration_id` = '6dbcf580-cd82-0132-5377-20c9d07c6451', `tool_proxy_json` = '{\"@context\":[\"http://purl.imsglobal.org/ctx/lti/v2/ToolConsumerProfile\",{\"ltitcp\":\"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/13efb090-ccde-0132-5374-20c9d07c6451#\"}],\"@type\":\"ToolProxy\",\"@id\":\"ToolProxyProposal_at_2015-04-25T14:08:10Z\",\"lti_version\":\"LTI-2p0\",\"tool_proxy_guid\":\"66ff6a00-cd82-0132-5378-20c9d07c6451\",\"tool_consumer_profile\":\"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/66ff6c30-cd82-0132-5378-20c9d07c6451\",\"tool_profile\":{\"base_url_choice\":[{\"default_base_url\":\"http://rails.kinexis.com:5000\",\"selector\":{\"applies_to\":[\"IconEndpoint\",\"MessageHandler\"]}}],\"lti_version\":\"LTI-2p0\",\"message\":[{\"message_type\":[\"ToolProxyRegistrationRequest\",\"ToolProxyReregistrationRequest\"],\"parameter\":[{\"name\":\"tc_profile_url\",\"variable\":\"ToolConsumerProfile.url\"}],\"path\":\"http://rails.kinexis.com:5000/lti2_tp/reregistrations\"}],\"product_instance\":{\"guid\":\"fd75124a-140e-470f-944c-114d2d92bb40\",\"product_info\":{\"description\":{\"default_value\":\"Fabericious reflowable ePub3 Textbook\",\"key\":\"tool.description\"},\"product_family\":{\"code\":\"assessment-tool\",\"vendor\":{\"code\":\"fabericious.org\",\"contact\":{\"email\":\"info@fabericious.com\"},\"description\":{\"default_value\":\"Fabericious is a leading provider of interactive tools for education\",\"key\":\"tool.vendor.description\"},\"vendor_name\":{\"default_value\":\"Fab\",\"key\":\"tool.vendor.name\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\",\"website\":\"{http://rails.kinexis.com:5000}\"}},\"product_name\":{\"default_value\":\"LTI2 BookTools\",\"key\":\"tool.name\"},\"product_version\":\"10.3\",\"technical_description\":{\"default_value\":\"Support provided for all LTI 1 extensions as well as LTI 2\",\"key\":\"tool.technical\"}},\"service_provider\":{\"description\":{\"default_value\":\"Provider of high performance managed hosting environments\",\"key\":\"service_provider.description\"},\"guid\":\"18e7ea50-3d6d-4f6b-aff2-ed3ab577716c\",\"service_provider_name\":{\"default_value\":\"Amazon Cloud\",\"key\":\"service_provider.name\"},\"support\":{\"email\":\"support@ec2.fabericious.com\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\"},\"support\":{\"email\":\"helpdesk@fabericious.com\"}},\"resource_handler\":[{\"description\":{\"default_value\":\"Settings service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"tool_proxy_custom_url\",\"variable\":\"ToolProxy.custom.url\"},{\"name\":\"tool_proxy_binding_custom_url\",\"variable\":\"ToolProxyBinding.custom.url\"},{\"name\":\"lti_link_custom_url\",\"variable\":\"LtiLink.custom.url\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"ToolProxy.custom.url\",\"ToolProxyBinding.custom.url\",\"LtiLink.custom.url\"],\"path\":\"/settings\"}],\"resource_name\":{\"default_value\":\"Settings\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"setting\"}},{\"description\":{\"default_value\":\"Echo service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"fixed\":\"Narcissus\",\"name\":\"referrer\"},{\"fixed\":\"3.14159\",\"name\":\"pi\"},{\"name\":\"user_primary_email\",\"variable\":\"Person.email.primary\"},{\"name\":\"discipline\",\"variable\":\"CourseOffering.label\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\"],\"path\":\"/echoes\"}],\"resource_name\":{\"default_value\":\"Echo\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"echo\"}},{\"description\":{\"default_value\":\"Interactive resource\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"vbid\"},{\"name\":\"result_uri\",\"variable\":\"Result.uri\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"Result.autocreate\"],\"path\":\"/iresources\"}],\"resource_name\":{\"default_value\":\"InteractiveResource\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"iresource\"}}],\"service_offered\":[{\"@id\":\"http://rails.kinexis.com:5000/lti2_tp/ToolProxy.collection\",\"@type\":\"RestService\",\"action\":[\"PUT\"],\"endpoint\":\"http://rails.kinexis.com:5000/lti2_tp/tool_proxies\",\"format\":[\"\"]}]},\"security_contract\":{\"shared_secret\":\"0375489430051f0f18cabb61e27992a3\",\"tool_service\":[{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxy.collection\",\"action\":[\"POST\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxy.item\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:Result.item\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:LtiLinkSettings\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxyBindingSettings\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxySettings\",\"action\":[\"GET\",\"PUT\"]}]}}', `updated_at` = '2015-04-25 14:08:10' WHERE `lti2_tp_registrations`.`id` = 122[0m
  [1m[35m (5.0ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE `lti2_tp_registrations` SET `status` = 'register', `updated_at` = '2015-04-25 14:08:10' WHERE `lti2_tp_registrations`.`id` = 122
  [1m[36m (6.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mTenant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `tenants`  WHERE (`tenants`.`tenant_name` = BINARY 'Elan University708' AND `tenants`.`id` != 118) LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE `tenants` SET `secret` = '0375489430051f0f18cabb61e27992a3', `tenant_key` = '66ff6a00-cd82-0132-5378-20c9d07c6451', `updated_at` = '2015-04-25 14:08:10' WHERE `tenants`.`id` = 118
  [1m[36m (6.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (6.8ms)[0m  [1mUPDATE `lti2_tp_registrations` SET `tenant_id` = 118, `updated_at` = '2015-04-25 14:08:10' WHERE `lti2_tp_registrations`.`id` = 122[0m
  [1m[35m (0.3ms)[0m  COMMIT
Redirected to http://localhost:5000/lti2_tp/registrations?status=success&tool_guid=66ff6a00-cd82-0132-5378-20c9d07c6451&&id=122
Completed 302 Found in 213ms (ActiveRecord: 41.8ms)


Started GET "/lti2_tp/registrations?status=success&tool_guid=66ff6a00-cd82-0132-5378-20c9d07c6451&&id=122" for 127.0.0.1 at 2015-04-25 07:08:10 -0700
Processing by Lti2Tp::RegistrationsController#index as HTML
  Parameters: {"status"=>"success", "tool_guid"=>"66ff6a00-cd82-0132-5378-20c9d07c6451", "id"=>"122"}
  [1m[36mLti2Tp::Registration Load (0.4ms)[0m  [1mSELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 122 LIMIT 1[0m
Redirected to http://rails.kinexis.com:4000/admin/tool_actions?status=success&tool_guid=66ff6a00-cd82-0132-5378-20c9d07c6451
Completed 302 Found in 2ms (ActiveRecord: 0.4ms)


Started POST "/echoes" for 127.0.0.1 at 2015-04-25 07:08:21 -0700
Processing by EchoesController#create as HTML
  Parameters: {"lti_version"=>"LTI-2p0", "lti_message_type"=>"basic-lti-launch-request", "resource_link_id"=>"2428", "user_id"=>"2", "roles"=>"Instructor", "launch_presentation_return_url"=>"http://rails.kinexis.com:4000/admin/course_page?method=show&course_id=2", "launch_presentation_document_target"=>"window", "context_id"=>"2", "launch_presentation_locale"=>"en_US", "context_label"=>"SMPL101A", "context_title"=>"Nursing Compendium", "lis_course_section_sourcedid"=>"2", "tool_consumer_info_product_family_code"=>"LuMoS", "tool_consumer_info_version"=>"3.1", "custom_referrer"=>"Narcissus", "custom_pi"=>"3.14159", "custom_user_primary_email"=>"admin@lumos.org", "custom_discipline"=>"SMPL101A", "oauth_consumer_key"=>"66ff6a00-cd82-0132-5378-20c9d07c6451", "oauth_nonce"=>"9556017819982", "oauth_signature_method"=>"HMAC-SHA1", "oauth_timestamp"=>"1429970901", "oauth_version"=>"1.0", "oauth_callback"=>"about:blank", "oauth_signature"=>"2SuteKSkKNtqhwwupgVhmxPO0zc="}
Can't verify CSRF token authenticity
AuthHdr_Parms: {}
  [1m[35mTenant Load (0.3ms)[0m  SELECT  `tenants`.* FROM `tenants`  WHERE `tenants`.`tenant_key` = '66ff6a00-cd82-0132-5378-20c9d07c6451'  ORDER BY `tenants`.`id` ASC LIMIT 1
  [1m[36mLti2Tp::Registration Load (0.3ms)[0m  [1mSELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`tenant_id` = 118  ORDER BY `lti2_tp_registrations`.`id` ASC LIMIT 1[0m
AuthHdr_Parms: {}
in verify_signature
  Rendered inline template (0.4ms)
Completed 200 OK in 6ms (Views: 0.9ms | ActiveRecord: 0.6ms)


Started POST "/lti2_tp/registrations" for 127.0.0.1 at 2015-04-25 07:10:04 -0700
Processing by Lti2Tp::RegistrationsController#create as HTML
  Parameters: {"lti_message_type"=>"ToolProxyRegistrationRequest", "lti_version"=>"LTI-2p0", "user_id"=>"2", "roles"=>"urn:lti:sysrole:ims/lis/SysAdmin", "tc_profile_url"=>"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/af02d8e0-cd82-0132-5378-20c9d07c6451", "reg_key"=>"af02cf60-cd82-0132-5378-20c9d07c6451", "reg_password"=>"[FILTERED]", "launch_presentation_return_url"=>"http://rails.kinexis.com:4000/admin/tool_actions", "launch_presentation_document_target"=>"window"}
  [1m[35mLti2Tp::Tool Load (0.9ms)[0m  SELECT  `lti2_tp_tools`.* FROM `lti2_tp_tools`   ORDER BY `lti2_tp_tools`.`id` ASC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (3.8ms)[0m  INSERT INTO `lti2_tp_registrations` (`created_at`, `launch_presentation_return_url`, `lti_version`, `message_type`, `reg_key`, `reg_password`, `status`, `tc_profile_url`, `tenant_basename`, `tenant_name`, `tool_consumer_profile_json`, `tool_id`, `tool_profile_json`, `updated_at`, `user_id`) VALUES ('2015-04-25 14:10:04', 'http://rails.kinexis.com:4000/admin/tool_actions', 'LTI-2p0', 'registration', 'af02cf60-cd82-0132-5378-20c9d07c6451', '926b0b232648a5f2986ea37f156dceb0', 'received', 'http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/af02d8e0-cd82-0132-5378-20c9d07c6451', 'Elan University', 'Elan University', '{\"@context\":[\"http://purl.imsglobal.org/ctx/lti/v2/ToolConsumerProfile\",{\"ltitcp\":\"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/13efb090-ccde-0132-5374-20c9d07c6451#\"}],\"@type\":\"ToolConsumerProfile\",\"@id\":\"http://rails.kinexis.com:4000/tool_consumer_profiles/13efb090-ccde-0132-5374-20c9d07c6451\",\"lti_version\":\"LTI-2p0\",\"guid\":\"af02d8e0-cd82-0132-5378-20c9d07c6451\",\"product_instance\":{\"guid\":\"dcddf9808107-81ea-eaa4-1edf-5d24568c\",\"product_info\":{\"product_name\":{\"default_value\":\"Elan/LuMoS\",\"key\":\"product.name\"},\"product_version\":\"3.1\",\"description\":{\"default_value\":\"Elan University/LuMoS Learning Platform\",\"key\":\"product.version\"},\"technical_description\":{\"default_value\":\"LTI 1, 1.1 and 2.0 compliant\",\"key\":\"product.technicalDescription\"},\"product_family\":{\"code\":\"LuMoS\",\"vendor\":{\"code\":\"lms.LuMoS.org\",\"vendor_name\":{\"default_value\":\"LuMoS Corporation\",\"key\":\"product.vendor.name\"},\"description\":{\"default_value\":\"LuMoS Corporation is a fictitious vendor of a Learning Management System\",\"key\":\"product.vendor.description\"},\"website\":\"http://lms.LuMoS.org/products/omega\",\"timestamp\":\"2012-07-09T012:08:16-04:00\",\"contact\":{\"email\":\"support@lms.LuMoS.org\"}}}},\"support\":{\"email\":\"john.tibbetts@kinexis.com\"},\"service_owner\":{\"@id\":\"http://ec2.LuMoS.org/ServiceOwner\",\"timestamp\":\"2012-03-28T09:08:16-04:00\",\"service_owner_name\":{\"default_value\":\"Elan University\",\"key\":\"service_owner.name\"},\"description\":{\"default_value\":\"Elan University EC2 Cloud\",\"key\":\"service_owner.description\"},\"support\":{\"email\":\"techsupport@elan.edu\"}},\"service_provider\":{\"@id\":\"http://ec2.LuMoS.org/ServiceProvider\",\"guid\":\"ec2.LuMoS.org\",\"timestamp\":\"2012-07-09T012:08:16-04:00\",\"service_provider_name\":{\"default_value\":\"Elan University\",\"key\":\"service_provider.name\"},\"description\":{\"default_value\":\"Elan University EC2 Cloud\",\"key\":\"service_provider.description\"},\"support\":{\"email\":\"support@yasp.LuMoS.org\"}}},\"capability_offered\":[\"basic-lti-launch-request\",\"Result.autocreate\",\"Result.sourcedId\",\"User.id\",\"User.username\",\"CourseSection.sourcedId\",\"Person.sourcedId\",\"Person.email.primary\",\"Person.name.given\",\"Person.name.family\",\"Person.name.full\",\"Membership.role\",\"ToolProxy.custom.url\",\"ToolProxyBinding.custom.url\",\"LtiLink.custom.url\",\"ToolConsumerProfile.url\"],\"service_offered\":[{\"@type\":\"RestService\",\"@id\":\"ltitcp:ToolProxy.collection\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tools\",\"format\":[\"application/vnd.ims.lti.v2.toolproxy+json\"],\"action\":[\"POST\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:ToolProxy.item\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tools/{tool_proxy_guid}\",\"format\":[\"application/vnd.ims.lti.v2.toolproxy+json\"],\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:Result.item\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/resources/Result/{sourcedId}\",\"format\":[\"application/vnd.ims.lis.v2.result+json\"],\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:LtiLinkSettings\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tool_settings/{tool_proxy_guid}/ltilink/{link_id}\",\"format\":[\"application/vnd.ims.lti.v2.toolsettings+json\",\"application/vnd.ims.lti.v2.toolsettings.simple+json\"],\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:ToolProxyBindingSettings\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tool_settings/{tool_proxy_guid}/context/{context_id}\",\"format\":[\"application/vnd.ims.lti.v2.toolsettings+json\",\"application/vnd.ims.lti.v2.toolsettings.simple+json\"],\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:ToolProxySettings\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tool_settings/{tool_proxy_guid}\",\"format\":[\"application/vnd.ims.lti.v2.toolsettings+json\",\"application/vnd.ims.lti.v2.toolsettings.simple+json\"],\"action\":[\"GET\",\"PUT\"]}]}', 2, '{\"base_url_choice\":[{\"default_base_url\":\"http://rails.kinexis.com:5000\",\"selector\":{\"applies_to\":[\"IconEndpoint\",\"MessageHandler\"]}}],\"lti_version\":\"LTI-2p0\",\"message\":[{\"message_type\":[\"ToolProxyRegistrationRequest\",\"ToolProxyReregistrationRequest\"],\"parameter\":[{\"name\":\"tc_profile_url\",\"variable\":\"ToolConsumerProfile.url\"}],\"path\":\"http://rails.kinexis.com:5000/lti2_tp/reregistrations\"}],\"product_instance\":{\"guid\":\"fd75124a-140e-470f-944c-114d2d92bb40\",\"product_info\":{\"description\":{\"default_value\":\"Fabericious reflowable ePub3 Textbook\",\"key\":\"tool.description\"},\"product_family\":{\"code\":\"assessment-tool\",\"vendor\":{\"code\":\"fabericious.org\",\"contact\":{\"email\":\"info@fabericious.com\"},\"description\":{\"default_value\":\"Fabericious is a leading provider of interactive tools for education\",\"key\":\"tool.vendor.description\"},\"vendor_name\":{\"default_value\":\"Fab\",\"key\":\"tool.vendor.name\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\",\"website\":\"{http://rails.kinexis.com:5000}\"}},\"product_name\":{\"default_value\":\"LTI2 BookTools\",\"key\":\"tool.name\"},\"product_version\":\"10.3\",\"technical_description\":{\"default_value\":\"Support provided for all LTI 1 extensions as well as LTI 2\",\"key\":\"tool.technical\"}},\"service_provider\":{\"description\":{\"default_value\":\"Provider of high performance managed hosting environments\",\"key\":\"service_provider.description\"},\"guid\":\"18e7ea50-3d6d-4f6b-aff2-ed3ab577716c\",\"service_provider_name\":{\"default_value\":\"Amazon Cloud\",\"key\":\"service_provider.name\"},\"support\":{\"email\":\"support@ec2.fabericious.com\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\"},\"support\":{\"email\":\"helpdesk@fabericious.com\"}},\"resource_handler\":[{\"description\":{\"default_value\":\"Settings service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"tool_proxy_custom_url\",\"variable\":\"ToolProxy.custom.url\"},{\"name\":\"tool_proxy_binding_custom_url\",\"variable\":\"ToolProxyBinding.custom.url\"},{\"name\":\"lti_link_custom_url\",\"variable\":\"LtiLink.custom.url\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"ToolProxy.custom.url\",\"ToolProxyBinding.custom.url\",\"LtiLink.custom.url\"],\"path\":\"/settings\"}],\"resource_name\":{\"default_value\":\"Settings\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"setting\"}},{\"description\":{\"default_value\":\"Echo service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"fixed\":\"Narcissus\",\"name\":\"referrer\"},{\"fixed\":\"3.14159\",\"name\":\"pi\"},{\"name\":\"user_primary_email\",\"variable\":\"Person.email.primary\"},{\"name\":\"discipline\",\"variable\":\"CourseOffering.label\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\"],\"path\":\"/echoes\"}],\"resource_name\":{\"default_value\":\"Echo\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"echo\"}},{\"description\":{\"default_value\":\"Interactive resource\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"vbid\"},{\"name\":\"result_uri\",\"variable\":\"Result.uri\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"Result.autocreate\"],\"path\":\"/iresources\"}],\"resource_name\":{\"default_value\":\"InteractiveResource\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"iresource\"}}],\"service_offered\":[{\"@id\":\"http://rails.kinexis.com:5000/lti2_tp/ToolProxy.collection\",\"@type\":\"RestService\",\"action\":[\"PUT\"],\"endpoint\":\"http://rails.kinexis.com:5000/lti2_tp/tool_proxies\",\"format\":[\"\"]}]}', '2015-04-25 14:10:04', '2')
  [1m[36m (0.6ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:5000/lti_registration_wips?registration_id=123&return_url=/lti2_tp/registrations
Completed 302 Found in 94ms (ActiveRecord: 5.5ms)


Started GET "/lti_registration_wips?registration_id=123&return_url=/lti2_tp/registrations" for 127.0.0.1 at 2015-04-25 07:10:04 -0700
Processing by LtiRegistrationWipsController#index as HTML
  Parameters: {"registration_id"=>"123", "return_url"=>"/lti2_tp/registrations"}
  [1m[35mLti2Tp::Registration Load (0.5ms)[0m  SELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 123 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `lti_registration_wips` (`created_at`, `product_name`, `registration_id`, `registration_return_url`, `support_email`, `tenant_name`, `updated_at`) VALUES ('2015-04-25 14:10:04', 'Elan/LuMoS', 123, '/lti2_tp/registrations', 'john.tibbetts@kinexis.com', 'Elan University', '2015-04-25 14:10:04')
  [1m[36m (6.2ms)[0m  [1mCOMMIT[0m
  Rendered lti_registration_wips/_form.html.haml (41.8ms)
  Rendered lti_registration_wips/index.html.haml within layouts/application (44.9ms)
Completed 200 OK in 89ms (Views: 75.1ms | ActiveRecord: 7.2ms)


Started PATCH "/lti_registration_wips/214" for 127.0.0.1 at 2015-04-25 07:10:10 -0700
Processing by LtiRegistrationWipsController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"M43il2V3jEVaEPp6JXt1mmJv07NVYlbO1a58pW42DXs=", "lti_registration_wip"=>{"support_email"=>"john.tibbetts@kinexis.com", "product_name"=>"Elan/LuMoS", "tenant_name"=>"Elan University710"}, "commit"=>"Update Lti registration wip", "id"=>"214"}
  [1m[35mLtiRegistrationWip Load (0.3ms)[0m  SELECT  `lti_registration_wips`.* FROM `lti_registration_wips`  WHERE `lti_registration_wips`.`id` = 214 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (6.3ms)[0m  UPDATE `lti_registration_wips` SET `tenant_name` = 'Elan University710', `updated_at` = '2015-04-25 14:10:10' WHERE `lti_registration_wips`.`id` = 214
  [1m[36m (5.9ms)[0m  [1mCOMMIT[0m
  [1m[35mLti2Tp::Registration Load (0.4ms)[0m  SELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 123 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE `lti2_tp_registrations` SET `tenant_name` = 'Elan University710', `updated_at` = '2015-04-25 14:10:10' WHERE `lti2_tp_registrations`.`id` = 123
  [1m[36m (5.2ms)[0m  [1mCOMMIT[0m
  [1m[35mLtiRegistrationWip Load (0.4ms)[0m  SELECT  `lti_registration_wips`.* FROM `lti_registration_wips`  WHERE `lti_registration_wips`.`id` = 214 LIMIT 1
  [1m[36mLti2Tp::Registration Load (0.4ms)[0m  [1mSELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 123 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mTenant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `tenants`  WHERE `tenants`.`tenant_name` = BINARY 'Elan University710' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `tenants` (`created_at`, `tenant_name`, `updated_at`) VALUES ('2015-04-25 14:10:10', 'Elan University710', '2015-04-25 14:10:10')
  [1m[36m (0.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (2.4ms)[0m  [1mUPDATE `lti2_tp_registrations` SET `end_registration_id` = 'b57f5280-cd82-0132-5377-20c9d07c6451', `tool_proxy_json` = '{\"@context\":[\"http://purl.imsglobal.org/ctx/lti/v2/ToolConsumerProfile\",{\"ltitcp\":\"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/13efb090-ccde-0132-5374-20c9d07c6451#\"}],\"@type\":\"ToolProxy\",\"@id\":\"ToolProxyProposal_at_2015-04-25T14:10:10Z\",\"lti_version\":\"LTI-2p0\",\"tool_proxy_guid\":\"af02cf60-cd82-0132-5378-20c9d07c6451\",\"tool_consumer_profile\":\"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/af02d8e0-cd82-0132-5378-20c9d07c6451\",\"tool_profile\":{\"base_url_choice\":[{\"default_base_url\":\"http://rails.kinexis.com:5000\",\"selector\":{\"applies_to\":[\"IconEndpoint\",\"MessageHandler\"]}}],\"lti_version\":\"LTI-2p0\",\"message\":[{\"message_type\":[\"ToolProxyRegistrationRequest\",\"ToolProxyReregistrationRequest\"],\"parameter\":[{\"name\":\"tc_profile_url\",\"variable\":\"ToolConsumerProfile.url\"}],\"path\":\"http://rails.kinexis.com:5000/lti2_tp/reregistrations\"}],\"product_instance\":{\"guid\":\"fd75124a-140e-470f-944c-114d2d92bb40\",\"product_info\":{\"description\":{\"default_value\":\"Fabericious reflowable ePub3 Textbook\",\"key\":\"tool.description\"},\"product_family\":{\"code\":\"assessment-tool\",\"vendor\":{\"code\":\"fabericious.org\",\"contact\":{\"email\":\"info@fabericious.com\"},\"description\":{\"default_value\":\"Fabericious is a leading provider of interactive tools for education\",\"key\":\"tool.vendor.description\"},\"vendor_name\":{\"default_value\":\"Fab\",\"key\":\"tool.vendor.name\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\",\"website\":\"{http://rails.kinexis.com:5000}\"}},\"product_name\":{\"default_value\":\"LTI2 BookTools\",\"key\":\"tool.name\"},\"product_version\":\"10.3\",\"technical_description\":{\"default_value\":\"Support provided for all LTI 1 extensions as well as LTI 2\",\"key\":\"tool.technical\"}},\"service_provider\":{\"description\":{\"default_value\":\"Provider of high performance managed hosting environments\",\"key\":\"service_provider.description\"},\"guid\":\"18e7ea50-3d6d-4f6b-aff2-ed3ab577716c\",\"service_provider_name\":{\"default_value\":\"Amazon Cloud\",\"key\":\"service_provider.name\"},\"support\":{\"email\":\"support@ec2.fabericious.com\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\"},\"support\":{\"email\":\"helpdesk@fabericious.com\"}},\"resource_handler\":[{\"description\":{\"default_value\":\"Settings service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"tool_proxy_custom_url\",\"variable\":\"ToolProxy.custom.url\"},{\"name\":\"tool_proxy_binding_custom_url\",\"variable\":\"ToolProxyBinding.custom.url\"},{\"name\":\"lti_link_custom_url\",\"variable\":\"LtiLink.custom.url\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"ToolProxy.custom.url\",\"ToolProxyBinding.custom.url\",\"LtiLink.custom.url\"],\"path\":\"/settings\"}],\"resource_name\":{\"default_value\":\"Settings\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"setting\"}},{\"description\":{\"default_value\":\"Echo service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"fixed\":\"Narcissus\",\"name\":\"referrer\"},{\"fixed\":\"3.14159\",\"name\":\"pi\"},{\"name\":\"user_primary_email\",\"variable\":\"Person.email.primary\"},{\"name\":\"discipline\",\"variable\":\"CourseOffering.label\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\"],\"path\":\"/echoes\"}],\"resource_name\":{\"default_value\":\"Echo\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"echo\"}},{\"description\":{\"default_value\":\"Interactive resource\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"vbid\"},{\"name\":\"result_uri\",\"variable\":\"Result.uri\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"Result.autocreate\"],\"path\":\"/iresources\"}],\"resource_name\":{\"default_value\":\"InteractiveResource\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"iresource\"}}],\"service_offered\":[{\"@id\":\"http://rails.kinexis.com:5000/lti2_tp/ToolProxy.collection\",\"@type\":\"RestService\",\"action\":[\"PUT\"],\"endpoint\":\"http://rails.kinexis.com:5000/lti2_tp/tool_proxies\",\"format\":[\"\"]}]},\"security_contract\":{\"shared_secret\":\"157f79ba9a661d61f9b374e72c22cb18\",\"tool_service\":[{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxy.collection\",\"action\":[\"POST\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxy.item\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:Result.item\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:LtiLinkSettings\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxyBindingSettings\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxySettings\",\"action\":[\"GET\",\"PUT\"]}]}}', `updated_at` = '2015-04-25 14:10:11' WHERE `lti2_tp_registrations`.`id` = 123[0m
  [1m[35m (0.9ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE `lti2_tp_registrations` SET `status` = 'register', `updated_at` = '2015-04-25 14:10:11' WHERE `lti2_tp_registrations`.`id` = 123
  [1m[36m (5.9ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mTenant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `tenants`  WHERE (`tenants`.`tenant_name` = BINARY 'Elan University710' AND `tenants`.`id` != 119) LIMIT 1[0m
  [1m[35mSQL (6.3ms)[0m  UPDATE `tenants` SET `secret` = '157f79ba9a661d61f9b374e72c22cb18', `tenant_key` = 'af02cf60-cd82-0132-5378-20c9d07c6451', `updated_at` = '2015-04-25 14:10:11' WHERE `tenants`.`id` = 119
  [1m[36m (5.8ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE `lti2_tp_registrations` SET `tenant_id` = 119, `updated_at` = '2015-04-25 14:10:11' WHERE `lti2_tp_registrations`.`id` = 123[0m
  [1m[35m (0.8ms)[0m  COMMIT
Redirected to http://localhost:5000/lti2_tp/registrations?status=success&tool_guid=af02cf60-cd82-0132-5378-20c9d07c6451&&id=123
Completed 302 Found in 182ms (ActiveRecord: 44.5ms)


Started GET "/lti2_tp/registrations?status=success&tool_guid=af02cf60-cd82-0132-5378-20c9d07c6451&&id=123" for 127.0.0.1 at 2015-04-25 07:10:11 -0700
Processing by Lti2Tp::RegistrationsController#index as HTML
  Parameters: {"status"=>"success", "tool_guid"=>"af02cf60-cd82-0132-5378-20c9d07c6451", "id"=>"123"}
  [1m[36mLti2Tp::Registration Load (0.5ms)[0m  [1mSELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 123 LIMIT 1[0m
Redirected to http://rails.kinexis.com:4000/admin/tool_actions?status=success&tool_guid=af02cf60-cd82-0132-5378-20c9d07c6451
Completed 302 Found in 3ms (ActiveRecord: 0.5ms)


Started POST "/echoes" for 127.0.0.1 at 2015-04-25 07:10:21 -0700
Processing by EchoesController#create as HTML
  Parameters: {"lti_version"=>"LTI-2p0", "lti_message_type"=>"basic-lti-launch-request", "resource_link_id"=>"2437", "user_id"=>"2", "roles"=>"Instructor", "launch_presentation_return_url"=>"http://rails.kinexis.com:4000/admin/course_page?method=show&course_id=2", "launch_presentation_document_target"=>"window", "context_id"=>"2", "launch_presentation_locale"=>"en_US", "context_label"=>"SMPL101A", "context_title"=>"Nursing Compendium", "lis_course_section_sourcedid"=>"2", "tool_consumer_info_product_family_code"=>"LuMoS", "tool_consumer_info_version"=>"3.1", "custom_referrer"=>"Narcissus", "custom_pi"=>"3.14159", "custom_user_primary_email"=>"admin@lumos.org", "custom_discipline"=>"SMPL101A", "oauth_consumer_key"=>"af02cf60-cd82-0132-5378-20c9d07c6451", "oauth_nonce"=>"2676972495340", "oauth_signature_method"=>"HMAC-SHA1", "oauth_timestamp"=>"1429971020", "oauth_version"=>"1.0", "oauth_callback"=>"about:blank", "oauth_signature"=>"cOadan0w03Ttym6nTzxc9mzjqTM="}
Can't verify CSRF token authenticity
AuthHdr_Parms: {}
  [1m[35mTenant Load (0.3ms)[0m  SELECT  `tenants`.* FROM `tenants`  WHERE `tenants`.`tenant_key` = 'af02cf60-cd82-0132-5378-20c9d07c6451'  ORDER BY `tenants`.`id` ASC LIMIT 1
  [1m[36mLti2Tp::Registration Load (0.3ms)[0m  [1mSELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`tenant_id` = 119  ORDER BY `lti2_tp_registrations`.`id` ASC LIMIT 1[0m
AuthHdr_Parms: {}
in verify_signature
  Rendered inline template (1.2ms)
Completed 200 OK in 10ms (Views: 2.0ms | ActiveRecord: 0.6ms)


Started POST "/lti2_tp/reregistrations" for 127.0.0.1 at 2015-04-25 07:10:44 -0700
Processing by Lti2Tp::RegistrationsController#reregister as HTML
  Parameters: {"tc_profile_url"=>"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/af02d8e0-cd82-0132-5378-20c9d07c6451", "launch_presentation_return_url"=>"http://rails.kinexis.com:4000/admin/tool_actions", "lti_message_type"=>"ToolProxyReregistrationRequest", "oauth_consumer_key"=>"af02cf60-cd82-0132-5378-20c9d07c6451", "oauth_nonce"=>"5698327051782", "oauth_signature_method"=>"HMAC-SHA1", "oauth_timestamp"=>"1429971043", "oauth_version"=>"1.0", "oauth_callback"=>"about:blank", "oauth_signature"=>"A+tLd6uMU3mJnwAWRITeCkLmOTo="}
Can't verify CSRF token authenticity
AuthHdr_Parms: {}
  [1m[35mTenant Load (0.3ms)[0m  SELECT  `tenants`.* FROM `tenants`  WHERE `tenants`.`tenant_key` = 'af02cf60-cd82-0132-5378-20c9d07c6451'  ORDER BY `tenants`.`id` ASC LIMIT 1
  [1m[36mLti2Tp::Registration Load (0.3ms)[0m  [1mSELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`tenant_id` = 119  ORDER BY `lti2_tp_registrations`.`id` ASC LIMIT 1[0m
AuthHdr_Parms: {}
in verify_signature
  [1m[35mLti2Tp::Registration Load (0.4ms)[0m  SELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`tenant_name` = 'Elan University710'  ORDER BY `lti2_tp_registrations`.`id` ASC LIMIT 1
  [1m[36mTenant Load (0.3ms)[0m  [1mSELECT  `tenants`.* FROM `tenants`  WHERE `tenants`.`id` = 119 LIMIT 1[0m
  [1m[35mLti2Tp::Tool Load (0.3ms)[0m  SELECT  `lti2_tp_tools`.* FROM `lti2_tp_tools`  WHERE `lti2_tp_tools`.`id` = 2 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (6.3ms)[0m  UPDATE `lti2_tp_registrations` SET `message_type` = 'reregistration', `reg_password` = '157f79ba9a661d61f9b374e72c22cb18', `status` = 'received', `updated_at` = '2015-04-25 14:10:44' WHERE `lti2_tp_registrations`.`id` = 123
  [1m[36m (10.9ms)[0m  [1mCOMMIT[0m
Redirected to http://rails.kinexis.com:5000/lti_registration_wips?registration_id=123&return_url=/lti2_tp/registrations
Completed 302 Found in 66ms (ActiveRecord: 18.9ms)


Started GET "/lti_registration_wips?registration_id=123&return_url=/lti2_tp/registrations" for 127.0.0.1 at 2015-04-25 07:10:44 -0700
Processing by LtiRegistrationWipsController#index as HTML
  Parameters: {"registration_id"=>"123", "return_url"=>"/lti2_tp/registrations"}
  [1m[35mLti2Tp::Registration Load (0.4ms)[0m  SELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 123 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `lti_registration_wips` (`created_at`, `product_name`, `registration_id`, `registration_return_url`, `support_email`, `tenant_name`, `updated_at`) VALUES ('2015-04-25 14:10:44', 'Elan/LuMoS', 123, '/lti2_tp/registrations', 'john.tibbetts@kinexis.com', 'Elan University710', '2015-04-25 14:10:44')
  [1m[36m (16.9ms)[0m  [1mCOMMIT[0m
  Rendered lti_registration_wips/_form.html.haml (15.1ms)
  Rendered lti_registration_wips/index.html.haml within layouts/application (17.4ms)
Completed 200 OK in 56ms (Views: 34.7ms | ActiveRecord: 17.7ms)


Started PATCH "/lti_registration_wips/215" for 127.0.0.1 at 2015-04-25 07:10:46 -0700
Processing by LtiRegistrationWipsController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"IQFZGw6wnlWi/3CBlIM3+AF7VnawHoFXbIG63BJKK5Q=", "lti_registration_wip"=>{"support_email"=>"john.tibbetts@kinexis.com", "product_name"=>"Elan/LuMoS", "tenant_name"=>"Elan University710"}, "commit"=>"Update Lti registration wip", "id"=>"215"}
  [1m[35mLtiRegistrationWip Load (0.3ms)[0m  SELECT  `lti_registration_wips`.* FROM `lti_registration_wips`  WHERE `lti_registration_wips`.`id` = 215 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36mLti2Tp::Registration Load (0.3ms)[0m  [1mSELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 123 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  `lti_registration_wips`.* FROM `lti_registration_wips`  WHERE `lti_registration_wips`.`id` = 215 LIMIT 1  [["id", "215"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 123 LIMIT 1[0m  [["id", 123]]
  [1m[35mTenant Load (0.3ms)[0m  SELECT  `tenants`.* FROM `tenants`  WHERE `tenants`.`tenant_name` = 'Elan University710'  ORDER BY `tenants`.`id` ASC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (6.7ms)[0m  UPDATE `lti2_tp_registrations` SET `end_registration_id` = 'ca8c5800-cd82-0132-5377-20c9d07c6451', `proposed_tool_proxy_json` = '{\"@context\":[\"http://purl.imsglobal.org/ctx/lti/v2/ToolConsumerProfile\",{\"ltitcp\":\"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/13efb090-ccde-0132-5374-20c9d07c6451#\"}],\"@type\":\"ToolProxy\",\"@id\":\"ToolProxyProposal_at_2015-04-25T14:10:46Z\",\"lti_version\":\"LTI-2p0\",\"tool_proxy_guid\":\"af02cf60-cd82-0132-5378-20c9d07c6451\",\"tool_consumer_profile\":\"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/af02d8e0-cd82-0132-5378-20c9d07c6451\",\"tool_profile\":{\"base_url_choice\":[{\"default_base_url\":\"http://rails.kinexis.com:5000\",\"selector\":{\"applies_to\":[\"IconEndpoint\",\"MessageHandler\"]}}],\"lti_version\":\"LTI-2p0\",\"message\":[{\"message_type\":[\"ToolProxyRegistrationRequest\",\"ToolProxyReregistrationRequest\"],\"parameter\":[{\"name\":\"tc_profile_url\",\"variable\":\"ToolConsumerProfile.url\"}],\"path\":\"http://rails.kinexis.com:5000/lti2_tp/reregistrations\"}],\"product_instance\":{\"guid\":\"fd75124a-140e-470f-944c-114d2d92bb40\",\"product_info\":{\"description\":{\"default_value\":\"Fabericious reflowable ePub3 Textbook\",\"key\":\"tool.description\"},\"product_family\":{\"code\":\"assessment-tool\",\"vendor\":{\"code\":\"fabericious.org\",\"contact\":{\"email\":\"info@fabericious.com\"},\"description\":{\"default_value\":\"Fabericious is a leading provider of interactive tools for education\",\"key\":\"tool.vendor.description\"},\"vendor_name\":{\"default_value\":\"Fab\",\"key\":\"tool.vendor.name\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\",\"website\":\"{http://rails.kinexis.com:5000}\"}},\"product_name\":{\"default_value\":\"LTI2 BookTools\",\"key\":\"tool.name\"},\"product_version\":\"10.3\",\"technical_description\":{\"default_value\":\"Support provided for all LTI 1 extensions as well as LTI 2\",\"key\":\"tool.technical\"}},\"service_provider\":{\"description\":{\"default_value\":\"Provider of high performance managed hosting environments\",\"key\":\"service_provider.description\"},\"guid\":\"18e7ea50-3d6d-4f6b-aff2-ed3ab577716c\",\"service_provider_name\":{\"default_value\":\"Amazon Cloud\",\"key\":\"service_provider.name\"},\"support\":{\"email\":\"support@ec2.fabericious.com\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\"},\"support\":{\"email\":\"helpdesk@fabericious.com\"}},\"resource_handler\":[{\"description\":{\"default_value\":\"Settings service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"tool_proxy_custom_url\",\"variable\":\"ToolProxy.custom.url\"},{\"name\":\"tool_proxy_binding_custom_url\",\"variable\":\"ToolProxyBinding.custom.url\"},{\"name\":\"lti_link_custom_url\",\"variable\":\"LtiLink.custom.url\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"ToolProxy.custom.url\",\"ToolProxyBinding.custom.url\",\"LtiLink.custom.url\"],\"path\":\"/settings\"}],\"resource_name\":{\"default_value\":\"Settings\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"setting\"}},{\"description\":{\"default_value\":\"Echo service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"fixed\":\"Narcissus\",\"name\":\"referrer\"},{\"fixed\":\"3.14159\",\"name\":\"pi\"},{\"name\":\"user_primary_email\",\"variable\":\"Person.email.primary\"},{\"name\":\"discipline\",\"variable\":\"CourseOffering.label\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\"],\"path\":\"/echoes\"}],\"resource_name\":{\"default_value\":\"Echo\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"echo\"}},{\"description\":{\"default_value\":\"Interactive resource\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"vbid\"},{\"name\":\"result_uri\",\"variable\":\"Result.uri\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"Result.autocreate\"],\"path\":\"/iresources\"}],\"resource_name\":{\"default_value\":\"InteractiveResource\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"iresource\"}}],\"service_offered\":[{\"@id\":\"http://rails.kinexis.com:5000/lti2_tp/ToolProxy.collection\",\"@type\":\"RestService\",\"action\":[\"PUT\"],\"endpoint\":\"http://rails.kinexis.com:5000/lti2_tp/tool_proxies\",\"format\":[\"\"]}]},\"security_contract\":{\"shared_secret\":\"06a73ecebbba07c5bfe698a1d492befe\",\"tool_service\":[{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxy.collection\",\"action\":[\"POST\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxy.item\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:Result.item\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:LtiLinkSettings\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxyBindingSettings\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxySettings\",\"action\":[\"GET\",\"PUT\"]}]}}', `updated_at` = '2015-04-25 14:10:46' WHERE `lti2_tp_registrations`.`id` = 123
  [1m[36m (0.7ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE `lti2_tp_registrations` SET `status` = 'reregistered', `updated_at` = '2015-04-25 14:10:46' WHERE `lti2_tp_registrations`.`id` = 123[0m
  [1m[35m (6.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mTenant Exists (0.3ms)[0m  SELECT  1 AS one FROM `tenants`  WHERE (`tenants`.`tenant_name` = BINARY 'Elan University710' AND `tenants`.`id` != 119) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
Redirected to http://rails.kinexis.com:5000/lti2_tp/registrations?status=success&&id=123
Completed 302 Found in 76ms (ActiveRecord: 15.8ms)


Started GET "/lti2_tp/registrations?status=success&&id=123" for 127.0.0.1 at 2015-04-25 07:10:46 -0700
Processing by Lti2Tp::RegistrationsController#index as HTML
  Parameters: {"status"=>"success", "id"=>"123"}
  [1m[35mLti2Tp::Registration Load (0.4ms)[0m  SELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 123 LIMIT 1
Redirected to http://rails.kinexis.com:4000/admin/tool_actions?status=success
Completed 302 Found in 2ms (ActiveRecord: 0.4ms)


Started PUT "/lti2_tp/tool_proxies/af02cf60-cd82-0132-5378-20c9d07c6451?correlation=ca8c5800-cd82-0132-5377-20c9d07c6451" for 127.0.0.1 at 2015-04-25 07:10:48 -0700
Processing by Lti2Tp::RegistrationsController#complete_reregistration as HTML
  Parameters: {"correlation"=>"ca8c5800-cd82-0132-5377-20c9d07c6451", "id"=>"af02cf60-cd82-0132-5378-20c9d07c6451"}
Can't verify CSRF token authenticity
AuthHdr_Parms: {:oauth_consumer_key=>"af02cf60-cd82-0132-5378-20c9d07c6451", :oauth_nonce=>"451726430986", :oauth_signature_method=>"HMAC-SHA1", :oauth_timestamp=>"1429971048", :oauth_version=>"1.0", :oauth_callback=>"about:blank", :oauth_signature=>"tshDlwTtA6QENkqP4JxT97XVcL0="}
  [1m[36mTenant Load (0.3ms)[0m  [1mSELECT  `tenants`.* FROM `tenants`  WHERE `tenants`.`tenant_key` = 'af02cf60-cd82-0132-5378-20c9d07c6451'  ORDER BY `tenants`.`id` ASC LIMIT 1[0m
  [1m[35mLti2Tp::Registration Load (0.2ms)[0m  SELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`tenant_id` = 119  ORDER BY `lti2_tp_registrations`.`id` ASC LIMIT 1
AuthHdr_Parms: {:oauth_consumer_key=>"af02cf60-cd82-0132-5378-20c9d07c6451", :oauth_nonce=>"451726430986", :oauth_signature_method=>"HMAC-SHA1", :oauth_timestamp=>"1429971048", :oauth_version=>"1.0", :oauth_callback=>"about:blank", :oauth_signature=>"tshDlwTtA6QENkqP4JxT97XVcL0="}
in verify_signature
  [1m[36mLti2Tp::Registration Load (0.3ms)[0m  [1mSELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`tenant_name` = 'Elan University710'  ORDER BY `lti2_tp_registrations`.`id` ASC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`tenant_id` = 119  ORDER BY `lti2_tp_registrations`.`id` ASC LIMIT 1
  [1m[36mTenant Load (0.3ms)[0m  [1mSELECT  `tenants`.* FROM `tenants`  WHERE `tenants`.`id` = 119 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mTenant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `tenants`  WHERE (`tenants`.`tenant_name` = BINARY 'Elan University710' AND `tenants`.`id` != 119) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE `tenants` SET `secret` = '06a73ecebbba07c5bfe698a1d492befe', `updated_at` = '2015-04-25 14:10:48' WHERE `tenants`.`id` = 119
  [1m[36m (5.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (4.3ms)[0m  [1mUPDATE `lti2_tp_registrations` SET `end_registration_id` = NULL, `proposed_tool_proxy_json` = NULL, `reg_password` = '06a73ecebbba07c5bfe698a1d492befe', `tool_proxy_json` = '{\"@context\":[\"http://purl.imsglobal.org/ctx/lti/v2/ToolConsumerProfile\",{\"ltitcp\":\"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/13efb090-ccde-0132-5374-20c9d07c6451#\"}],\"@type\":\"ToolProxy\",\"@id\":\"ToolProxyProposal_at_2015-04-25T14:10:46Z\",\"lti_version\":\"LTI-2p0\",\"tool_proxy_guid\":\"af02cf60-cd82-0132-5378-20c9d07c6451\",\"tool_consumer_profile\":\"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/af02d8e0-cd82-0132-5378-20c9d07c6451\",\"tool_profile\":{\"base_url_choice\":[{\"default_base_url\":\"http://rails.kinexis.com:5000\",\"selector\":{\"applies_to\":[\"IconEndpoint\",\"MessageHandler\"]}}],\"lti_version\":\"LTI-2p0\",\"message\":[{\"message_type\":[\"ToolProxyRegistrationRequest\",\"ToolProxyReregistrationRequest\"],\"parameter\":[{\"name\":\"tc_profile_url\",\"variable\":\"ToolConsumerProfile.url\"}],\"path\":\"http://rails.kinexis.com:5000/lti2_tp/reregistrations\"}],\"product_instance\":{\"guid\":\"fd75124a-140e-470f-944c-114d2d92bb40\",\"product_info\":{\"description\":{\"default_value\":\"Fabericious reflowable ePub3 Textbook\",\"key\":\"tool.description\"},\"product_family\":{\"code\":\"assessment-tool\",\"vendor\":{\"code\":\"fabericious.org\",\"contact\":{\"email\":\"info@fabericious.com\"},\"description\":{\"default_value\":\"Fabericious is a leading provider of interactive tools for education\",\"key\":\"tool.vendor.description\"},\"vendor_name\":{\"default_value\":\"Fab\",\"key\":\"tool.vendor.name\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\",\"website\":\"{http://rails.kinexis.com:5000}\"}},\"product_name\":{\"default_value\":\"LTI2 BookTools\",\"key\":\"tool.name\"},\"product_version\":\"10.3\",\"technical_description\":{\"default_value\":\"Support provided for all LTI 1 extensions as well as LTI 2\",\"key\":\"tool.technical\"}},\"service_provider\":{\"description\":{\"default_value\":\"Provider of high performance managed hosting environments\",\"key\":\"service_provider.description\"},\"guid\":\"18e7ea50-3d6d-4f6b-aff2-ed3ab577716c\",\"service_provider_name\":{\"default_value\":\"Amazon Cloud\",\"key\":\"service_provider.name\"},\"support\":{\"email\":\"support@ec2.fabericious.com\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\"},\"support\":{\"email\":\"helpdesk@fabericious.com\"}},\"resource_handler\":[{\"description\":{\"default_value\":\"Settings service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"tool_proxy_custom_url\",\"variable\":\"ToolProxy.custom.url\"},{\"name\":\"tool_proxy_binding_custom_url\",\"variable\":\"ToolProxyBinding.custom.url\"},{\"name\":\"lti_link_custom_url\",\"variable\":\"LtiLink.custom.url\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"ToolProxy.custom.url\",\"ToolProxyBinding.custom.url\",\"LtiLink.custom.url\"],\"path\":\"/settings\"}],\"resource_name\":{\"default_value\":\"Settings\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"setting\"}},{\"description\":{\"default_value\":\"Echo service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"fixed\":\"Narcissus\",\"name\":\"referrer\"},{\"fixed\":\"3.14159\",\"name\":\"pi\"},{\"name\":\"user_primary_email\",\"variable\":\"Person.email.primary\"},{\"name\":\"discipline\",\"variable\":\"CourseOffering.label\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\"],\"path\":\"/echoes\"}],\"resource_name\":{\"default_value\":\"Echo\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"echo\"}},{\"description\":{\"default_value\":\"Interactive resource\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"vbid\"},{\"name\":\"result_uri\",\"variable\":\"Result.uri\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"Result.autocreate\"],\"path\":\"/iresources\"}],\"resource_name\":{\"default_value\":\"InteractiveResource\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"iresource\"}}],\"service_offered\":[{\"@id\":\"http://rails.kinexis.com:5000/lti2_tp/ToolProxy.collection\",\"@type\":\"RestService\",\"action\":[\"PUT\"],\"endpoint\":\"http://rails.kinexis.com:5000/lti2_tp/tool_proxies\",\"format\":[\"\"]}]},\"security_contract\":{\"shared_secret\":\"06a73ecebbba07c5bfe698a1d492befe\",\"tool_service\":[{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxy.collection\",\"action\":[\"POST\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxy.item\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:Result.item\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:LtiLinkSettings\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxyBindingSettings\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxySettings\",\"action\":[\"GET\",\"PUT\"]}]}}', `updated_at` = '2015-04-25 14:10:48' WHERE `lti2_tp_registrations`.`id` = 123[0m
  [1m[35m (0.5ms)[0m  COMMIT
"reregistration complete for af02cf60-cd82-0132-5378-20c9d07c6451"
  Rendered text template (0.0ms)
Completed 200 OK in 26ms (Views: 0.6ms | ActiveRecord: 12.4ms)


Started POST "/echoes" for 127.0.0.1 at 2015-04-25 07:10:58 -0700
Processing by EchoesController#create as HTML
  Parameters: {"lti_version"=>"LTI-2p0", "lti_message_type"=>"basic-lti-launch-request", "resource_link_id"=>"2437", "user_id"=>"2", "roles"=>"Instructor", "launch_presentation_return_url"=>"http://rails.kinexis.com:4000/admin/course_page?method=show&course_id=2", "launch_presentation_document_target"=>"window", "context_id"=>"2", "launch_presentation_locale"=>"en_US", "context_label"=>"SMPL101A", "context_title"=>"Nursing Compendium", "lis_course_section_sourcedid"=>"2", "tool_consumer_info_product_family_code"=>"LuMoS", "tool_consumer_info_version"=>"3.1", "custom_referrer"=>"Narcissus", "custom_pi"=>"3.14159", "custom_user_primary_email"=>"admin@lumos.org", "custom_discipline"=>"SMPL101A", "oauth_consumer_key"=>"af02cf60-cd82-0132-5378-20c9d07c6451", "oauth_nonce"=>"2735604181783", "oauth_signature_method"=>"HMAC-SHA1", "oauth_timestamp"=>"1429971058", "oauth_version"=>"1.0", "oauth_callback"=>"about:blank", "oauth_signature"=>"fVN0lo7CUvQzxaAV9eIVYsLctPY="}
Can't verify CSRF token authenticity
AuthHdr_Parms: {}
  [1m[36mTenant Load (0.3ms)[0m  [1mSELECT  `tenants`.* FROM `tenants`  WHERE `tenants`.`tenant_key` = 'af02cf60-cd82-0132-5378-20c9d07c6451'  ORDER BY `tenants`.`id` ASC LIMIT 1[0m
  [1m[35mLti2Tp::Registration Load (0.3ms)[0m  SELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`tenant_id` = 119  ORDER BY `lti2_tp_registrations`.`id` ASC LIMIT 1
AuthHdr_Parms: {}
in verify_signature
  Rendered inline template (0.4ms)
Completed 200 OK in 7ms (Views: 1.0ms | ActiveRecord: 0.6ms)
  [1m[36mLti2Tp::Registry Load (0.3ms)[0m  [1mSELECT `lti2_tp_registries`.* FROM `lti2_tp_registries`[0m


Started POST "/lti2_tp/registrations" for 127.0.0.1 at 2015-04-25 07:55:22 -0700
  [1m[35mActiveRecord::SchemaMigration Load (0.3ms)[0m  SELECT `schema_migrations`.* FROM `schema_migrations`
Processing by Lti2Tp::RegistrationsController#create as HTML
  Parameters: {"lti_message_type"=>"ToolProxyRegistrationRequest", "lti_version"=>"LTI-2p0", "user_id"=>"2", "roles"=>"urn:lti:sysrole:ims/lis/SysAdmin", "tc_profile_url"=>"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/0261cc10-cd89-0132-5379-20c9d07c6451", "reg_key"=>"0260e530-cd89-0132-5379-20c9d07c6451", "reg_password"=>"[FILTERED]", "launch_presentation_return_url"=>"http://rails.kinexis.com:4000/admin/tool_actions", "launch_presentation_document_target"=>"window"}
  [1m[36mLti2Tp::Tool Load (0.3ms)[0m  [1mSELECT  `lti2_tp_tools`.* FROM `lti2_tp_tools`   ORDER BY `lti2_tp_tools`.`id` ASC LIMIT 1[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (7.1ms)[0m  [1mINSERT INTO `lti2_tp_registrations` (`created_at`, `launch_presentation_return_url`, `lti_version`, `message_type`, `reg_key`, `reg_password`, `status`, `tc_profile_url`, `tenant_basename`, `tenant_name`, `tool_consumer_profile_json`, `tool_id`, `tool_profile_json`, `updated_at`, `user_id`) VALUES ('2015-04-25 14:55:22', 'http://rails.kinexis.com:4000/admin/tool_actions', 'LTI-2p0', 'registration', '0260e530-cd89-0132-5379-20c9d07c6451', '21b9cdad1c57e824005af8d5848b6136', 'received', 'http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/0261cc10-cd89-0132-5379-20c9d07c6451', 'Elan University', 'Elan University', '{\"@context\":[\"http://purl.imsglobal.org/ctx/lti/v2/ToolConsumerProfile\",{\"ltitcp\":\"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/0261cc10-cd89-0132-5379-20c9d07c6451#\"}],\"@type\":\"ToolConsumerProfile\",\"@id\":\"http://rails.kinexis.com:4000/tool_consumer_profiles/0261cc10-cd89-0132-5379-20c9d07c6451\",\"lti_version\":\"LTI-2p0\",\"guid\":\"0261cc10-cd89-0132-5379-20c9d07c6451\",\"product_instance\":{\"guid\":\"dcddf9808107-81ea-eaa4-1edf-5d24568c\",\"product_info\":{\"product_name\":{\"default_value\":\"Elan/LuMoS\",\"key\":\"product.name\"},\"product_version\":\"3.1\",\"description\":{\"default_value\":\"Elan University/LuMoS Learning Platform\",\"key\":\"product.version\"},\"technical_description\":{\"default_value\":\"LTI 1, 1.1 and 2.0 compliant\",\"key\":\"product.technicalDescription\"},\"product_family\":{\"code\":\"LuMoS\",\"vendor\":{\"code\":\"lms.LuMoS.org\",\"vendor_name\":{\"default_value\":\"LuMoS Corporation\",\"key\":\"product.vendor.name\"},\"description\":{\"default_value\":\"LuMoS Corporation is a fictitious vendor of a Learning Management System\",\"key\":\"product.vendor.description\"},\"website\":\"http://lms.LuMoS.org/products/omega\",\"timestamp\":\"2012-07-09T012:08:16-04:00\",\"contact\":{\"email\":\"support@lms.LuMoS.org\"}}}},\"support\":{\"email\":\"john.tibbetts@kinexis.com\"},\"service_owner\":{\"@id\":\"http://ec2.LuMoS.org/ServiceOwner\",\"timestamp\":\"2012-03-28T09:08:16-04:00\",\"service_owner_name\":{\"default_value\":\"Elan University\",\"key\":\"service_owner.name\"},\"description\":{\"default_value\":\"Elan University EC2 Cloud\",\"key\":\"service_owner.description\"},\"support\":{\"email\":\"techsupport@elan.edu\"}},\"service_provider\":{\"@id\":\"http://ec2.LuMoS.org/ServiceProvider\",\"guid\":\"ec2.LuMoS.org\",\"timestamp\":\"2012-07-09T012:08:16-04:00\",\"service_provider_name\":{\"default_value\":\"Elan University\",\"key\":\"service_provider.name\"},\"description\":{\"default_value\":\"Elan University EC2 Cloud\",\"key\":\"service_provider.description\"},\"support\":{\"email\":\"support@yasp.LuMoS.org\"}}},\"capability_offered\":[\"basic-lti-launch-request\",\"Result.autocreate\",\"Result.sourcedId\",\"User.id\",\"User.username\",\"CourseSection.sourcedId\",\"Person.sourcedId\",\"Person.email.primary\",\"Person.name.given\",\"Person.name.family\",\"Person.name.full\",\"Membership.role\",\"ToolProxy.custom.url\",\"ToolProxyBinding.custom.url\",\"LtiLink.custom.url\",\"ToolConsumerProfile.url\"],\"service_offered\":[{\"@type\":\"RestService\",\"@id\":\"ltitcp:ToolProxy.collection\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tools\",\"format\":[\"application/vnd.ims.lti.v2.toolproxy+json\"],\"action\":[\"POST\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:ToolProxy.item\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tools/{tool_proxy_guid}\",\"format\":[\"application/vnd.ims.lti.v2.toolproxy+json\"],\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:Result.item\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/resources/Result/{sourcedId}\",\"format\":[\"application/vnd.ims.lis.v2.result+json\"],\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:LtiLinkSettings\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tool_settings/{tool_proxy_guid}/ltilink/{link_id}\",\"format\":[\"application/vnd.ims.lti.v2.toolsettings+json\",\"application/vnd.ims.lti.v2.toolsettings.simple+json\"],\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:ToolProxyBindingSettings\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tool_settings/{tool_proxy_guid}/context/{context_id}\",\"format\":[\"application/vnd.ims.lti.v2.toolsettings+json\",\"application/vnd.ims.lti.v2.toolsettings.simple+json\"],\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:ToolProxySettings\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tool_settings/{tool_proxy_guid}\",\"format\":[\"application/vnd.ims.lti.v2.toolsettings+json\",\"application/vnd.ims.lti.v2.toolsettings.simple+json\"],\"action\":[\"GET\",\"PUT\"]}]}', 2, '{\"base_url_choice\":[{\"default_base_url\":\"http://rails.kinexis.com:5000\",\"selector\":{\"applies_to\":[\"IconEndpoint\",\"MessageHandler\"]}}],\"lti_version\":\"LTI-2p0\",\"message\":[{\"message_type\":[\"ToolProxyRegistrationRequest\",\"ToolProxyReregistrationRequest\"],\"parameter\":[{\"name\":\"tc_profile_url\",\"variable\":\"ToolConsumerProfile.url\"}],\"path\":\"http://rails.kinexis.com:5000/lti2_tp/reregistrations\"}],\"product_instance\":{\"guid\":\"fd75124a-140e-470f-944c-114d2d92bb40\",\"product_info\":{\"description\":{\"default_value\":\"Fabericious reflowable ePub3 Textbook\",\"key\":\"tool.description\"},\"product_family\":{\"code\":\"assessment-tool\",\"vendor\":{\"code\":\"fabericious.org\",\"contact\":{\"email\":\"info@fabericious.com\"},\"description\":{\"default_value\":\"Fabericious is a leading provider of interactive tools for education\",\"key\":\"tool.vendor.description\"},\"vendor_name\":{\"default_value\":\"Fab\",\"key\":\"tool.vendor.name\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\",\"website\":\"{http://rails.kinexis.com:5000}\"}},\"product_name\":{\"default_value\":\"LTI2 BookTools\",\"key\":\"tool.name\"},\"product_version\":\"10.3\",\"technical_description\":{\"default_value\":\"Support provided for all LTI 1 extensions as well as LTI 2\",\"key\":\"tool.technical\"}},\"service_provider\":{\"description\":{\"default_value\":\"Provider of high performance managed hosting environments\",\"key\":\"service_provider.description\"},\"guid\":\"18e7ea50-3d6d-4f6b-aff2-ed3ab577716c\",\"service_provider_name\":{\"default_value\":\"Amazon Cloud\",\"key\":\"service_provider.name\"},\"support\":{\"email\":\"support@ec2.fabericious.com\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\"},\"support\":{\"email\":\"helpdesk@fabericious.com\"}},\"resource_handler\":[{\"description\":{\"default_value\":\"Settings service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"tool_proxy_custom_url\",\"variable\":\"ToolProxy.custom.url\"},{\"name\":\"tool_proxy_binding_custom_url\",\"variable\":\"ToolProxyBinding.custom.url\"},{\"name\":\"lti_link_custom_url\",\"variable\":\"LtiLink.custom.url\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"ToolProxy.custom.url\",\"ToolProxyBinding.custom.url\",\"LtiLink.custom.url\"],\"path\":\"/settings\"}],\"resource_name\":{\"default_value\":\"Settings\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"setting\"}},{\"description\":{\"default_value\":\"Echo service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"fixed\":\"Narcissus\",\"name\":\"referrer\"},{\"fixed\":\"3.14159\",\"name\":\"pi\"},{\"name\":\"user_primary_email\",\"variable\":\"Person.email.primary\"},{\"name\":\"discipline\",\"variable\":\"CourseOffering.label\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\"],\"path\":\"/echoes\"}],\"resource_name\":{\"default_value\":\"Echo\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"echo\"}},{\"description\":{\"default_value\":\"Interactive resource\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"vbid\"},{\"name\":\"result_uri\",\"variable\":\"Result.uri\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"Result.autocreate\"],\"path\":\"/iresources\"}],\"resource_name\":{\"default_value\":\"InteractiveResource\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"iresource\"}}],\"service_offered\":[{\"@id\":\"http://rails.kinexis.com:5000/lti2_tp/ToolProxy.collection\",\"@type\":\"RestService\",\"action\":[\"PUT\"],\"endpoint\":\"http://rails.kinexis.com:5000/lti2_tp/tool_proxies\",\"format\":[\"\"]}]}', '2015-04-25 14:55:22', '2')[0m
  [1m[35m (2.3ms)[0m  COMMIT
Redirected to http://localhost:5000/lti_registration_wips?registration_id=124&return_url=/lti2_tp/registrations
Completed 302 Found in 130ms (ActiveRecord: 36.6ms)


Started GET "/lti_registration_wips?registration_id=124&return_url=/lti2_tp/registrations" for 127.0.0.1 at 2015-04-25 07:55:22 -0700
Processing by LtiRegistrationWipsController#index as HTML
  Parameters: {"registration_id"=>"124", "return_url"=>"/lti2_tp/registrations"}
  [1m[36mLti2Tp::Registration Load (0.9ms)[0m  [1mSELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 124 LIMIT 1[0m
  [1m[35m (0.8ms)[0m  BEGIN
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `lti_registration_wips` (`created_at`, `product_name`, `registration_id`, `registration_return_url`, `support_email`, `tenant_name`, `updated_at`) VALUES ('2015-04-25 14:55:22', 'Elan/LuMoS', 124, '/lti2_tp/registrations', 'john.tibbetts@kinexis.com', 'Elan University', '2015-04-25 14:55:22')[0m
  [1m[35m (0.7ms)[0m  COMMIT
  Rendered lti_registration_wips/_form.html.haml (179.4ms)
  Rendered lti_registration_wips/index.html.haml within layouts/application (190.4ms)
Completed 200 OK in 385ms (Views: 344.8ms | ActiveRecord: 22.4ms)


Started PATCH "/lti_registration_wips/216" for 127.0.0.1 at 2015-04-25 07:55:29 -0700
Processing by LtiRegistrationWipsController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"M43il2V3jEVaEPp6JXt1mmJv07NVYlbO1a58pW42DXs=", "lti_registration_wip"=>{"support_email"=>"john.tibbetts@kinexis.com", "product_name"=>"Elan/LuMoS", "tenant_name"=>"Elan University755"}, "commit"=>"Update Lti registration wip", "id"=>"216"}
  [1m[36mLtiRegistrationWip Load (0.4ms)[0m  [1mSELECT  `lti_registration_wips`.* FROM `lti_registration_wips`  WHERE `lti_registration_wips`.`id` = 216 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE `lti_registration_wips` SET `tenant_name` = 'Elan University755', `updated_at` = '2015-04-25 14:55:29' WHERE `lti_registration_wips`.`id` = 216[0m
  [1m[35m (11.2ms)[0m  COMMIT
  [1m[36mLti2Tp::Registration Load (0.4ms)[0m  [1mSELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 124 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE `lti2_tp_registrations` SET `tenant_name` = 'Elan University755', `updated_at` = '2015-04-25 14:55:29' WHERE `lti2_tp_registrations`.`id` = 124[0m
  [1m[35m (5.0ms)[0m  COMMIT
  [1m[36mLtiRegistrationWip Load (0.3ms)[0m  [1mSELECT  `lti_registration_wips`.* FROM `lti_registration_wips`  WHERE `lti_registration_wips`.`id` = 216 LIMIT 1[0m
  [1m[35mLti2Tp::Registration Load (0.5ms)[0m  SELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 124 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mTenant Exists (0.6ms)[0m  SELECT  1 AS one FROM `tenants`  WHERE `tenants`.`tenant_name` = BINARY 'Elan University755' LIMIT 1
  [1m[36mSQL (6.8ms)[0m  [1mINSERT INTO `tenants` (`created_at`, `tenant_name`, `updated_at`) VALUES ('2015-04-25 14:55:29', 'Elan University755', '2015-04-25 14:55:29')[0m
  [1m[35m (10.9ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  UPDATE `lti2_tp_registrations` SET `end_registration_id` = '09b7d950-cd89-0132-537a-20c9d07c6451', `tool_proxy_json` = '{\"@context\":[\"http://purl.imsglobal.org/ctx/lti/v2/ToolConsumerProfile\",{\"ltitcp\":\"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/0261cc10-cd89-0132-5379-20c9d07c6451#\"}],\"@type\":\"ToolProxy\",\"@id\":\"ToolProxyProposal_at_2015-04-25T14:55:29Z\",\"lti_version\":\"LTI-2p0\",\"tool_proxy_guid\":\"0260e530-cd89-0132-5379-20c9d07c6451\",\"tool_consumer_profile\":\"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/0261cc10-cd89-0132-5379-20c9d07c6451\",\"tool_profile\":{\"base_url_choice\":[{\"default_base_url\":\"http://rails.kinexis.com:5000\",\"selector\":{\"applies_to\":[\"IconEndpoint\",\"MessageHandler\"]}}],\"lti_version\":\"LTI-2p0\",\"message\":[{\"message_type\":[\"ToolProxyRegistrationRequest\",\"ToolProxyReregistrationRequest\"],\"parameter\":[{\"name\":\"tc_profile_url\",\"variable\":\"ToolConsumerProfile.url\"}],\"path\":\"http://rails.kinexis.com:5000/lti2_tp/reregistrations\"}],\"product_instance\":{\"guid\":\"fd75124a-140e-470f-944c-114d2d92bb40\",\"product_info\":{\"description\":{\"default_value\":\"Fabericious reflowable ePub3 Textbook\",\"key\":\"tool.description\"},\"product_family\":{\"code\":\"assessment-tool\",\"vendor\":{\"code\":\"fabericious.org\",\"contact\":{\"email\":\"info@fabericious.com\"},\"description\":{\"default_value\":\"Fabericious is a leading provider of interactive tools for education\",\"key\":\"tool.vendor.description\"},\"vendor_name\":{\"default_value\":\"Fab\",\"key\":\"tool.vendor.name\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\",\"website\":\"{http://rails.kinexis.com:5000}\"}},\"product_name\":{\"default_value\":\"LTI2 BookTools\",\"key\":\"tool.name\"},\"product_version\":\"10.3\",\"technical_description\":{\"default_value\":\"Support provided for all LTI 1 extensions as well as LTI 2\",\"key\":\"tool.technical\"}},\"service_provider\":{\"description\":{\"default_value\":\"Provider of high performance managed hosting environments\",\"key\":\"service_provider.description\"},\"guid\":\"18e7ea50-3d6d-4f6b-aff2-ed3ab577716c\",\"service_provider_name\":{\"default_value\":\"Amazon Cloud\",\"key\":\"service_provider.name\"},\"support\":{\"email\":\"support@ec2.fabericious.com\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\"},\"support\":{\"email\":\"helpdesk@fabericious.com\"}},\"resource_handler\":[{\"description\":{\"default_value\":\"Settings service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"tool_proxy_custom_url\",\"variable\":\"ToolProxy.custom.url\"},{\"name\":\"tool_proxy_binding_custom_url\",\"variable\":\"ToolProxyBinding.custom.url\"},{\"name\":\"lti_link_custom_url\",\"variable\":\"LtiLink.custom.url\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"ToolProxy.custom.url\",\"ToolProxyBinding.custom.url\",\"LtiLink.custom.url\"],\"path\":\"/settings\"}],\"resource_name\":{\"default_value\":\"Settings\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"setting\"}},{\"description\":{\"default_value\":\"Echo service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"fixed\":\"Narcissus\",\"name\":\"referrer\"},{\"fixed\":\"3.14159\",\"name\":\"pi\"},{\"name\":\"user_primary_email\",\"variable\":\"Person.email.primary\"},{\"name\":\"discipline\",\"variable\":\"CourseOffering.label\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\"],\"path\":\"/echoes\"}],\"resource_name\":{\"default_value\":\"Echo\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"echo\"}},{\"description\":{\"default_value\":\"Interactive resource\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"vbid\"},{\"name\":\"result_uri\",\"variable\":\"Result.uri\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"Result.autocreate\"],\"path\":\"/iresources\"}],\"resource_name\":{\"default_value\":\"InteractiveResource\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"iresource\"}}],\"service_offered\":[{\"@id\":\"http://rails.kinexis.com:5000/lti2_tp/ToolProxy.collection\",\"@type\":\"RestService\",\"action\":[\"PUT\"],\"endpoint\":\"http://rails.kinexis.com:5000/lti2_tp/tool_proxies\",\"format\":[\"\"]}]},\"security_contract\":{\"shared_secret\":\"543c4212f5dba09b9033bcc3cb8dcc2b\",\"tool_service\":[{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxy.collection\",\"action\":[\"POST\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxy.item\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:Result.item\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:LtiLinkSettings\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxyBindingSettings\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxySettings\",\"action\":[\"GET\",\"PUT\"]}]}}', `updated_at` = '2015-04-25 14:55:29' WHERE `lti2_tp_registrations`.`id` = 124
  [1m[36m (11.6ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE `lti2_tp_registrations` SET `status` = 'register', `updated_at` = '2015-04-25 14:55:29' WHERE `lti2_tp_registrations`.`id` = 124[0m
  [1m[35m (12.4ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mTenant Exists (0.4ms)[0m  SELECT  1 AS one FROM `tenants`  WHERE (`tenants`.`tenant_name` = BINARY 'Elan University755' AND `tenants`.`id` != 120) LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE `tenants` SET `secret` = '543c4212f5dba09b9033bcc3cb8dcc2b', `tenant_key` = '0260e530-cd89-0132-5379-20c9d07c6451', `updated_at` = '2015-04-25 14:55:29' WHERE `tenants`.`id` = 120[0m
  [1m[35m (5.5ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE `lti2_tp_registrations` SET `tenant_id` = 120, `updated_at` = '2015-04-25 14:55:29' WHERE `lti2_tp_registrations`.`id` = 124
  [1m[36m (0.6ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:5000/lti2_tp/registrations?status=success&tool_guid=0260e530-cd89-0132-5379-20c9d07c6451&&id=124
Completed 302 Found in 384ms (ActiveRecord: 91.4ms)


Started GET "/lti2_tp/registrations?status=success&tool_guid=0260e530-cd89-0132-5379-20c9d07c6451&&id=124" for 127.0.0.1 at 2015-04-25 07:55:29 -0700
Processing by Lti2Tp::RegistrationsController#index as HTML
  Parameters: {"status"=>"success", "tool_guid"=>"0260e530-cd89-0132-5379-20c9d07c6451", "id"=>"124"}
  [1m[35mLti2Tp::Registration Load (0.4ms)[0m  SELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 124 LIMIT 1
Redirected to http://rails.kinexis.com:4000/admin/tool_actions?status=success&tool_guid=0260e530-cd89-0132-5379-20c9d07c6451
Completed 302 Found in 2ms (ActiveRecord: 0.4ms)


Started POST "/lti2_tp/reregistrations" for 127.0.0.1 at 2015-04-25 07:55:33 -0700
Processing by Lti2Tp::RegistrationsController#reregister as HTML
  Parameters: {"tc_profile_url"=>"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/0261cc10-cd89-0132-5379-20c9d07c6451", "launch_presentation_return_url"=>"http://rails.kinexis.com:4000/admin/tool_actions", "lti_message_type"=>"ToolProxyReregistrationRequest", "oauth_consumer_key"=>"0260e530-cd89-0132-5379-20c9d07c6451", "oauth_nonce"=>"5565164592406", "oauth_signature_method"=>"HMAC-SHA1", "oauth_timestamp"=>"1429973733", "oauth_version"=>"1.0", "oauth_callback"=>"about:blank", "oauth_signature"=>"D3f+t4hsi3+nTLupNkPVcFKEgzs="}
Can't verify CSRF token authenticity
AuthHdr_Parms: {}
  [1m[36mTenant Load (0.4ms)[0m  [1mSELECT  `tenants`.* FROM `tenants`  WHERE `tenants`.`tenant_key` = '0260e530-cd89-0132-5379-20c9d07c6451'  ORDER BY `tenants`.`id` ASC LIMIT 1[0m
  [1m[35mLti2Tp::Registration Load (0.5ms)[0m  SELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`tenant_id` = 120  ORDER BY `lti2_tp_registrations`.`id` ASC LIMIT 1
AuthHdr_Parms: {}
in verify_signature
  [1m[36mLti2Tp::Registration Load (0.4ms)[0m  [1mSELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`tenant_name` = 'Elan University755'  ORDER BY `lti2_tp_registrations`.`id` ASC LIMIT 1[0m
  [1m[35mTenant Load (0.7ms)[0m  SELECT  `tenants`.* FROM `tenants`  WHERE `tenants`.`id` = 120 LIMIT 1
  [1m[36mLti2Tp::Tool Load (0.6ms)[0m  [1mSELECT  `lti2_tp_tools`.* FROM `lti2_tp_tools`  WHERE `lti2_tp_tools`.`id` = 2 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (6.8ms)[0m  [1mUPDATE `lti2_tp_registrations` SET `message_type` = 'reregistration', `reg_password` = '543c4212f5dba09b9033bcc3cb8dcc2b', `status` = 'received', `updated_at` = '2015-04-25 14:55:33' WHERE `lti2_tp_registrations`.`id` = 124[0m
  [1m[35m (16.3ms)[0m  COMMIT
Redirected to http://rails.kinexis.com:5000/lti_registration_wips?registration_id=124&return_url=/lti2_tp/registrations
Completed 302 Found in 84ms (ActiveRecord: 25.8ms)


Started GET "/lti_registration_wips?registration_id=124&return_url=/lti2_tp/registrations" for 127.0.0.1 at 2015-04-25 07:55:33 -0700
Processing by LtiRegistrationWipsController#index as HTML
  Parameters: {"registration_id"=>"124", "return_url"=>"/lti2_tp/registrations"}
  [1m[36mLti2Tp::Registration Load (0.5ms)[0m  [1mSELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 124 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `lti_registration_wips` (`created_at`, `product_name`, `registration_id`, `registration_return_url`, `support_email`, `tenant_name`, `updated_at`) VALUES ('2015-04-25 14:55:33', 'Elan/LuMoS', 124, '/lti2_tp/registrations', 'john.tibbetts@kinexis.com', 'Elan University755', '2015-04-25 14:55:33')[0m
  [1m[35m (6.0ms)[0m  COMMIT
  Rendered lti_registration_wips/_form.html.haml (12.0ms)
  Rendered lti_registration_wips/index.html.haml within layouts/application (14.1ms)
Completed 200 OK in 49ms (Views: 36.8ms | ActiveRecord: 6.9ms)


Started PATCH "/lti_registration_wips/217" for 127.0.0.1 at 2015-04-25 07:55:36 -0700
Processing by LtiRegistrationWipsController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"IQFZGw6wnlWi/3CBlIM3+AF7VnawHoFXbIG63BJKK5Q=", "lti_registration_wip"=>{"support_email"=>"john.tibbetts@kinexis.com", "product_name"=>"Elan/LuMoS", "tenant_name"=>"Elan University755"}, "commit"=>"Update Lti registration wip", "id"=>"217"}
  [1m[36mLtiRegistrationWip Load (0.3ms)[0m  [1mSELECT  `lti_registration_wips`.* FROM `lti_registration_wips`  WHERE `lti_registration_wips`.`id` = 217 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35mLti2Tp::Registration Load (0.3ms)[0m  SELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 124 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  `lti_registration_wips`.* FROM `lti_registration_wips`  WHERE `lti_registration_wips`.`id` = 217 LIMIT 1[0m  [["id", "217"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 124 LIMIT 1  [["id", 124]]
  [1m[36mTenant Load (0.3ms)[0m  [1mSELECT  `tenants`.* FROM `tenants`  WHERE `tenants`.`tenant_name` = 'Elan University755'  ORDER BY `tenants`.`id` ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mUPDATE `lti2_tp_registrations` SET `end_registration_id` = '0dc16ae0-cd89-0132-537a-20c9d07c6451', `proposed_tool_proxy_json` = '{\"@context\":[\"http://purl.imsglobal.org/ctx/lti/v2/ToolConsumerProfile\",{\"ltitcp\":\"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/0261cc10-cd89-0132-5379-20c9d07c6451#\"}],\"@type\":\"ToolProxy\",\"@id\":\"ToolProxyProposal_at_2015-04-25T14:55:36Z\",\"lti_version\":\"LTI-2p0\",\"tool_proxy_guid\":\"0260e530-cd89-0132-5379-20c9d07c6451\",\"tool_consumer_profile\":\"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/0261cc10-cd89-0132-5379-20c9d07c6451\",\"tool_profile\":{\"base_url_choice\":[{\"default_base_url\":\"http://rails.kinexis.com:5000\",\"selector\":{\"applies_to\":[\"IconEndpoint\",\"MessageHandler\"]}}],\"lti_version\":\"LTI-2p0\",\"message\":[{\"message_type\":[\"ToolProxyRegistrationRequest\",\"ToolProxyReregistrationRequest\"],\"parameter\":[{\"name\":\"tc_profile_url\",\"variable\":\"ToolConsumerProfile.url\"}],\"path\":\"http://rails.kinexis.com:5000/lti2_tp/reregistrations\"}],\"product_instance\":{\"guid\":\"fd75124a-140e-470f-944c-114d2d92bb40\",\"product_info\":{\"description\":{\"default_value\":\"Fabericious reflowable ePub3 Textbook\",\"key\":\"tool.description\"},\"product_family\":{\"code\":\"assessment-tool\",\"vendor\":{\"code\":\"fabericious.org\",\"contact\":{\"email\":\"info@fabericious.com\"},\"description\":{\"default_value\":\"Fabericious is a leading provider of interactive tools for education\",\"key\":\"tool.vendor.description\"},\"vendor_name\":{\"default_value\":\"Fab\",\"key\":\"tool.vendor.name\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\",\"website\":\"{http://rails.kinexis.com:5000}\"}},\"product_name\":{\"default_value\":\"LTI2 BookTools\",\"key\":\"tool.name\"},\"product_version\":\"10.3\",\"technical_description\":{\"default_value\":\"Support provided for all LTI 1 extensions as well as LTI 2\",\"key\":\"tool.technical\"}},\"service_provider\":{\"description\":{\"default_value\":\"Provider of high performance managed hosting environments\",\"key\":\"service_provider.description\"},\"guid\":\"18e7ea50-3d6d-4f6b-aff2-ed3ab577716c\",\"service_provider_name\":{\"default_value\":\"Amazon Cloud\",\"key\":\"service_provider.name\"},\"support\":{\"email\":\"support@ec2.fabericious.com\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\"},\"support\":{\"email\":\"helpdesk@fabericious.com\"}},\"resource_handler\":[{\"description\":{\"default_value\":\"Settings service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"tool_proxy_custom_url\",\"variable\":\"ToolProxy.custom.url\"},{\"name\":\"tool_proxy_binding_custom_url\",\"variable\":\"ToolProxyBinding.custom.url\"},{\"name\":\"lti_link_custom_url\",\"variable\":\"LtiLink.custom.url\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"ToolProxy.custom.url\",\"ToolProxyBinding.custom.url\",\"LtiLink.custom.url\"],\"path\":\"/settings\"}],\"resource_name\":{\"default_value\":\"Settings\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"setting\"}},{\"description\":{\"default_value\":\"Echo service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"fixed\":\"Narcissus\",\"name\":\"referrer\"},{\"fixed\":\"3.14159\",\"name\":\"pi\"},{\"name\":\"user_primary_email\",\"variable\":\"Person.email.primary\"},{\"name\":\"discipline\",\"variable\":\"CourseOffering.label\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\"],\"path\":\"/echoes\"}],\"resource_name\":{\"default_value\":\"Echo\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"echo\"}},{\"description\":{\"default_value\":\"Interactive resource\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"vbid\"},{\"name\":\"result_uri\",\"variable\":\"Result.uri\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"Result.autocreate\"],\"path\":\"/iresources\"}],\"resource_name\":{\"default_value\":\"InteractiveResource\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"iresource\"}}],\"service_offered\":[{\"@id\":\"http://rails.kinexis.com:5000/lti2_tp/ToolProxy.collection\",\"@type\":\"RestService\",\"action\":[\"PUT\"],\"endpoint\":\"http://rails.kinexis.com:5000/lti2_tp/tool_proxies\",\"format\":[\"\"]}]},\"security_contract\":{\"shared_secret\":\"7d183162b125ae8db3424eab62d703ce\",\"tool_service\":[{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxy.collection\",\"action\":[\"POST\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxy.item\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:Result.item\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:LtiLinkSettings\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxyBindingSettings\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxySettings\",\"action\":[\"GET\",\"PUT\"]}]}}', `updated_at` = '2015-04-25 14:55:36' WHERE `lti2_tp_registrations`.`id` = 124[0m
  [1m[35m (6.4ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (6.5ms)[0m  UPDATE `lti2_tp_registrations` SET `status` = 'reregistered', `updated_at` = '2015-04-25 14:55:36' WHERE `lti2_tp_registrations`.`id` = 124
  [1m[36m (6.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mTenant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `tenants`  WHERE (`tenants`.`tenant_name` = BINARY 'Elan University755' AND `tenants`.`id` != 120) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  COMMIT
Redirected to http://rails.kinexis.com:5000/lti2_tp/registrations?status=success&&id=124
Completed 302 Found in 106ms (ActiveRecord: 22.3ms)


Started GET "/lti2_tp/registrations?status=success&&id=124" for 127.0.0.1 at 2015-04-25 07:55:36 -0700
Processing by Lti2Tp::RegistrationsController#index as HTML
  Parameters: {"status"=>"success", "id"=>"124"}
  [1m[36mLti2Tp::Registration Load (0.4ms)[0m  [1mSELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 124 LIMIT 1[0m
Redirected to http://rails.kinexis.com:4000/admin/tool_actions?status=success
Completed 302 Found in 2ms (ActiveRecord: 0.4ms)


Started PUT "/lti2_tp/tool_proxies/0260e530-cd89-0132-5379-20c9d07c6451?correlation=0dc16ae0-cd89-0132-537a-20c9d07c6451" for 127.0.0.1 at 2015-04-25 07:55:37 -0700
Processing by Lti2Tp::RegistrationsController#complete_reregistration as HTML
  Parameters: {"correlation"=>"0dc16ae0-cd89-0132-537a-20c9d07c6451", "id"=>"0260e530-cd89-0132-5379-20c9d07c6451"}
Can't verify CSRF token authenticity
AuthHdr_Parms: {:oauth_consumer_key=>"0260e530-cd89-0132-5379-20c9d07c6451", :oauth_nonce=>"394584708449", :oauth_signature_method=>"HMAC-SHA1", :oauth_timestamp=>"1429973737", :oauth_version=>"1.0", :oauth_callback=>"about:blank", :oauth_signature=>"oQqwjcbXPlCR1IAkAmfQtOJrRgs="}
  [1m[35mTenant Load (0.6ms)[0m  SELECT  `tenants`.* FROM `tenants`  WHERE `tenants`.`tenant_key` = '0260e530-cd89-0132-5379-20c9d07c6451'  ORDER BY `tenants`.`id` ASC LIMIT 1
  [1m[36mLti2Tp::Registration Load (0.7ms)[0m  [1mSELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`tenant_id` = 120  ORDER BY `lti2_tp_registrations`.`id` ASC LIMIT 1[0m
AuthHdr_Parms: {:oauth_consumer_key=>"0260e530-cd89-0132-5379-20c9d07c6451", :oauth_nonce=>"394584708449", :oauth_signature_method=>"HMAC-SHA1", :oauth_timestamp=>"1429973737", :oauth_version=>"1.0", :oauth_callback=>"about:blank", :oauth_signature=>"oQqwjcbXPlCR1IAkAmfQtOJrRgs="}
in verify_signature
  [1m[35mLti2Tp::Registration Load (0.4ms)[0m  SELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`tenant_name` = 'Elan University755'  ORDER BY `lti2_tp_registrations`.`id` ASC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`tenant_id` = 120  ORDER BY `lti2_tp_registrations`.`id` ASC LIMIT 1[0m
  [1m[35mTenant Load (0.2ms)[0m  SELECT  `tenants`.* FROM `tenants`  WHERE `tenants`.`id` = 120 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mTenant Exists (0.3ms)[0m  SELECT  1 AS one FROM `tenants`  WHERE (`tenants`.`tenant_name` = BINARY 'Elan University755' AND `tenants`.`id` != 120) LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE `tenants` SET `secret` = '7d183162b125ae8db3424eab62d703ce', `updated_at` = '2015-04-25 14:55:37' WHERE `tenants`.`id` = 120[0m
  [1m[35m (4.6ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (2.1ms)[0m  UPDATE `lti2_tp_registrations` SET `end_registration_id` = NULL, `proposed_tool_proxy_json` = NULL, `reg_password` = '7d183162b125ae8db3424eab62d703ce', `tool_proxy_json` = '{\"@context\":[\"http://purl.imsglobal.org/ctx/lti/v2/ToolConsumerProfile\",{\"ltitcp\":\"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/0261cc10-cd89-0132-5379-20c9d07c6451#\"}],\"@type\":\"ToolProxy\",\"@id\":\"ToolProxyProposal_at_2015-04-25T14:55:36Z\",\"lti_version\":\"LTI-2p0\",\"tool_proxy_guid\":\"0260e530-cd89-0132-5379-20c9d07c6451\",\"tool_consumer_profile\":\"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/0261cc10-cd89-0132-5379-20c9d07c6451\",\"tool_profile\":{\"base_url_choice\":[{\"default_base_url\":\"http://rails.kinexis.com:5000\",\"selector\":{\"applies_to\":[\"IconEndpoint\",\"MessageHandler\"]}}],\"lti_version\":\"LTI-2p0\",\"message\":[{\"message_type\":[\"ToolProxyRegistrationRequest\",\"ToolProxyReregistrationRequest\"],\"parameter\":[{\"name\":\"tc_profile_url\",\"variable\":\"ToolConsumerProfile.url\"}],\"path\":\"http://rails.kinexis.com:5000/lti2_tp/reregistrations\"}],\"product_instance\":{\"guid\":\"fd75124a-140e-470f-944c-114d2d92bb40\",\"product_info\":{\"description\":{\"default_value\":\"Fabericious reflowable ePub3 Textbook\",\"key\":\"tool.description\"},\"product_family\":{\"code\":\"assessment-tool\",\"vendor\":{\"code\":\"fabericious.org\",\"contact\":{\"email\":\"info@fabericious.com\"},\"description\":{\"default_value\":\"Fabericious is a leading provider of interactive tools for education\",\"key\":\"tool.vendor.description\"},\"vendor_name\":{\"default_value\":\"Fab\",\"key\":\"tool.vendor.name\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\",\"website\":\"{http://rails.kinexis.com:5000}\"}},\"product_name\":{\"default_value\":\"LTI2 BookTools\",\"key\":\"tool.name\"},\"product_version\":\"10.3\",\"technical_description\":{\"default_value\":\"Support provided for all LTI 1 extensions as well as LTI 2\",\"key\":\"tool.technical\"}},\"service_provider\":{\"description\":{\"default_value\":\"Provider of high performance managed hosting environments\",\"key\":\"service_provider.description\"},\"guid\":\"18e7ea50-3d6d-4f6b-aff2-ed3ab577716c\",\"service_provider_name\":{\"default_value\":\"Amazon Cloud\",\"key\":\"service_provider.name\"},\"support\":{\"email\":\"support@ec2.fabericious.com\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\"},\"support\":{\"email\":\"helpdesk@fabericious.com\"}},\"resource_handler\":[{\"description\":{\"default_value\":\"Settings service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"tool_proxy_custom_url\",\"variable\":\"ToolProxy.custom.url\"},{\"name\":\"tool_proxy_binding_custom_url\",\"variable\":\"ToolProxyBinding.custom.url\"},{\"name\":\"lti_link_custom_url\",\"variable\":\"LtiLink.custom.url\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"ToolProxy.custom.url\",\"ToolProxyBinding.custom.url\",\"LtiLink.custom.url\"],\"path\":\"/settings\"}],\"resource_name\":{\"default_value\":\"Settings\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"setting\"}},{\"description\":{\"default_value\":\"Echo service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"fixed\":\"Narcissus\",\"name\":\"referrer\"},{\"fixed\":\"3.14159\",\"name\":\"pi\"},{\"name\":\"user_primary_email\",\"variable\":\"Person.email.primary\"},{\"name\":\"discipline\",\"variable\":\"CourseOffering.label\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\"],\"path\":\"/echoes\"}],\"resource_name\":{\"default_value\":\"Echo\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"echo\"}},{\"description\":{\"default_value\":\"Interactive resource\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"vbid\"},{\"name\":\"result_uri\",\"variable\":\"Result.uri\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"Result.autocreate\"],\"path\":\"/iresources\"}],\"resource_name\":{\"default_value\":\"InteractiveResource\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"iresource\"}}],\"service_offered\":[{\"@id\":\"http://rails.kinexis.com:5000/lti2_tp/ToolProxy.collection\",\"@type\":\"RestService\",\"action\":[\"PUT\"],\"endpoint\":\"http://rails.kinexis.com:5000/lti2_tp/tool_proxies\",\"format\":[\"\"]}]},\"security_contract\":{\"shared_secret\":\"7d183162b125ae8db3424eab62d703ce\",\"tool_service\":[{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxy.collection\",\"action\":[\"POST\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxy.item\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:Result.item\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:LtiLinkSettings\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxyBindingSettings\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxySettings\",\"action\":[\"GET\",\"PUT\"]}]}}', `updated_at` = '2015-04-25 14:55:37' WHERE `lti2_tp_registrations`.`id` = 124
  [1m[36m (0.5ms)[0m  [1mCOMMIT[0m
"reregistration complete for 0260e530-cd89-0132-5379-20c9d07c6451"
  Rendered text template (0.0ms)
Completed 200 OK in 26ms (Views: 2.6ms | ActiveRecord: 9.8ms)


Started POST "/echoes" for 127.0.0.1 at 2015-04-25 07:55:46 -0700
Processing by EchoesController#create as HTML
  Parameters: {"lti_version"=>"LTI-2p0", "lti_message_type"=>"basic-lti-launch-request", "resource_link_id"=>"2446", "user_id"=>"2", "roles"=>"Instructor", "launch_presentation_return_url"=>"http://rails.kinexis.com:4000/admin/course_page?method=show&course_id=2", "launch_presentation_document_target"=>"window", "context_id"=>"2", "launch_presentation_locale"=>"en_US", "context_label"=>"SMPL101A", "context_title"=>"Nursing Compendium", "lis_course_section_sourcedid"=>"2", "tool_consumer_info_product_family_code"=>"LuMoS", "tool_consumer_info_version"=>"3.1", "custom_referrer"=>"Narcissus", "custom_pi"=>"3.14159", "custom_user_primary_email"=>"admin@lumos.org", "custom_discipline"=>"SMPL101A", "oauth_consumer_key"=>"0260e530-cd89-0132-5379-20c9d07c6451", "oauth_nonce"=>"3577614796015", "oauth_signature_method"=>"HMAC-SHA1", "oauth_timestamp"=>"1429973746", "oauth_version"=>"1.0", "oauth_callback"=>"about:blank", "oauth_signature"=>"9pK8jVq6vfY89oLBT1hrJ11P718="}
Can't verify CSRF token authenticity
AuthHdr_Parms: {}
  [1m[35mTenant Load (0.4ms)[0m  SELECT  `tenants`.* FROM `tenants`  WHERE `tenants`.`tenant_key` = '0260e530-cd89-0132-5379-20c9d07c6451'  ORDER BY `tenants`.`id` ASC LIMIT 1
  [1m[36mLti2Tp::Registration Load (0.4ms)[0m  [1mSELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`tenant_id` = 120  ORDER BY `lti2_tp_registrations`.`id` ASC LIMIT 1[0m
AuthHdr_Parms: {}
in verify_signature
  Rendered inline template (0.3ms)
Completed 200 OK in 9ms (Views: 1.3ms | ActiveRecord: 0.8ms)
  [1m[36mLti2Tp::Registry Load (0.3ms)[0m  [1mSELECT `lti2_tp_registries`.* FROM `lti2_tp_registries`[0m
  [1m[36mLti2Tp::Registry Load (0.4ms)[0m  [1mSELECT `lti2_tp_registries`.* FROM `lti2_tp_registries`[0m


Started POST "/lti2_tp/registrations" for 127.0.0.1 at 2015-05-06 09:01:21 -0400
  [1m[35mActiveRecord::SchemaMigration Load (0.8ms)[0m  SELECT `schema_migrations`.* FROM `schema_migrations`
Processing by Lti2Tp::RegistrationsController#create as HTML
  Parameters: {"lti_message_type"=>"ToolProxyRegistrationRequest", "lti_version"=>"LTI-2p0", "user_id"=>"2", "roles"=>"urn:lti:sysrole:ims/lis/SysAdmin", "tc_profile_url"=>"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/e7a5b920-d61d-0132-88ed-20c9d07c6451", "reg_key"=>"e7a3f530-d61d-0132-88ed-20c9d07c6451", "reg_password"=>"[FILTERED]", "launch_presentation_return_url"=>"http://rails.kinexis.com:4000/admin/tool_actions", "launch_presentation_document_target"=>"window"}
  [1m[36mLti2Tp::Tool Load (1.5ms)[0m  [1mSELECT  `lti2_tp_tools`.* FROM `lti2_tp_tools`   ORDER BY `lti2_tp_tools`.`id` ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO `lti2_tp_registrations` (`created_at`, `launch_presentation_return_url`, `lti_version`, `message_type`, `reg_key`, `reg_password`, `status`, `tc_profile_url`, `tenant_basename`, `tenant_name`, `tool_consumer_profile_json`, `tool_id`, `tool_profile_json`, `updated_at`, `user_id`) VALUES ('2015-05-06 13:01:22', 'http://rails.kinexis.com:4000/admin/tool_actions', 'LTI-2p0', 'registration', 'e7a3f530-d61d-0132-88ed-20c9d07c6451', '6fb272bded7b3c67af72a72cf991d280', 'received', 'http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/e7a5b920-d61d-0132-88ed-20c9d07c6451', 'Elan University', 'Elan University', '{\"@context\":[\"http://purl.imsglobal.org/ctx/lti/v2/ToolConsumerProfile\",{\"ltitcp\":\"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/e7a5b920-d61d-0132-88ed-20c9d07c6451#\"}],\"@type\":\"ToolConsumerProfile\",\"@id\":\"http://rails.kinexis.com:4000/tool_consumer_profiles/e7a5b920-d61d-0132-88ed-20c9d07c6451\",\"lti_version\":\"LTI-2p0\",\"guid\":\"e7a5b920-d61d-0132-88ed-20c9d07c6451\",\"product_instance\":{\"guid\":\"dcddf9808107-81ea-eaa4-1edf-5d24568c\",\"product_info\":{\"product_name\":{\"default_value\":\"Elan/LuMoS\",\"key\":\"product.name\"},\"product_version\":\"3.1\",\"description\":{\"default_value\":\"Elan University/LuMoS Learning Platform\",\"key\":\"product.version\"},\"technical_description\":{\"default_value\":\"LTI 1, 1.1 and 2.0 compliant\",\"key\":\"product.technicalDescription\"},\"product_family\":{\"code\":\"LuMoS\",\"vendor\":{\"code\":\"lms.LuMoS.org\",\"vendor_name\":{\"default_value\":\"LuMoS Corporation\",\"key\":\"product.vendor.name\"},\"description\":{\"default_value\":\"LuMoS Corporation is a fictitious vendor of a Learning Management System\",\"key\":\"product.vendor.description\"},\"website\":\"http://lms.LuMoS.org/products/omega\",\"timestamp\":\"2012-07-09T012:08:16-04:00\",\"contact\":{\"email\":\"support@lms.LuMoS.org\"}}}},\"support\":{\"email\":\"john.tibbetts@kinexis.com\"},\"service_owner\":{\"@id\":\"http://ec2.LuMoS.org/ServiceOwner\",\"timestamp\":\"2012-03-28T09:08:16-04:00\",\"service_owner_name\":{\"default_value\":\"Elan University\",\"key\":\"service_owner.name\"},\"description\":{\"default_value\":\"Elan University EC2 Cloud\",\"key\":\"service_owner.description\"},\"support\":{\"email\":\"techsupport@elan.edu\"}},\"service_provider\":{\"@id\":\"http://ec2.LuMoS.org/ServiceProvider\",\"guid\":\"ec2.LuMoS.org\",\"timestamp\":\"2012-07-09T012:08:16-04:00\",\"service_provider_name\":{\"default_value\":\"Elan University\",\"key\":\"service_provider.name\"},\"description\":{\"default_value\":\"Elan University EC2 Cloud\",\"key\":\"service_provider.description\"},\"support\":{\"email\":\"support@yasp.LuMoS.org\"}}},\"capability_offered\":[\"basic-lti-launch-request\",\"Result.autocreate\",\"Result.sourcedId\",\"User.id\",\"User.username\",\"CourseSection.sourcedId\",\"Person.sourcedId\",\"Person.email.primary\",\"Person.name.given\",\"Person.name.family\",\"Person.name.full\",\"Membership.role\",\"ToolProxy.custom.url\",\"ToolProxyBinding.custom.url\",\"LtiLink.custom.url\",\"ToolConsumerProfile.url\",\"OAuth.splitsecret\"],\"service_offered\":[{\"@type\":\"RestService\",\"@id\":\"ltitcp:ToolProxy.collection\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tools\",\"format\":[\"application/vnd.ims.lti.v2.toolproxy+json\"],\"action\":[\"POST\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:ToolProxy.item\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tools/{tool_proxy_guid}\",\"format\":[\"application/vnd.ims.lti.v2.toolproxy+json\"],\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:Result.item\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/resources/Result/{sourcedId}\",\"format\":[\"application/vnd.ims.lis.v2.result+json\"],\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:LtiLinkSettings\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tool_settings/{tool_proxy_guid}/ltilink/{link_id}\",\"format\":[\"application/vnd.ims.lti.v2.toolsettings+json\",\"application/vnd.ims.lti.v2.toolsettings.simple+json\"],\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:ToolProxyBindingSettings\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tool_settings/{tool_proxy_guid}/context/{context_id}\",\"format\":[\"application/vnd.ims.lti.v2.toolsettings+json\",\"application/vnd.ims.lti.v2.toolsettings.simple+json\"],\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:ToolProxySettings\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tool_settings/{tool_proxy_guid}\",\"format\":[\"application/vnd.ims.lti.v2.toolsettings+json\",\"application/vnd.ims.lti.v2.toolsettings.simple+json\"],\"action\":[\"GET\",\"PUT\"]}]}', 2, '{\"base_url_choice\":[{\"default_base_url\":\"http://rails.kinexis.com:5000\",\"selector\":{\"applies_to\":[\"IconEndpoint\",\"MessageHandler\"]}}],\"lti_version\":\"LTI-2p0\",\"message\":[{\"message_type\":[\"ToolProxyRegistrationRequest\",\"ToolProxyReregistrationRequest\"],\"parameter\":[{\"name\":\"tc_profile_url\",\"variable\":\"ToolConsumerProfile.url\"}],\"path\":\"http://rails.kinexis.com:5000/lti2_tp/reregistrations\"}],\"product_instance\":{\"guid\":\"fd75124a-140e-470f-944c-114d2d92bb40\",\"product_info\":{\"description\":{\"default_value\":\"Fabericious reflowable ePub3 Textbook\",\"key\":\"tool.description\"},\"product_family\":{\"code\":\"assessment-tool\",\"vendor\":{\"code\":\"fabericious.org\",\"contact\":{\"email\":\"info@fabericious.com\"},\"description\":{\"default_value\":\"Fabericious is a leading provider of interactive tools for education\",\"key\":\"tool.vendor.description\"},\"vendor_name\":{\"default_value\":\"Fab\",\"key\":\"tool.vendor.name\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\",\"website\":\"{http://rails.kinexis.com:5000}\"}},\"product_name\":{\"default_value\":\"LTI2 BookTools\",\"key\":\"tool.name\"},\"product_version\":\"10.3\",\"technical_description\":{\"default_value\":\"Support provided for all LTI 1 extensions as well as LTI 2\",\"key\":\"tool.technical\"}},\"service_provider\":{\"description\":{\"default_value\":\"Provider of high performance managed hosting environments\",\"key\":\"service_provider.description\"},\"guid\":\"18e7ea50-3d6d-4f6b-aff2-ed3ab577716c\",\"service_provider_name\":{\"default_value\":\"Amazon Cloud\",\"key\":\"service_provider.name\"},\"support\":{\"email\":\"support@ec2.fabericious.com\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\"},\"support\":{\"email\":\"helpdesk@fabericious.com\"}},\"resource_handler\":[{\"description\":{\"default_value\":\"Settings service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"tool_proxy_custom_url\",\"variable\":\"ToolProxy.custom.url\"},{\"name\":\"tool_proxy_binding_custom_url\",\"variable\":\"ToolProxyBinding.custom.url\"},{\"name\":\"lti_link_custom_url\",\"variable\":\"LtiLink.custom.url\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"ToolProxy.custom.url\",\"ToolProxyBinding.custom.url\",\"LtiLink.custom.url\"],\"path\":\"/settings\"}],\"resource_name\":{\"default_value\":\"Settings\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"setting\"}},{\"description\":{\"default_value\":\"Echo service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"fixed\":\"Narcissus\",\"name\":\"referrer\"},{\"fixed\":\"3.14159\",\"name\":\"pi\"},{\"name\":\"user_primary_email\",\"variable\":\"Person.email.primary\"},{\"name\":\"discipline\",\"variable\":\"CourseOffering.label\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\"],\"path\":\"/echoes\"}],\"resource_name\":{\"default_value\":\"Echo\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"echo\"}},{\"description\":{\"default_value\":\"Interactive resource\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"vbid\"},{\"name\":\"result_uri\",\"variable\":\"Result.uri\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"Result.autocreate\"],\"path\":\"/iresources\"}],\"resource_name\":{\"default_value\":\"InteractiveResource\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"iresource\"}}],\"service_offered\":[{\"@id\":\"http://rails.kinexis.com:5000/lti2_tp/ToolProxy.collection\",\"@type\":\"RestService\",\"action\":[\"PUT\"],\"endpoint\":\"http://rails.kinexis.com:5000/lti2_tp/tool_proxies\",\"format\":[\"\"]}]}', '2015-05-06 13:01:22', '2')[0m
  [1m[35m (2.2ms)[0m  COMMIT
Redirected to http://localhost:5000/lti_registration_wips?registration_id=1&return_url=/lti2_tp/registrations
Completed 302 Found in 514ms (ActiveRecord: 15.2ms)


Started GET "/lti_registration_wips?registration_id=1&return_url=/lti2_tp/registrations" for 127.0.0.1 at 2015-05-06 09:01:22 -0400
Processing by LtiRegistrationWipsController#index as HTML
  Parameters: {"registration_id"=>"1", "return_url"=>"/lti2_tp/registrations"}
  [1m[36mLti2Tp::Registration Load (0.6ms)[0m  [1mSELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO `lti_registration_wips` (`created_at`, `product_name`, `registration_id`, `registration_return_url`, `support_email`, `tenant_name`, `updated_at`) VALUES ('2015-05-06 13:01:22', 'Elan/LuMoS', 1, '/lti2_tp/registrations', 'john.tibbetts@kinexis.com', 'Elan University', '2015-05-06 13:01:22')[0m
  [1m[35m (0.6ms)[0m  COMMIT
  Rendered lti_registration_wips/_form.html.haml (2177.3ms)
  Rendered lti_registration_wips/index.html.haml within layouts/application (2203.9ms)
Completed 200 OK in 3275ms (Views: 3109.0ms | ActiveRecord: 4.8ms)


Started PATCH "/lti_registration_wips/1" for 127.0.0.1 at 2015-05-06 09:01:34 -0400
Processing by LtiRegistrationWipsController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"+LNGKUlHZyaIdfF/ro2I5S5tDt5OHWNN3zlEqmt/BN8=", "lti_registration_wip"=>{"support_email"=>"john.tibbetts@kinexis.com", "product_name"=>"Elan/LuMoS", "tenant_name"=>"Elan University901"}, "commit"=>"Update Lti registration wip", "id"=>"1"}
  [1m[36mLtiRegistrationWip Load (0.8ms)[0m  [1mSELECT  `lti_registration_wips`.* FROM `lti_registration_wips`  WHERE `lti_registration_wips`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.8ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE `lti_registration_wips` SET `tenant_name` = 'Elan University901', `updated_at` = '2015-05-06 13:01:34' WHERE `lti_registration_wips`.`id` = 1[0m
  [1m[35m (0.7ms)[0m  COMMIT
  [1m[36mLti2Tp::Registration Load (1.1ms)[0m  [1mSELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mUPDATE `lti2_tp_registrations` SET `tenant_name` = 'Elan University901', `updated_at` = '2015-05-06 13:01:34' WHERE `lti2_tp_registrations`.`id` = 1[0m
  [1m[35m (1.2ms)[0m  COMMIT
  [1m[36mLtiRegistrationWip Load (1.1ms)[0m  [1mSELECT  `lti_registration_wips`.* FROM `lti_registration_wips`  WHERE `lti_registration_wips`.`id` = 1 LIMIT 1[0m
  [1m[35mLti2Tp::Registration Load (0.4ms)[0m  SELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 1 LIMIT 1
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35mTenant Exists (5.1ms)[0m  SELECT  1 AS one FROM `tenants`  WHERE `tenants`.`tenant_name` = BINARY 'Elan University901' LIMIT 1
  [1m[36mSQL (2.3ms)[0m  [1mINSERT INTO `tenants` (`created_at`, `tenant_name`, `updated_at`) VALUES ('2015-05-06 13:01:34', 'Elan University901', '2015-05-06 13:01:34')[0m
  [1m[35m (0.7ms)[0m  COMMIT
  [1m[36m (0.7ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.3ms)[0m  UPDATE `lti2_tp_registrations` SET `end_registration_id` = 'a70ca6d0-d61e-0132-88ee-20c9d07c6451', `tool_proxy_json` = '{\"@context\":[\"http://purl.imsglobal.org/ctx/lti/v2/ToolConsumerProfile\",{\"ltitcp\":\"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/e7a5b920-d61d-0132-88ed-20c9d07c6451#\"}],\"@type\":\"ToolProxy\",\"@id\":\"ToolProxyProposal_at_2015-05-06T13:01:34Z\",\"lti_version\":\"LTI-2p0\",\"tool_proxy_guid\":\"e7a3f530-d61d-0132-88ed-20c9d07c6451\",\"tool_consumer_profile\":\"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/e7a5b920-d61d-0132-88ed-20c9d07c6451\",\"tool_profile\":{\"base_url_choice\":[{\"default_base_url\":\"http://rails.kinexis.com:5000\",\"selector\":{\"applies_to\":[\"IconEndpoint\",\"MessageHandler\"]}}],\"lti_version\":\"LTI-2p0\",\"message\":[{\"message_type\":[\"ToolProxyRegistrationRequest\",\"ToolProxyReregistrationRequest\"],\"parameter\":[{\"name\":\"tc_profile_url\",\"variable\":\"ToolConsumerProfile.url\"}],\"path\":\"http://rails.kinexis.com:5000/lti2_tp/reregistrations\"}],\"product_instance\":{\"guid\":\"fd75124a-140e-470f-944c-114d2d92bb40\",\"product_info\":{\"description\":{\"default_value\":\"Fabericious reflowable ePub3 Textbook\",\"key\":\"tool.description\"},\"product_family\":{\"code\":\"assessment-tool\",\"vendor\":{\"code\":\"fabericious.org\",\"contact\":{\"email\":\"info@fabericious.com\"},\"description\":{\"default_value\":\"Fabericious is a leading provider of interactive tools for education\",\"key\":\"tool.vendor.description\"},\"vendor_name\":{\"default_value\":\"Fab\",\"key\":\"tool.vendor.name\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\",\"website\":\"{http://rails.kinexis.com:5000}\"}},\"product_name\":{\"default_value\":\"LTI2 BookTools\",\"key\":\"tool.name\"},\"product_version\":\"10.3\",\"technical_description\":{\"default_value\":\"Support provided for all LTI 1 extensions as well as LTI 2\",\"key\":\"tool.technical\"}},\"service_provider\":{\"description\":{\"default_value\":\"Provider of high performance managed hosting environments\",\"key\":\"service_provider.description\"},\"guid\":\"18e7ea50-3d6d-4f6b-aff2-ed3ab577716c\",\"service_provider_name\":{\"default_value\":\"Amazon Cloud\",\"key\":\"service_provider.name\"},\"support\":{\"email\":\"support@ec2.fabericious.com\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\"},\"support\":{\"email\":\"helpdesk@fabericious.com\"}},\"resource_handler\":[{\"description\":{\"default_value\":\"Settings service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"tool_proxy_custom_url\",\"variable\":\"ToolProxy.custom.url\"},{\"name\":\"tool_proxy_binding_custom_url\",\"variable\":\"ToolProxyBinding.custom.url\"},{\"name\":\"lti_link_custom_url\",\"variable\":\"LtiLink.custom.url\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"ToolProxy.custom.url\",\"ToolProxyBinding.custom.url\",\"LtiLink.custom.url\"],\"path\":\"/settings\"}],\"resource_name\":{\"default_value\":\"Settings\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"setting\"}},{\"description\":{\"default_value\":\"Echo service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"fixed\":\"Narcissus\",\"name\":\"referrer\"},{\"fixed\":\"3.14159\",\"name\":\"pi\"},{\"name\":\"user_primary_email\",\"variable\":\"Person.email.primary\"},{\"name\":\"discipline\",\"variable\":\"CourseOffering.label\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\"],\"path\":\"/echoes\"}],\"resource_name\":{\"default_value\":\"Echo\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"echo\"}},{\"description\":{\"default_value\":\"Interactive resource\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"vbid\"},{\"name\":\"result_uri\",\"variable\":\"Result.uri\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"Result.autocreate\"],\"path\":\"/iresources\"}],\"resource_name\":{\"default_value\":\"InteractiveResource\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"iresource\"}}],\"service_offered\":[{\"@id\":\"http://rails.kinexis.com:5000/lti2_tp/ToolProxy.collection\",\"@type\":\"RestService\",\"action\":[\"PUT\"],\"endpoint\":\"http://rails.kinexis.com:5000/lti2_tp/tool_proxies\",\"format\":[\"\"]}]},\"security_contract\":{\"shared_secret\":\"6c19707301d076fd40c12ffd53062091\",\"tool_service\":[{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxy.collection\",\"action\":[\"POST\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxy.item\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:Result.item\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:LtiLinkSettings\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxyBindingSettings\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxySettings\",\"action\":[\"GET\",\"PUT\"]}]}}', `updated_at` = '2015-05-06 13:06:37' WHERE `lti2_tp_registrations`.`id` = 1
  [1m[36m (1.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mUPDATE `lti2_tp_registrations` SET `status` = 'register', `updated_at` = '2015-05-06 13:06:37' WHERE `lti2_tp_registrations`.`id` = 1[0m
  [1m[35m (0.5ms)[0m  COMMIT
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mTenant Exists (3.1ms)[0m  SELECT  1 AS one FROM `tenants`  WHERE (`tenants`.`tenant_name` = BINARY 'Elan University901' AND `tenants`.`id` != 1) LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE `tenants` SET `secret` = '6c19707301d076fd40c12ffd53062091', `tenant_key` = 'e7a3f530-d61d-0132-88ed-20c9d07c6451', `updated_at` = '2015-05-06 13:06:37' WHERE `tenants`.`id` = 1[0m
  [1m[35m (0.7ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  UPDATE `lti2_tp_registrations` SET `tenant_id` = 1, `updated_at` = '2015-05-06 13:06:37' WHERE `lti2_tp_registrations`.`id` = 1
  [1m[36m (1.0ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:5000/lti2_tp/registrations?status=success&tool_guid=e7a3f530-d61d-0132-88ed-20c9d07c6451&&id=1
Completed 302 Found in 303510ms (ActiveRecord: 32.3ms)


Started GET "/lti2_tp/registrations?status=success&tool_guid=e7a3f530-d61d-0132-88ed-20c9d07c6451&&id=1" for 127.0.0.1 at 2015-05-06 09:06:38 -0400
Processing by Lti2Tp::RegistrationsController#index as HTML
  Parameters: {"status"=>"success", "tool_guid"=>"e7a3f530-d61d-0132-88ed-20c9d07c6451", "id"=>"1"}
  [1m[35mLti2Tp::Registration Load (0.6ms)[0m  SELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 1 LIMIT 1
Redirected to http://rails.kinexis.com:4000/admin/tool_actions?status=success&tool_guid=e7a3f530-d61d-0132-88ed-20c9d07c6451
Completed 302 Found in 10ms (ActiveRecord: 0.6ms)
  [1m[36mLti2Tp::Registry Load (0.4ms)[0m  [1mSELECT `lti2_tp_registries`.* FROM `lti2_tp_registries`[0m


Started POST "/lti2_tp/registrations" for 127.0.0.1 at 2015-05-06 09:07:38 -0400
  [1m[35mActiveRecord::SchemaMigration Load (0.5ms)[0m  SELECT `schema_migrations`.* FROM `schema_migrations`
Processing by Lti2Tp::RegistrationsController#create as HTML
  Parameters: {"lti_message_type"=>"ToolProxyRegistrationRequest", "lti_version"=>"LTI-2p0", "user_id"=>"2", "roles"=>"urn:lti:sysrole:ims/lis/SysAdmin", "tc_profile_url"=>"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/c8f5c420-d61e-0132-88ed-20c9d07c6451", "reg_key"=>"c8f5c000-d61e-0132-88ed-20c9d07c6451", "reg_password"=>"[FILTERED]", "launch_presentation_return_url"=>"http://rails.kinexis.com:4000/admin/tool_actions", "launch_presentation_document_target"=>"window"}
  [1m[36mLti2Tp::Tool Load (0.8ms)[0m  [1mSELECT  `lti2_tp_tools`.* FROM `lti2_tp_tools`   ORDER BY `lti2_tp_tools`.`id` ASC LIMIT 1[0m
  [1m[35m (0.5ms)[0m  BEGIN
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO `lti2_tp_registrations` (`created_at`, `launch_presentation_return_url`, `lti_version`, `message_type`, `reg_key`, `reg_password`, `status`, `tc_profile_url`, `tenant_basename`, `tenant_name`, `tool_consumer_profile_json`, `tool_id`, `tool_profile_json`, `updated_at`, `user_id`) VALUES ('2015-05-06 13:07:39', 'http://rails.kinexis.com:4000/admin/tool_actions', 'LTI-2p0', 'registration', 'c8f5c000-d61e-0132-88ed-20c9d07c6451', '2420bb0ddfd2fe3cde1f21c89e60dcc1', 'received', 'http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/c8f5c420-d61e-0132-88ed-20c9d07c6451', 'Elan University', 'Elan University', '{\"@context\":[\"http://purl.imsglobal.org/ctx/lti/v2/ToolConsumerProfile\",{\"ltitcp\":\"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/e7a5b920-d61d-0132-88ed-20c9d07c6451#\"}],\"@type\":\"ToolConsumerProfile\",\"@id\":\"http://rails.kinexis.com:4000/tool_consumer_profiles/e7a5b920-d61d-0132-88ed-20c9d07c6451\",\"lti_version\":\"LTI-2p0\",\"guid\":\"c8f5c420-d61e-0132-88ed-20c9d07c6451\",\"product_instance\":{\"guid\":\"dcddf9808107-81ea-eaa4-1edf-5d24568c\",\"product_info\":{\"product_name\":{\"default_value\":\"Elan/LuMoS\",\"key\":\"product.name\"},\"product_version\":\"3.1\",\"description\":{\"default_value\":\"Elan University/LuMoS Learning Platform\",\"key\":\"product.version\"},\"technical_description\":{\"default_value\":\"LTI 1, 1.1 and 2.0 compliant\",\"key\":\"product.technicalDescription\"},\"product_family\":{\"code\":\"LuMoS\",\"vendor\":{\"code\":\"lms.LuMoS.org\",\"vendor_name\":{\"default_value\":\"LuMoS Corporation\",\"key\":\"product.vendor.name\"},\"description\":{\"default_value\":\"LuMoS Corporation is a fictitious vendor of a Learning Management System\",\"key\":\"product.vendor.description\"},\"website\":\"http://lms.LuMoS.org/products/omega\",\"timestamp\":\"2012-07-09T012:08:16-04:00\",\"contact\":{\"email\":\"support@lms.LuMoS.org\"}}}},\"support\":{\"email\":\"john.tibbetts@kinexis.com\"},\"service_owner\":{\"@id\":\"http://ec2.LuMoS.org/ServiceOwner\",\"timestamp\":\"2012-03-28T09:08:16-04:00\",\"service_owner_name\":{\"default_value\":\"Elan University\",\"key\":\"service_owner.name\"},\"description\":{\"default_value\":\"Elan University EC2 Cloud\",\"key\":\"service_owner.description\"},\"support\":{\"email\":\"techsupport@elan.edu\"}},\"service_provider\":{\"@id\":\"http://ec2.LuMoS.org/ServiceProvider\",\"guid\":\"ec2.LuMoS.org\",\"timestamp\":\"2012-07-09T012:08:16-04:00\",\"service_provider_name\":{\"default_value\":\"Elan University\",\"key\":\"service_provider.name\"},\"description\":{\"default_value\":\"Elan University EC2 Cloud\",\"key\":\"service_provider.description\"},\"support\":{\"email\":\"support@yasp.LuMoS.org\"}}},\"capability_offered\":[\"basic-lti-launch-request\",\"Result.autocreate\",\"Result.sourcedId\",\"User.id\",\"User.username\",\"CourseSection.sourcedId\",\"Person.sourcedId\",\"Person.email.primary\",\"Person.name.given\",\"Person.name.family\",\"Person.name.full\",\"Membership.role\",\"ToolProxy.custom.url\",\"ToolProxyBinding.custom.url\",\"LtiLink.custom.url\",\"ToolConsumerProfile.url\",\"OAuth.splitsecret\"],\"service_offered\":[{\"@type\":\"RestService\",\"@id\":\"ltitcp:ToolProxy.collection\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tools\",\"format\":[\"application/vnd.ims.lti.v2.toolproxy+json\"],\"action\":[\"POST\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:ToolProxy.item\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tools/{tool_proxy_guid}\",\"format\":[\"application/vnd.ims.lti.v2.toolproxy+json\"],\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:Result.item\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/resources/Result/{sourcedId}\",\"format\":[\"application/vnd.ims.lis.v2.result+json\"],\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:LtiLinkSettings\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tool_settings/{tool_proxy_guid}/ltilink/{link_id}\",\"format\":[\"application/vnd.ims.lti.v2.toolsettings+json\",\"application/vnd.ims.lti.v2.toolsettings.simple+json\"],\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:ToolProxyBindingSettings\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tool_settings/{tool_proxy_guid}/context/{context_id}\",\"format\":[\"application/vnd.ims.lti.v2.toolsettings+json\",\"application/vnd.ims.lti.v2.toolsettings.simple+json\"],\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:ToolProxySettings\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tool_settings/{tool_proxy_guid}\",\"format\":[\"application/vnd.ims.lti.v2.toolsettings+json\",\"application/vnd.ims.lti.v2.toolsettings.simple+json\"],\"action\":[\"GET\",\"PUT\"]}]}', 2, '{\"base_url_choice\":[{\"default_base_url\":\"http://rails.kinexis.com:5000\",\"selector\":{\"applies_to\":[\"IconEndpoint\",\"MessageHandler\"]}}],\"lti_version\":\"LTI-2p0\",\"message\":[{\"message_type\":[\"ToolProxyRegistrationRequest\",\"ToolProxyReregistrationRequest\"],\"parameter\":[{\"name\":\"tc_profile_url\",\"variable\":\"ToolConsumerProfile.url\"}],\"path\":\"http://rails.kinexis.com:5000/lti2_tp/reregistrations\"}],\"product_instance\":{\"guid\":\"fd75124a-140e-470f-944c-114d2d92bb40\",\"product_info\":{\"description\":{\"default_value\":\"Fabericious reflowable ePub3 Textbook\",\"key\":\"tool.description\"},\"product_family\":{\"code\":\"assessment-tool\",\"vendor\":{\"code\":\"fabericious.org\",\"contact\":{\"email\":\"info@fabericious.com\"},\"description\":{\"default_value\":\"Fabericious is a leading provider of interactive tools for education\",\"key\":\"tool.vendor.description\"},\"vendor_name\":{\"default_value\":\"Fab\",\"key\":\"tool.vendor.name\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\",\"website\":\"{http://rails.kinexis.com:5000}\"}},\"product_name\":{\"default_value\":\"LTI2 BookTools\",\"key\":\"tool.name\"},\"product_version\":\"10.3\",\"technical_description\":{\"default_value\":\"Support provided for all LTI 1 extensions as well as LTI 2\",\"key\":\"tool.technical\"}},\"service_provider\":{\"description\":{\"default_value\":\"Provider of high performance managed hosting environments\",\"key\":\"service_provider.description\"},\"guid\":\"18e7ea50-3d6d-4f6b-aff2-ed3ab577716c\",\"service_provider_name\":{\"default_value\":\"Amazon Cloud\",\"key\":\"service_provider.name\"},\"support\":{\"email\":\"support@ec2.fabericious.com\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\"},\"support\":{\"email\":\"helpdesk@fabericious.com\"}},\"resource_handler\":[{\"description\":{\"default_value\":\"Settings service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"tool_proxy_custom_url\",\"variable\":\"ToolProxy.custom.url\"},{\"name\":\"tool_proxy_binding_custom_url\",\"variable\":\"ToolProxyBinding.custom.url\"},{\"name\":\"lti_link_custom_url\",\"variable\":\"LtiLink.custom.url\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"ToolProxy.custom.url\",\"ToolProxyBinding.custom.url\",\"LtiLink.custom.url\"],\"path\":\"/settings\"}],\"resource_name\":{\"default_value\":\"Settings\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"setting\"}},{\"description\":{\"default_value\":\"Echo service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"fixed\":\"Narcissus\",\"name\":\"referrer\"},{\"fixed\":\"3.14159\",\"name\":\"pi\"},{\"name\":\"user_primary_email\",\"variable\":\"Person.email.primary\"},{\"name\":\"discipline\",\"variable\":\"CourseOffering.label\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\"],\"path\":\"/echoes\"}],\"resource_name\":{\"default_value\":\"Echo\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"echo\"}},{\"description\":{\"default_value\":\"Interactive resource\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"vbid\"},{\"name\":\"result_uri\",\"variable\":\"Result.uri\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"Result.autocreate\"],\"path\":\"/iresources\"}],\"resource_name\":{\"default_value\":\"InteractiveResource\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"iresource\"}}],\"service_offered\":[{\"@id\":\"http://rails.kinexis.com:5000/lti2_tp/ToolProxy.collection\",\"@type\":\"RestService\",\"action\":[\"PUT\"],\"endpoint\":\"http://rails.kinexis.com:5000/lti2_tp/tool_proxies\",\"format\":[\"\"]}]}', '2015-05-06 13:07:39', '2')[0m
  [1m[35m (0.6ms)[0m  COMMIT
Redirected to http://localhost:5000/lti_registration_wips?registration_id=2&return_url=/lti2_tp/registrations
Completed 302 Found in 473ms (ActiveRecord: 19.2ms)


Started GET "/lti_registration_wips?registration_id=2&return_url=/lti2_tp/registrations" for 127.0.0.1 at 2015-05-06 09:07:39 -0400
Processing by LtiRegistrationWipsController#index as HTML
  Parameters: {"registration_id"=>"2", "return_url"=>"/lti2_tp/registrations"}
  [1m[36mLti2Tp::Registration Load (0.8ms)[0m  [1mSELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 2 LIMIT 1[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO `lti_registration_wips` (`created_at`, `product_name`, `registration_id`, `registration_return_url`, `support_email`, `tenant_name`, `updated_at`) VALUES ('2015-05-06 13:07:39', 'Elan/LuMoS', 2, '/lti2_tp/registrations', 'john.tibbetts@kinexis.com', 'Elan University', '2015-05-06 13:07:39')[0m
  [1m[35m (0.5ms)[0m  COMMIT
  Rendered lti_registration_wips/_form.html.haml (2709.5ms)
  Rendered lti_registration_wips/index.html.haml within layouts/application (2737.5ms)
Completed 200 OK in 3864ms (Views: 3708.6ms | ActiveRecord: 4.9ms)


Started PATCH "/lti_registration_wips/2" for 127.0.0.1 at 2015-05-06 09:07:53 -0400
Processing by LtiRegistrationWipsController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"+LNGKUlHZyaIdfF/ro2I5S5tDt5OHWNN3zlEqmt/BN8=", "lti_registration_wip"=>{"support_email"=>"john.tibbetts@kinexis.com", "product_name"=>"Elan/LuMoS", "tenant_name"=>"Elan University907"}, "commit"=>"Update Lti registration wip", "id"=>"2"}
  [1m[36mLtiRegistrationWip Load (1.1ms)[0m  [1mSELECT  `lti_registration_wips`.* FROM `lti_registration_wips`  WHERE `lti_registration_wips`.`id` = 2 LIMIT 1[0m
  [1m[35m (0.6ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE `lti_registration_wips` SET `tenant_name` = 'Elan University907', `updated_at` = '2015-05-06 13:07:53' WHERE `lti_registration_wips`.`id` = 2[0m
  [1m[35m (0.6ms)[0m  COMMIT
  [1m[36mLti2Tp::Registration Load (0.6ms)[0m  [1mSELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 2 LIMIT 1[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (1.2ms)[0m  [1mUPDATE `lti2_tp_registrations` SET `tenant_name` = 'Elan University907', `updated_at` = '2015-05-06 13:07:53' WHERE `lti2_tp_registrations`.`id` = 2[0m
  [1m[35m (1.6ms)[0m  COMMIT
  [1m[36mLtiRegistrationWip Load (0.7ms)[0m  [1mSELECT  `lti_registration_wips`.* FROM `lti_registration_wips`  WHERE `lti_registration_wips`.`id` = 2 LIMIT 1[0m
  [1m[35mLti2Tp::Registration Load (0.5ms)[0m  SELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 2 LIMIT 1
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mTenant Exists (0.7ms)[0m  SELECT  1 AS one FROM `tenants`  WHERE `tenants`.`tenant_name` = BINARY 'Elan University907' LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO `tenants` (`created_at`, `tenant_name`, `updated_at`) VALUES ('2015-05-06 13:08:38', 'Elan University907', '2015-05-06 13:08:38')[0m
  [1m[35m (0.9ms)[0m  COMMIT
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  UPDATE `lti2_tp_registrations` SET `end_registration_id` = 'ef874e90-d61e-0132-88ef-20c9d07c6451', `tool_proxy_json` = '{\"@context\":[\"http://purl.imsglobal.org/ctx/lti/v2/ToolConsumerProfile\",{\"ltitcp\":\"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/e7a5b920-d61d-0132-88ed-20c9d07c6451#\"}],\"@type\":\"ToolProxy\",\"@id\":\"ToolProxyProposal_at_2015-05-06T13:08:38Z\",\"lti_version\":\"LTI-2p0\",\"tool_proxy_guid\":\"c8f5c000-d61e-0132-88ed-20c9d07c6451\",\"tool_consumer_profile\":\"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/c8f5c420-d61e-0132-88ed-20c9d07c6451\",\"tool_profile\":{\"base_url_choice\":[{\"default_base_url\":\"http://rails.kinexis.com:5000\",\"selector\":{\"applies_to\":[\"IconEndpoint\",\"MessageHandler\"]}}],\"lti_version\":\"LTI-2p0\",\"message\":[{\"message_type\":[\"ToolProxyRegistrationRequest\",\"ToolProxyReregistrationRequest\"],\"parameter\":[{\"name\":\"tc_profile_url\",\"variable\":\"ToolConsumerProfile.url\"}],\"path\":\"http://rails.kinexis.com:5000/lti2_tp/reregistrations\"}],\"product_instance\":{\"guid\":\"fd75124a-140e-470f-944c-114d2d92bb40\",\"product_info\":{\"description\":{\"default_value\":\"Fabericious reflowable ePub3 Textbook\",\"key\":\"tool.description\"},\"product_family\":{\"code\":\"assessment-tool\",\"vendor\":{\"code\":\"fabericious.org\",\"contact\":{\"email\":\"info@fabericious.com\"},\"description\":{\"default_value\":\"Fabericious is a leading provider of interactive tools for education\",\"key\":\"tool.vendor.description\"},\"vendor_name\":{\"default_value\":\"Fab\",\"key\":\"tool.vendor.name\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\",\"website\":\"{http://rails.kinexis.com:5000}\"}},\"product_name\":{\"default_value\":\"LTI2 BookTools\",\"key\":\"tool.name\"},\"product_version\":\"10.3\",\"technical_description\":{\"default_value\":\"Support provided for all LTI 1 extensions as well as LTI 2\",\"key\":\"tool.technical\"}},\"service_provider\":{\"description\":{\"default_value\":\"Provider of high performance managed hosting environments\",\"key\":\"service_provider.description\"},\"guid\":\"18e7ea50-3d6d-4f6b-aff2-ed3ab577716c\",\"service_provider_name\":{\"default_value\":\"Amazon Cloud\",\"key\":\"service_provider.name\"},\"support\":{\"email\":\"support@ec2.fabericious.com\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\"},\"support\":{\"email\":\"helpdesk@fabericious.com\"}},\"resource_handler\":[{\"description\":{\"default_value\":\"Settings service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"tool_proxy_custom_url\",\"variable\":\"ToolProxy.custom.url\"},{\"name\":\"tool_proxy_binding_custom_url\",\"variable\":\"ToolProxyBinding.custom.url\"},{\"name\":\"lti_link_custom_url\",\"variable\":\"LtiLink.custom.url\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"ToolProxy.custom.url\",\"ToolProxyBinding.custom.url\",\"LtiLink.custom.url\"],\"path\":\"/settings\"}],\"resource_name\":{\"default_value\":\"Settings\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"setting\"}},{\"description\":{\"default_value\":\"Echo service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"fixed\":\"Narcissus\",\"name\":\"referrer\"},{\"fixed\":\"3.14159\",\"name\":\"pi\"},{\"name\":\"user_primary_email\",\"variable\":\"Person.email.primary\"},{\"name\":\"discipline\",\"variable\":\"CourseOffering.label\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\"],\"path\":\"/echoes\"}],\"resource_name\":{\"default_value\":\"Echo\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"echo\"}},{\"description\":{\"default_value\":\"Interactive resource\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"vbid\"},{\"name\":\"result_uri\",\"variable\":\"Result.uri\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"Result.autocreate\"],\"path\":\"/iresources\"}],\"resource_name\":{\"default_value\":\"InteractiveResource\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"iresource\"}}],\"service_offered\":[{\"@id\":\"http://rails.kinexis.com:5000/lti2_tp/ToolProxy.collection\",\"@type\":\"RestService\",\"action\":[\"PUT\"],\"endpoint\":\"http://rails.kinexis.com:5000/lti2_tp/tool_proxies\",\"format\":[\"\"]}]},\"security_contract\":{\"shared_secret\":\"b2cf258546e16aaa90c645382b846dd7\",\"tool_service\":[{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxy.collection\",\"action\":[\"POST\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxy.item\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:Result.item\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:LtiLinkSettings\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxyBindingSettings\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxySettings\",\"action\":[\"GET\",\"PUT\"]}]}}', `updated_at` = '2015-05-06 13:08:39' WHERE `lti2_tp_registrations`.`id` = 2
  [1m[36m (1.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36mSQL (0.9ms)[0m  [1mUPDATE `lti2_tp_registrations` SET `status` = 'register', `updated_at` = '2015-05-06 13:08:39' WHERE `lti2_tp_registrations`.`id` = 2[0m
  [1m[35m (0.8ms)[0m  COMMIT
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mTenant Exists (0.6ms)[0m  SELECT  1 AS one FROM `tenants`  WHERE (`tenants`.`tenant_name` = BINARY 'Elan University907' AND `tenants`.`id` != 2) LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE `tenants` SET `secret` = 'b2cf258546e16aaa90c645382b846dd7', `tenant_key` = 'c8f5c000-d61e-0132-88ed-20c9d07c6451', `updated_at` = '2015-05-06 13:08:39' WHERE `tenants`.`id` = 2[0m
  [1m[35m (0.6ms)[0m  COMMIT
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.1ms)[0m  UPDATE `lti2_tp_registrations` SET `tenant_id` = 2, `updated_at` = '2015-05-06 13:08:39' WHERE `lti2_tp_registrations`.`id` = 2
  [1m[36m (1.0ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:5000/lti2_tp/registrations?status=success&tool_guid=c8f5c000-d61e-0132-88ed-20c9d07c6451&&id=2
Completed 302 Found in 46208ms (ActiveRecord: 22.5ms)


Started GET "/lti2_tp/registrations?status=success&tool_guid=c8f5c000-d61e-0132-88ed-20c9d07c6451&&id=2" for 127.0.0.1 at 2015-05-06 09:08:39 -0400
Processing by Lti2Tp::RegistrationsController#index as HTML
  Parameters: {"status"=>"success", "tool_guid"=>"c8f5c000-d61e-0132-88ed-20c9d07c6451", "id"=>"2"}
  [1m[35mLti2Tp::Registration Load (0.6ms)[0m  SELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 2 LIMIT 1
Redirected to http://rails.kinexis.com:4000/admin/tool_actions?status=success&tool_guid=c8f5c000-d61e-0132-88ed-20c9d07c6451
Completed 302 Found in 12ms (ActiveRecord: 0.6ms)


Started POST "/lti2_tp/registrations" for 127.0.0.1 at 2015-05-06 09:10:32 -0400
Processing by Lti2Tp::RegistrationsController#create as HTML
  Parameters: {"lti_message_type"=>"ToolProxyRegistrationRequest", "lti_version"=>"LTI-2p0", "user_id"=>"2", "roles"=>"urn:lti:sysrole:ims/lis/SysAdmin", "tc_profile_url"=>"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/30ff7b40-d61f-0132-88ed-20c9d07c6451", "reg_key"=>"30ff7650-d61f-0132-88ed-20c9d07c6451", "reg_password"=>"[FILTERED]", "launch_presentation_return_url"=>"http://rails.kinexis.com:4000/admin/tool_actions", "launch_presentation_document_target"=>"window"}
  [1m[36mLti2Tp::Tool Load (1.0ms)[0m  [1mSELECT  `lti2_tp_tools`.* FROM `lti2_tp_tools`   ORDER BY `lti2_tp_tools`.`id` ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO `lti2_tp_registrations` (`created_at`, `launch_presentation_return_url`, `lti_version`, `message_type`, `reg_key`, `reg_password`, `status`, `tc_profile_url`, `tenant_basename`, `tenant_name`, `tool_consumer_profile_json`, `tool_id`, `tool_profile_json`, `updated_at`, `user_id`) VALUES ('2015-05-06 13:10:33', 'http://rails.kinexis.com:4000/admin/tool_actions', 'LTI-2p0', 'registration', '30ff7650-d61f-0132-88ed-20c9d07c6451', '2d6d77bf89ab860b6e7cce8fb7c767f7', 'received', 'http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/30ff7b40-d61f-0132-88ed-20c9d07c6451', 'Elan University', 'Elan University', '{\"@context\":[\"http://purl.imsglobal.org/ctx/lti/v2/ToolConsumerProfile\",{\"ltitcp\":\"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/e7a5b920-d61d-0132-88ed-20c9d07c6451#\"}],\"@type\":\"ToolConsumerProfile\",\"@id\":\"http://rails.kinexis.com:4000/tool_consumer_profiles/e7a5b920-d61d-0132-88ed-20c9d07c6451\",\"lti_version\":\"LTI-2p0\",\"guid\":\"30ff7b40-d61f-0132-88ed-20c9d07c6451\",\"product_instance\":{\"guid\":\"dcddf9808107-81ea-eaa4-1edf-5d24568c\",\"product_info\":{\"product_name\":{\"default_value\":\"Elan/LuMoS\",\"key\":\"product.name\"},\"product_version\":\"3.1\",\"description\":{\"default_value\":\"Elan University/LuMoS Learning Platform\",\"key\":\"product.version\"},\"technical_description\":{\"default_value\":\"LTI 1, 1.1 and 2.0 compliant\",\"key\":\"product.technicalDescription\"},\"product_family\":{\"code\":\"LuMoS\",\"vendor\":{\"code\":\"lms.LuMoS.org\",\"vendor_name\":{\"default_value\":\"LuMoS Corporation\",\"key\":\"product.vendor.name\"},\"description\":{\"default_value\":\"LuMoS Corporation is a fictitious vendor of a Learning Management System\",\"key\":\"product.vendor.description\"},\"website\":\"http://lms.LuMoS.org/products/omega\",\"timestamp\":\"2012-07-09T012:08:16-04:00\",\"contact\":{\"email\":\"support@lms.LuMoS.org\"}}}},\"support\":{\"email\":\"john.tibbetts@kinexis.com\"},\"service_owner\":{\"@id\":\"http://ec2.LuMoS.org/ServiceOwner\",\"timestamp\":\"2012-03-28T09:08:16-04:00\",\"service_owner_name\":{\"default_value\":\"Elan University\",\"key\":\"service_owner.name\"},\"description\":{\"default_value\":\"Elan University EC2 Cloud\",\"key\":\"service_owner.description\"},\"support\":{\"email\":\"techsupport@elan.edu\"}},\"service_provider\":{\"@id\":\"http://ec2.LuMoS.org/ServiceProvider\",\"guid\":\"ec2.LuMoS.org\",\"timestamp\":\"2012-07-09T012:08:16-04:00\",\"service_provider_name\":{\"default_value\":\"Elan University\",\"key\":\"service_provider.name\"},\"description\":{\"default_value\":\"Elan University EC2 Cloud\",\"key\":\"service_provider.description\"},\"support\":{\"email\":\"support@yasp.LuMoS.org\"}}},\"capability_offered\":[\"basic-lti-launch-request\",\"Result.autocreate\",\"Result.sourcedId\",\"User.id\",\"User.username\",\"CourseSection.sourcedId\",\"Person.sourcedId\",\"Person.email.primary\",\"Person.name.given\",\"Person.name.family\",\"Person.name.full\",\"Membership.role\",\"ToolProxy.custom.url\",\"ToolProxyBinding.custom.url\",\"LtiLink.custom.url\",\"ToolConsumerProfile.url\",\"OAuth.splitsecret\"],\"service_offered\":[{\"@type\":\"RestService\",\"@id\":\"ltitcp:ToolProxy.collection\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tools\",\"format\":[\"application/vnd.ims.lti.v2.toolproxy+json\"],\"action\":[\"POST\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:ToolProxy.item\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tools/{tool_proxy_guid}\",\"format\":[\"application/vnd.ims.lti.v2.toolproxy+json\"],\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:Result.item\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/resources/Result/{sourcedId}\",\"format\":[\"application/vnd.ims.lis.v2.result+json\"],\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:LtiLinkSettings\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tool_settings/{tool_proxy_guid}/ltilink/{link_id}\",\"format\":[\"application/vnd.ims.lti.v2.toolsettings+json\",\"application/vnd.ims.lti.v2.toolsettings.simple+json\"],\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:ToolProxyBindingSettings\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tool_settings/{tool_proxy_guid}/context/{context_id}\",\"format\":[\"application/vnd.ims.lti.v2.toolsettings+json\",\"application/vnd.ims.lti.v2.toolsettings.simple+json\"],\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:ToolProxySettings\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tool_settings/{tool_proxy_guid}\",\"format\":[\"application/vnd.ims.lti.v2.toolsettings+json\",\"application/vnd.ims.lti.v2.toolsettings.simple+json\"],\"action\":[\"GET\",\"PUT\"]}]}', 2, '{\"base_url_choice\":[{\"default_base_url\":\"http://rails.kinexis.com:5000\",\"selector\":{\"applies_to\":[\"IconEndpoint\",\"MessageHandler\"]}}],\"lti_version\":\"LTI-2p0\",\"message\":[{\"message_type\":[\"ToolProxyRegistrationRequest\",\"ToolProxyReregistrationRequest\"],\"parameter\":[{\"name\":\"tc_profile_url\",\"variable\":\"ToolConsumerProfile.url\"}],\"path\":\"http://rails.kinexis.com:5000/lti2_tp/reregistrations\"}],\"product_instance\":{\"guid\":\"fd75124a-140e-470f-944c-114d2d92bb40\",\"product_info\":{\"description\":{\"default_value\":\"Fabericious reflowable ePub3 Textbook\",\"key\":\"tool.description\"},\"product_family\":{\"code\":\"assessment-tool\",\"vendor\":{\"code\":\"fabericious.org\",\"contact\":{\"email\":\"info@fabericious.com\"},\"description\":{\"default_value\":\"Fabericious is a leading provider of interactive tools for education\",\"key\":\"tool.vendor.description\"},\"vendor_name\":{\"default_value\":\"Fab\",\"key\":\"tool.vendor.name\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\",\"website\":\"{http://rails.kinexis.com:5000}\"}},\"product_name\":{\"default_value\":\"LTI2 BookTools\",\"key\":\"tool.name\"},\"product_version\":\"10.3\",\"technical_description\":{\"default_value\":\"Support provided for all LTI 1 extensions as well as LTI 2\",\"key\":\"tool.technical\"}},\"service_provider\":{\"description\":{\"default_value\":\"Provider of high performance managed hosting environments\",\"key\":\"service_provider.description\"},\"guid\":\"18e7ea50-3d6d-4f6b-aff2-ed3ab577716c\",\"service_provider_name\":{\"default_value\":\"Amazon Cloud\",\"key\":\"service_provider.name\"},\"support\":{\"email\":\"support@ec2.fabericious.com\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\"},\"support\":{\"email\":\"helpdesk@fabericious.com\"}},\"resource_handler\":[{\"description\":{\"default_value\":\"Settings service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"tool_proxy_custom_url\",\"variable\":\"ToolProxy.custom.url\"},{\"name\":\"tool_proxy_binding_custom_url\",\"variable\":\"ToolProxyBinding.custom.url\"},{\"name\":\"lti_link_custom_url\",\"variable\":\"LtiLink.custom.url\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"ToolProxy.custom.url\",\"ToolProxyBinding.custom.url\",\"LtiLink.custom.url\"],\"path\":\"/settings\"}],\"resource_name\":{\"default_value\":\"Settings\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"setting\"}},{\"description\":{\"default_value\":\"Echo service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"fixed\":\"Narcissus\",\"name\":\"referrer\"},{\"fixed\":\"3.14159\",\"name\":\"pi\"},{\"name\":\"user_primary_email\",\"variable\":\"Person.email.primary\"},{\"name\":\"discipline\",\"variable\":\"CourseOffering.label\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\"],\"path\":\"/echoes\"}],\"resource_name\":{\"default_value\":\"Echo\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"echo\"}},{\"description\":{\"default_value\":\"Interactive resource\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"vbid\"},{\"name\":\"result_uri\",\"variable\":\"Result.uri\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"Result.autocreate\"],\"path\":\"/iresources\"}],\"resource_name\":{\"default_value\":\"InteractiveResource\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"iresource\"}}],\"service_offered\":[{\"@id\":\"http://rails.kinexis.com:5000/lti2_tp/ToolProxy.collection\",\"@type\":\"RestService\",\"action\":[\"PUT\"],\"endpoint\":\"http://rails.kinexis.com:5000/lti2_tp/tool_proxies\",\"format\":[\"\"]}]}', '2015-05-06 13:10:33', '2')[0m
  [1m[35m (2.6ms)[0m  COMMIT
Redirected to http://localhost:5000/lti_registration_wips?registration_id=3&return_url=/lti2_tp/registrations
Completed 302 Found in 212ms (ActiveRecord: 4.8ms)


Started GET "/lti_registration_wips?registration_id=3&return_url=/lti2_tp/registrations" for 127.0.0.1 at 2015-05-06 09:10:33 -0400
Processing by LtiRegistrationWipsController#index as HTML
  Parameters: {"registration_id"=>"3", "return_url"=>"/lti2_tp/registrations"}
  [1m[36mLti2Tp::Registration Load (0.5ms)[0m  [1mSELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 3 LIMIT 1[0m
  [1m[35m (1.7ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO `lti_registration_wips` (`created_at`, `product_name`, `registration_id`, `registration_return_url`, `support_email`, `tenant_name`, `updated_at`) VALUES ('2015-05-06 13:16:02', 'Elan/LuMoS', 3, '/lti2_tp/registrations', 'john.tibbetts@kinexis.com', 'Elan University', '2015-05-06 13:16:02')[0m
  [1m[35m (4.1ms)[0m  COMMIT
  Rendered lti_registration_wips/_form.html.haml (130.8ms)
  Rendered lti_registration_wips/index.html.haml within layouts/application (137.4ms)
Completed 200 OK in 329825ms (Views: 240.3ms | ActiveRecord: 6.9ms)
  [1m[36mLti2Tp::Registry Load (0.5ms)[0m  [1mSELECT `lti2_tp_registries`.* FROM `lti2_tp_registries`[0m


Started POST "/lti2_tp/registrations" for 127.0.0.1 at 2015-05-06 09:16:48 -0400
  [1m[35mActiveRecord::SchemaMigration Load (0.7ms)[0m  SELECT `schema_migrations`.* FROM `schema_migrations`
Processing by Lti2Tp::RegistrationsController#create as HTML
  Parameters: {"lti_message_type"=>"ToolProxyRegistrationRequest", "lti_version"=>"LTI-2p0", "user_id"=>"2", "roles"=>"urn:lti:sysrole:ims/lis/SysAdmin", "tc_profile_url"=>"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/30ff7b40-d61f-0132-88ed-20c9d07c6451", "reg_key"=>"30ff7650-d61f-0132-88ed-20c9d07c6451", "reg_password"=>"[FILTERED]", "launch_presentation_return_url"=>"http://rails.kinexis.com:4000/admin/tool_actions", "launch_presentation_document_target"=>"window"}
  [1m[36mLti2Tp::Tool Load (0.7ms)[0m  [1mSELECT  `lti2_tp_tools`.* FROM `lti2_tp_tools`   ORDER BY `lti2_tp_tools`.`id` ASC LIMIT 1[0m
  [1m[35m (0.8ms)[0m  BEGIN
  [1m[36mSQL (4.6ms)[0m  [1mINSERT INTO `lti2_tp_registrations` (`created_at`, `launch_presentation_return_url`, `lti_version`, `message_type`, `reg_key`, `reg_password`, `status`, `tc_profile_url`, `tenant_basename`, `tenant_name`, `tool_consumer_profile_json`, `tool_id`, `tool_profile_json`, `updated_at`, `user_id`) VALUES ('2015-05-06 13:16:49', 'http://rails.kinexis.com:4000/admin/tool_actions', 'LTI-2p0', 'registration', '30ff7650-d61f-0132-88ed-20c9d07c6451', '2d6d77bf89ab860b6e7cce8fb7c767f7', 'received', 'http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/30ff7b40-d61f-0132-88ed-20c9d07c6451', 'Elan University', 'Elan University', '{\"@context\":[\"http://purl.imsglobal.org/ctx/lti/v2/ToolConsumerProfile\",{\"ltitcp\":\"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/e7a5b920-d61d-0132-88ed-20c9d07c6451#\"}],\"@type\":\"ToolConsumerProfile\",\"@id\":\"http://rails.kinexis.com:4000/tool_consumer_profiles/e7a5b920-d61d-0132-88ed-20c9d07c6451\",\"lti_version\":\"LTI-2p0\",\"guid\":\"30ff7b40-d61f-0132-88ed-20c9d07c6451\",\"product_instance\":{\"guid\":\"dcddf9808107-81ea-eaa4-1edf-5d24568c\",\"product_info\":{\"product_name\":{\"default_value\":\"Elan/LuMoS\",\"key\":\"product.name\"},\"product_version\":\"3.1\",\"description\":{\"default_value\":\"Elan University/LuMoS Learning Platform\",\"key\":\"product.version\"},\"technical_description\":{\"default_value\":\"LTI 1, 1.1 and 2.0 compliant\",\"key\":\"product.technicalDescription\"},\"product_family\":{\"code\":\"LuMoS\",\"vendor\":{\"code\":\"lms.LuMoS.org\",\"vendor_name\":{\"default_value\":\"LuMoS Corporation\",\"key\":\"product.vendor.name\"},\"description\":{\"default_value\":\"LuMoS Corporation is a fictitious vendor of a Learning Management System\",\"key\":\"product.vendor.description\"},\"website\":\"http://lms.LuMoS.org/products/omega\",\"timestamp\":\"2012-07-09T012:08:16-04:00\",\"contact\":{\"email\":\"support@lms.LuMoS.org\"}}}},\"support\":{\"email\":\"john.tibbetts@kinexis.com\"},\"service_owner\":{\"@id\":\"http://ec2.LuMoS.org/ServiceOwner\",\"timestamp\":\"2012-03-28T09:08:16-04:00\",\"service_owner_name\":{\"default_value\":\"Elan University\",\"key\":\"service_owner.name\"},\"description\":{\"default_value\":\"Elan University EC2 Cloud\",\"key\":\"service_owner.description\"},\"support\":{\"email\":\"techsupport@elan.edu\"}},\"service_provider\":{\"@id\":\"http://ec2.LuMoS.org/ServiceProvider\",\"guid\":\"ec2.LuMoS.org\",\"timestamp\":\"2012-07-09T012:08:16-04:00\",\"service_provider_name\":{\"default_value\":\"Elan University\",\"key\":\"service_provider.name\"},\"description\":{\"default_value\":\"Elan University EC2 Cloud\",\"key\":\"service_provider.description\"},\"support\":{\"email\":\"support@yasp.LuMoS.org\"}}},\"capability_offered\":[\"basic-lti-launch-request\",\"Result.autocreate\",\"Result.sourcedId\",\"User.id\",\"User.username\",\"CourseSection.sourcedId\",\"Person.sourcedId\",\"Person.email.primary\",\"Person.name.given\",\"Person.name.family\",\"Person.name.full\",\"Membership.role\",\"ToolProxy.custom.url\",\"ToolProxyBinding.custom.url\",\"LtiLink.custom.url\",\"ToolConsumerProfile.url\",\"OAuth.splitsecret\"],\"service_offered\":[{\"@type\":\"RestService\",\"@id\":\"ltitcp:ToolProxy.collection\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tools\",\"format\":[\"application/vnd.ims.lti.v2.toolproxy+json\"],\"action\":[\"POST\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:ToolProxy.item\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tools/{tool_proxy_guid}\",\"format\":[\"application/vnd.ims.lti.v2.toolproxy+json\"],\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:Result.item\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/resources/Result/{sourcedId}\",\"format\":[\"application/vnd.ims.lis.v2.result+json\"],\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:LtiLinkSettings\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tool_settings/{tool_proxy_guid}/ltilink/{link_id}\",\"format\":[\"application/vnd.ims.lti.v2.toolsettings+json\",\"application/vnd.ims.lti.v2.toolsettings.simple+json\"],\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:ToolProxyBindingSettings\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tool_settings/{tool_proxy_guid}/context/{context_id}\",\"format\":[\"application/vnd.ims.lti.v2.toolsettings+json\",\"application/vnd.ims.lti.v2.toolsettings.simple+json\"],\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:ToolProxySettings\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tool_settings/{tool_proxy_guid}\",\"format\":[\"application/vnd.ims.lti.v2.toolsettings+json\",\"application/vnd.ims.lti.v2.toolsettings.simple+json\"],\"action\":[\"GET\",\"PUT\"]}]}', 2, '{\"base_url_choice\":[{\"default_base_url\":\"http://rails.kinexis.com:5000\",\"selector\":{\"applies_to\":[\"IconEndpoint\",\"MessageHandler\"]}}],\"lti_version\":\"LTI-2p0\",\"message\":[{\"message_type\":[\"ToolProxyRegistrationRequest\",\"ToolProxyReregistrationRequest\"],\"parameter\":[{\"name\":\"tc_profile_url\",\"variable\":\"ToolConsumerProfile.url\"}],\"path\":\"http://rails.kinexis.com:5000/lti2_tp/reregistrations\"}],\"product_instance\":{\"guid\":\"fd75124a-140e-470f-944c-114d2d92bb40\",\"product_info\":{\"description\":{\"default_value\":\"Fabericious reflowable ePub3 Textbook\",\"key\":\"tool.description\"},\"product_family\":{\"code\":\"assessment-tool\",\"vendor\":{\"code\":\"fabericious.org\",\"contact\":{\"email\":\"info@fabericious.com\"},\"description\":{\"default_value\":\"Fabericious is a leading provider of interactive tools for education\",\"key\":\"tool.vendor.description\"},\"vendor_name\":{\"default_value\":\"Fab\",\"key\":\"tool.vendor.name\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\",\"website\":\"{http://rails.kinexis.com:5000}\"}},\"product_name\":{\"default_value\":\"LTI2 BookTools\",\"key\":\"tool.name\"},\"product_version\":\"10.3\",\"technical_description\":{\"default_value\":\"Support provided for all LTI 1 extensions as well as LTI 2\",\"key\":\"tool.technical\"}},\"service_provider\":{\"description\":{\"default_value\":\"Provider of high performance managed hosting environments\",\"key\":\"service_provider.description\"},\"guid\":\"18e7ea50-3d6d-4f6b-aff2-ed3ab577716c\",\"service_provider_name\":{\"default_value\":\"Amazon Cloud\",\"key\":\"service_provider.name\"},\"support\":{\"email\":\"support@ec2.fabericious.com\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\"},\"support\":{\"email\":\"helpdesk@fabericious.com\"}},\"resource_handler\":[{\"description\":{\"default_value\":\"Settings service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"tool_proxy_custom_url\",\"variable\":\"ToolProxy.custom.url\"},{\"name\":\"tool_proxy_binding_custom_url\",\"variable\":\"ToolProxyBinding.custom.url\"},{\"name\":\"lti_link_custom_url\",\"variable\":\"LtiLink.custom.url\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"ToolProxy.custom.url\",\"ToolProxyBinding.custom.url\",\"LtiLink.custom.url\"],\"path\":\"/settings\"}],\"resource_name\":{\"default_value\":\"Settings\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"setting\"}},{\"description\":{\"default_value\":\"Echo service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"fixed\":\"Narcissus\",\"name\":\"referrer\"},{\"fixed\":\"3.14159\",\"name\":\"pi\"},{\"name\":\"user_primary_email\",\"variable\":\"Person.email.primary\"},{\"name\":\"discipline\",\"variable\":\"CourseOffering.label\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\"],\"path\":\"/echoes\"}],\"resource_name\":{\"default_value\":\"Echo\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"echo\"}},{\"description\":{\"default_value\":\"Interactive resource\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"vbid\"},{\"name\":\"result_uri\",\"variable\":\"Result.uri\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"Result.autocreate\"],\"path\":\"/iresources\"}],\"resource_name\":{\"default_value\":\"InteractiveResource\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"iresource\"}}],\"service_offered\":[{\"@id\":\"http://rails.kinexis.com:5000/lti2_tp/ToolProxy.collection\",\"@type\":\"RestService\",\"action\":[\"PUT\"],\"endpoint\":\"http://rails.kinexis.com:5000/lti2_tp/tool_proxies\",\"format\":[\"\"]}]}', '2015-05-06 13:16:49', '2')[0m
  [1m[35m (0.6ms)[0m  COMMIT
Redirected to http://localhost:5000/lti_registration_wips?registration_id=4&return_url=/lti2_tp/registrations
Completed 302 Found in 469ms (ActiveRecord: 15.3ms)


Started GET "/lti_registration_wips?registration_id=4&return_url=/lti2_tp/registrations" for 127.0.0.1 at 2015-05-06 09:16:49 -0400
Processing by LtiRegistrationWipsController#index as HTML
  Parameters: {"registration_id"=>"4", "return_url"=>"/lti2_tp/registrations"}
  [1m[36mLti2Tp::Registration Load (0.6ms)[0m  [1mSELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 4 LIMIT 1[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `lti_registration_wips` (`created_at`, `product_name`, `registration_id`, `registration_return_url`, `support_email`, `tenant_name`, `updated_at`) VALUES ('2015-05-06 13:17:15', 'Elan/LuMoS', 4, '/lti2_tp/registrations', 'john.tibbetts@kinexis.com', 'Elan University', '2015-05-06 13:17:15')[0m
  [1m[35m (0.6ms)[0m  COMMIT
  Rendered lti_registration_wips/_form.html.haml (2196.1ms)
  Rendered lti_registration_wips/index.html.haml within layouts/application (2214.0ms)
Completed 200 OK in 28555ms (Views: 2972.0ms | ActiveRecord: 12.5ms)


Started POST "/lti2_tp/registrations" for 127.0.0.1 at 2015-05-06 09:17:18 -0400
Processing by Lti2Tp::RegistrationsController#create as HTML
  Parameters: {"lti_message_type"=>"ToolProxyRegistrationRequest", "lti_version"=>"LTI-2p0", "user_id"=>"2", "roles"=>"urn:lti:sysrole:ims/lis/SysAdmin", "tc_profile_url"=>"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/184372c0-d620-0132-88ed-20c9d07c6451", "reg_key"=>"18436cf0-d620-0132-88ed-20c9d07c6451", "reg_password"=>"[FILTERED]", "launch_presentation_return_url"=>"http://rails.kinexis.com:4000/admin/tool_actions", "launch_presentation_document_target"=>"window"}
  [1m[36mLti2Tp::Tool Load (0.7ms)[0m  [1mSELECT  `lti2_tp_tools`.* FROM `lti2_tp_tools`   ORDER BY `lti2_tp_tools`.`id` ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO `lti2_tp_registrations` (`created_at`, `launch_presentation_return_url`, `lti_version`, `message_type`, `reg_key`, `reg_password`, `status`, `tc_profile_url`, `tenant_basename`, `tenant_name`, `tool_consumer_profile_json`, `tool_id`, `tool_profile_json`, `updated_at`, `user_id`) VALUES ('2015-05-06 13:17:18', 'http://rails.kinexis.com:4000/admin/tool_actions', 'LTI-2p0', 'registration', '18436cf0-d620-0132-88ed-20c9d07c6451', 'b98ccfe1419af91f10844ad79de05170', 'received', 'http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/184372c0-d620-0132-88ed-20c9d07c6451', 'Elan University', 'Elan University', '{\"@context\":[\"http://purl.imsglobal.org/ctx/lti/v2/ToolConsumerProfile\",{\"ltitcp\":\"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/e7a5b920-d61d-0132-88ed-20c9d07c6451#\"}],\"@type\":\"ToolConsumerProfile\",\"@id\":\"http://rails.kinexis.com:4000/tool_consumer_profiles/e7a5b920-d61d-0132-88ed-20c9d07c6451\",\"lti_version\":\"LTI-2p0\",\"guid\":\"184372c0-d620-0132-88ed-20c9d07c6451\",\"product_instance\":{\"guid\":\"dcddf9808107-81ea-eaa4-1edf-5d24568c\",\"product_info\":{\"product_name\":{\"default_value\":\"Elan/LuMoS\",\"key\":\"product.name\"},\"product_version\":\"3.1\",\"description\":{\"default_value\":\"Elan University/LuMoS Learning Platform\",\"key\":\"product.version\"},\"technical_description\":{\"default_value\":\"LTI 1, 1.1 and 2.0 compliant\",\"key\":\"product.technicalDescription\"},\"product_family\":{\"code\":\"LuMoS\",\"vendor\":{\"code\":\"lms.LuMoS.org\",\"vendor_name\":{\"default_value\":\"LuMoS Corporation\",\"key\":\"product.vendor.name\"},\"description\":{\"default_value\":\"LuMoS Corporation is a fictitious vendor of a Learning Management System\",\"key\":\"product.vendor.description\"},\"website\":\"http://lms.LuMoS.org/products/omega\",\"timestamp\":\"2012-07-09T012:08:16-04:00\",\"contact\":{\"email\":\"support@lms.LuMoS.org\"}}}},\"support\":{\"email\":\"john.tibbetts@kinexis.com\"},\"service_owner\":{\"@id\":\"http://ec2.LuMoS.org/ServiceOwner\",\"timestamp\":\"2012-03-28T09:08:16-04:00\",\"service_owner_name\":{\"default_value\":\"Elan University\",\"key\":\"service_owner.name\"},\"description\":{\"default_value\":\"Elan University EC2 Cloud\",\"key\":\"service_owner.description\"},\"support\":{\"email\":\"techsupport@elan.edu\"}},\"service_provider\":{\"@id\":\"http://ec2.LuMoS.org/ServiceProvider\",\"guid\":\"ec2.LuMoS.org\",\"timestamp\":\"2012-07-09T012:08:16-04:00\",\"service_provider_name\":{\"default_value\":\"Elan University\",\"key\":\"service_provider.name\"},\"description\":{\"default_value\":\"Elan University EC2 Cloud\",\"key\":\"service_provider.description\"},\"support\":{\"email\":\"support@yasp.LuMoS.org\"}}},\"capability_offered\":[\"basic-lti-launch-request\",\"Result.autocreate\",\"Result.sourcedId\",\"User.id\",\"User.username\",\"CourseSection.sourcedId\",\"Person.sourcedId\",\"Person.email.primary\",\"Person.name.given\",\"Person.name.family\",\"Person.name.full\",\"Membership.role\",\"ToolProxy.custom.url\",\"ToolProxyBinding.custom.url\",\"LtiLink.custom.url\",\"ToolConsumerProfile.url\",\"OAuth.splitsecret\"],\"service_offered\":[{\"@type\":\"RestService\",\"@id\":\"ltitcp:ToolProxy.collection\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tools\",\"format\":[\"application/vnd.ims.lti.v2.toolproxy+json\"],\"action\":[\"POST\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:ToolProxy.item\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tools/{tool_proxy_guid}\",\"format\":[\"application/vnd.ims.lti.v2.toolproxy+json\"],\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:Result.item\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/resources/Result/{sourcedId}\",\"format\":[\"application/vnd.ims.lis.v2.result+json\"],\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:LtiLinkSettings\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tool_settings/{tool_proxy_guid}/ltilink/{link_id}\",\"format\":[\"application/vnd.ims.lti.v2.toolsettings+json\",\"application/vnd.ims.lti.v2.toolsettings.simple+json\"],\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:ToolProxyBindingSettings\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tool_settings/{tool_proxy_guid}/context/{context_id}\",\"format\":[\"application/vnd.ims.lti.v2.toolsettings+json\",\"application/vnd.ims.lti.v2.toolsettings.simple+json\"],\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:ToolProxySettings\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tool_settings/{tool_proxy_guid}\",\"format\":[\"application/vnd.ims.lti.v2.toolsettings+json\",\"application/vnd.ims.lti.v2.toolsettings.simple+json\"],\"action\":[\"GET\",\"PUT\"]}]}', 2, '{\"base_url_choice\":[{\"default_base_url\":\"http://rails.kinexis.com:5000\",\"selector\":{\"applies_to\":[\"IconEndpoint\",\"MessageHandler\"]}}],\"lti_version\":\"LTI-2p0\",\"message\":[{\"message_type\":[\"ToolProxyRegistrationRequest\",\"ToolProxyReregistrationRequest\"],\"parameter\":[{\"name\":\"tc_profile_url\",\"variable\":\"ToolConsumerProfile.url\"}],\"path\":\"http://rails.kinexis.com:5000/lti2_tp/reregistrations\"}],\"product_instance\":{\"guid\":\"fd75124a-140e-470f-944c-114d2d92bb40\",\"product_info\":{\"description\":{\"default_value\":\"Fabericious reflowable ePub3 Textbook\",\"key\":\"tool.description\"},\"product_family\":{\"code\":\"assessment-tool\",\"vendor\":{\"code\":\"fabericious.org\",\"contact\":{\"email\":\"info@fabericious.com\"},\"description\":{\"default_value\":\"Fabericious is a leading provider of interactive tools for education\",\"key\":\"tool.vendor.description\"},\"vendor_name\":{\"default_value\":\"Fab\",\"key\":\"tool.vendor.name\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\",\"website\":\"{http://rails.kinexis.com:5000}\"}},\"product_name\":{\"default_value\":\"LTI2 BookTools\",\"key\":\"tool.name\"},\"product_version\":\"10.3\",\"technical_description\":{\"default_value\":\"Support provided for all LTI 1 extensions as well as LTI 2\",\"key\":\"tool.technical\"}},\"service_provider\":{\"description\":{\"default_value\":\"Provider of high performance managed hosting environments\",\"key\":\"service_provider.description\"},\"guid\":\"18e7ea50-3d6d-4f6b-aff2-ed3ab577716c\",\"service_provider_name\":{\"default_value\":\"Amazon Cloud\",\"key\":\"service_provider.name\"},\"support\":{\"email\":\"support@ec2.fabericious.com\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\"},\"support\":{\"email\":\"helpdesk@fabericious.com\"}},\"resource_handler\":[{\"description\":{\"default_value\":\"Settings service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"tool_proxy_custom_url\",\"variable\":\"ToolProxy.custom.url\"},{\"name\":\"tool_proxy_binding_custom_url\",\"variable\":\"ToolProxyBinding.custom.url\"},{\"name\":\"lti_link_custom_url\",\"variable\":\"LtiLink.custom.url\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"ToolProxy.custom.url\",\"ToolProxyBinding.custom.url\",\"LtiLink.custom.url\"],\"path\":\"/settings\"}],\"resource_name\":{\"default_value\":\"Settings\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"setting\"}},{\"description\":{\"default_value\":\"Echo service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"fixed\":\"Narcissus\",\"name\":\"referrer\"},{\"fixed\":\"3.14159\",\"name\":\"pi\"},{\"name\":\"user_primary_email\",\"variable\":\"Person.email.primary\"},{\"name\":\"discipline\",\"variable\":\"CourseOffering.label\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\"],\"path\":\"/echoes\"}],\"resource_name\":{\"default_value\":\"Echo\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"echo\"}},{\"description\":{\"default_value\":\"Interactive resource\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"vbid\"},{\"name\":\"result_uri\",\"variable\":\"Result.uri\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"Result.autocreate\"],\"path\":\"/iresources\"}],\"resource_name\":{\"default_value\":\"InteractiveResource\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"iresource\"}}],\"service_offered\":[{\"@id\":\"http://rails.kinexis.com:5000/lti2_tp/ToolProxy.collection\",\"@type\":\"RestService\",\"action\":[\"PUT\"],\"endpoint\":\"http://rails.kinexis.com:5000/lti2_tp/tool_proxies\",\"format\":[\"\"]}]}', '2015-05-06 13:17:18', '2')[0m
  [1m[35m (0.9ms)[0m  COMMIT
Redirected to http://localhost:5000/lti_registration_wips?registration_id=5&return_url=/lti2_tp/registrations
Completed 302 Found in 186ms (ActiveRecord: 2.9ms)


Started GET "/lti_registration_wips?registration_id=5&return_url=/lti2_tp/registrations" for 127.0.0.1 at 2015-05-06 09:17:18 -0400
Processing by LtiRegistrationWipsController#index as HTML
  Parameters: {"registration_id"=>"5", "return_url"=>"/lti2_tp/registrations"}
  [1m[36mLti2Tp::Registration Load (0.6ms)[0m  [1mSELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 5 LIMIT 1[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO `lti_registration_wips` (`created_at`, `product_name`, `registration_id`, `registration_return_url`, `support_email`, `tenant_name`, `updated_at`) VALUES ('2015-05-06 13:17:29', 'Elan/LuMoS', 5, '/lti2_tp/registrations', 'john.tibbetts@kinexis.com', 'Elan University', '2015-05-06 13:17:29')[0m
  [1m[35m (5.5ms)[0m  COMMIT
  Rendered lti_registration_wips/_form.html.haml (148.8ms)
  Rendered lti_registration_wips/index.html.haml within layouts/application (153.4ms)
Completed 200 OK in 11531ms (Views: 264.2ms | ActiveRecord: 7.0ms)


Started PATCH "/lti_registration_wips/5" for 127.0.0.1 at 2015-05-06 09:17:39 -0400
Processing by LtiRegistrationWipsController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"+LNGKUlHZyaIdfF/ro2I5S5tDt5OHWNN3zlEqmt/BN8=", "lti_registration_wip"=>{"support_email"=>"john.tibbetts@kinexis.com", "product_name"=>"Elan/LuMoS", "tenant_name"=>"Elan University551"}, "commit"=>"Update Lti registration wip", "id"=>"5"}
  [1m[36mLtiRegistrationWip Load (0.6ms)[0m  [1mSELECT  `lti_registration_wips`.* FROM `lti_registration_wips`  WHERE `lti_registration_wips`.`id` = 5 LIMIT 1[0m
  [1m[35m (0.5ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mUPDATE `lti_registration_wips` SET `tenant_name` = 'Elan University551', `updated_at` = '2015-05-06 13:17:39' WHERE `lti_registration_wips`.`id` = 5[0m
  [1m[35m (1.1ms)[0m  COMMIT
  [1m[36mLti2Tp::Registration Load (1.1ms)[0m  [1mSELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 5 LIMIT 1[0m
  [1m[35m (0.5ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mUPDATE `lti2_tp_registrations` SET `tenant_name` = 'Elan University551', `updated_at` = '2015-05-06 13:17:39' WHERE `lti2_tp_registrations`.`id` = 5[0m
  [1m[35m (1.0ms)[0m  COMMIT
  [1m[36mLtiRegistrationWip Load (0.8ms)[0m  [1mSELECT  `lti_registration_wips`.* FROM `lti_registration_wips`  WHERE `lti_registration_wips`.`id` = 5 LIMIT 1[0m
  [1m[35mLti2Tp::Registration Load (0.6ms)[0m  SELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 5 LIMIT 1
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mTenant Exists (0.5ms)[0m  SELECT  1 AS one FROM `tenants`  WHERE `tenants`.`tenant_name` = BINARY 'Elan University551' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO `tenants` (`created_at`, `tenant_name`, `updated_at`) VALUES ('2015-05-06 13:18:32', 'Elan University551', '2015-05-06 13:18:32')[0m
  [1m[35m (0.7ms)[0m  COMMIT
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  UPDATE `lti2_tp_registrations` SET `end_registration_id` = '50fe9f40-d620-0132-88f0-20c9d07c6451', `tool_proxy_json` = '{\"@context\":[\"http://purl.imsglobal.org/ctx/lti/v2/ToolConsumerProfile\",{\"ltitcp\":\"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/e7a5b920-d61d-0132-88ed-20c9d07c6451#\"}],\"@type\":\"ToolProxy\",\"@id\":\"ToolProxyProposal_at_2015-05-06T13:18:32Z\",\"lti_version\":\"LTI-2p0\",\"tool_proxy_guid\":\"18436cf0-d620-0132-88ed-20c9d07c6451\",\"tool_consumer_profile\":\"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/184372c0-d620-0132-88ed-20c9d07c6451\",\"tool_profile\":{\"base_url_choice\":[{\"default_base_url\":\"http://rails.kinexis.com:5000\",\"selector\":{\"applies_to\":[\"IconEndpoint\",\"MessageHandler\"]}}],\"lti_version\":\"LTI-2p0\",\"message\":[{\"message_type\":[\"ToolProxyRegistrationRequest\",\"ToolProxyReregistrationRequest\"],\"parameter\":[{\"name\":\"tc_profile_url\",\"variable\":\"ToolConsumerProfile.url\"}],\"path\":\"http://rails.kinexis.com:5000/lti2_tp/reregistrations\"}],\"product_instance\":{\"guid\":\"fd75124a-140e-470f-944c-114d2d92bb40\",\"product_info\":{\"description\":{\"default_value\":\"Fabericious reflowable ePub3 Textbook\",\"key\":\"tool.description\"},\"product_family\":{\"code\":\"assessment-tool\",\"vendor\":{\"code\":\"fabericious.org\",\"contact\":{\"email\":\"info@fabericious.com\"},\"description\":{\"default_value\":\"Fabericious is a leading provider of interactive tools for education\",\"key\":\"tool.vendor.description\"},\"vendor_name\":{\"default_value\":\"Fab\",\"key\":\"tool.vendor.name\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\",\"website\":\"{http://rails.kinexis.com:5000}\"}},\"product_name\":{\"default_value\":\"LTI2 BookTools\",\"key\":\"tool.name\"},\"product_version\":\"10.3\",\"technical_description\":{\"default_value\":\"Support provided for all LTI 1 extensions as well as LTI 2\",\"key\":\"tool.technical\"}},\"service_provider\":{\"description\":{\"default_value\":\"Provider of high performance managed hosting environments\",\"key\":\"service_provider.description\"},\"guid\":\"18e7ea50-3d6d-4f6b-aff2-ed3ab577716c\",\"service_provider_name\":{\"default_value\":\"Amazon Cloud\",\"key\":\"service_provider.name\"},\"support\":{\"email\":\"support@ec2.fabericious.com\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\"},\"support\":{\"email\":\"helpdesk@fabericious.com\"}},\"resource_handler\":[{\"description\":{\"default_value\":\"Settings service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"tool_proxy_custom_url\",\"variable\":\"ToolProxy.custom.url\"},{\"name\":\"tool_proxy_binding_custom_url\",\"variable\":\"ToolProxyBinding.custom.url\"},{\"name\":\"lti_link_custom_url\",\"variable\":\"LtiLink.custom.url\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"ToolProxy.custom.url\",\"ToolProxyBinding.custom.url\",\"LtiLink.custom.url\"],\"path\":\"/settings\"}],\"resource_name\":{\"default_value\":\"Settings\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"setting\"}},{\"description\":{\"default_value\":\"Echo service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"fixed\":\"Narcissus\",\"name\":\"referrer\"},{\"fixed\":\"3.14159\",\"name\":\"pi\"},{\"name\":\"user_primary_email\",\"variable\":\"Person.email.primary\"},{\"name\":\"discipline\",\"variable\":\"CourseOffering.label\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\"],\"path\":\"/echoes\"}],\"resource_name\":{\"default_value\":\"Echo\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"echo\"}},{\"description\":{\"default_value\":\"Interactive resource\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"vbid\"},{\"name\":\"result_uri\",\"variable\":\"Result.uri\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"Result.autocreate\"],\"path\":\"/iresources\"}],\"resource_name\":{\"default_value\":\"InteractiveResource\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"iresource\"}}],\"service_offered\":[{\"@id\":\"http://rails.kinexis.com:5000/lti2_tp/ToolProxy.collection\",\"@type\":\"RestService\",\"action\":[\"PUT\"],\"endpoint\":\"http://rails.kinexis.com:5000/lti2_tp/tool_proxies\",\"format\":[\"\"]}]},\"security_contract\":{\"shared_secret\":\"088efe5a7ece3998004fdf03bec0bcfd\",\"tool_service\":[{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxy.collection\",\"action\":[\"POST\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxy.item\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:Result.item\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:LtiLinkSettings\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxyBindingSettings\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxySettings\",\"action\":[\"GET\",\"PUT\"]}]}}', `updated_at` = '2015-05-06 13:18:32' WHERE `lti2_tp_registrations`.`id` = 5
  [1m[36m (0.9ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE `lti2_tp_registrations` SET `status` = 'register', `updated_at` = '2015-05-06 13:18:32' WHERE `lti2_tp_registrations`.`id` = 5[0m
  [1m[35m (0.8ms)[0m  COMMIT
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35mTenant Exists (0.5ms)[0m  SELECT  1 AS one FROM `tenants`  WHERE (`tenants`.`tenant_name` = BINARY 'Elan University551' AND `tenants`.`id` != 3) LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE `tenants` SET `secret` = '088efe5a7ece3998004fdf03bec0bcfd', `tenant_key` = '18436cf0-d620-0132-88ed-20c9d07c6451', `updated_at` = '2015-05-06 13:18:32' WHERE `tenants`.`id` = 3[0m
  [1m[35m (2.8ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  UPDATE `lti2_tp_registrations` SET `tenant_id` = 3, `updated_at` = '2015-05-06 13:18:32' WHERE `lti2_tp_registrations`.`id` = 5
  [1m[36m (0.9ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:5000/lti2_tp/registrations?status=success&tool_guid=18436cf0-d620-0132-88ed-20c9d07c6451&&id=5
Completed 302 Found in 53059ms (ActiveRecord: 25.1ms)


Started GET "/lti2_tp/registrations?status=success&tool_guid=18436cf0-d620-0132-88ed-20c9d07c6451&&id=5" for 127.0.0.1 at 2015-05-06 09:18:32 -0400
Processing by Lti2Tp::RegistrationsController#index as HTML
  Parameters: {"status"=>"success", "tool_guid"=>"18436cf0-d620-0132-88ed-20c9d07c6451", "id"=>"5"}
  [1m[35mLti2Tp::Registration Load (0.6ms)[0m  SELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 5 LIMIT 1
Redirected to http://rails.kinexis.com:4000/admin/tool_actions?status=success&tool_guid=18436cf0-d620-0132-88ed-20c9d07c6451
Completed 302 Found in 15ms (ActiveRecord: 0.6ms)
  [1m[36mLti2Tp::Registry Load (0.5ms)[0m  [1mSELECT `lti2_tp_registries`.* FROM `lti2_tp_registries`[0m


Started POST "/lti2_tp/registrations" for 127.0.0.1 at 2015-05-06 09:19:00 -0400
  [1m[35mActiveRecord::SchemaMigration Load (0.7ms)[0m  SELECT `schema_migrations`.* FROM `schema_migrations`
Processing by Lti2Tp::RegistrationsController#create as HTML
  Parameters: {"lti_message_type"=>"ToolProxyRegistrationRequest", "lti_version"=>"LTI-2p0", "user_id"=>"2", "roles"=>"urn:lti:sysrole:ims/lis/SysAdmin", "tc_profile_url"=>"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/5f88a770-d620-0132-88ed-20c9d07c6451", "reg_key"=>"5f88a530-d620-0132-88ed-20c9d07c6451", "reg_password"=>"[FILTERED]", "launch_presentation_return_url"=>"http://rails.kinexis.com:4000/admin/tool_actions", "launch_presentation_document_target"=>"window"}
  [1m[36mLti2Tp::Tool Load (0.6ms)[0m  [1mSELECT  `lti2_tp_tools`.* FROM `lti2_tp_tools`   ORDER BY `lti2_tp_tools`.`id` ASC LIMIT 1[0m
  [1m[35m (0.8ms)[0m  BEGIN
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO `lti2_tp_registrations` (`created_at`, `launch_presentation_return_url`, `lti_version`, `message_type`, `reg_key`, `reg_password`, `status`, `tc_profile_url`, `tenant_basename`, `tenant_name`, `tool_consumer_profile_json`, `tool_id`, `tool_profile_json`, `updated_at`, `user_id`) VALUES ('2015-05-06 13:19:01', 'http://rails.kinexis.com:4000/admin/tool_actions', 'LTI-2p0', 'registration', '5f88a530-d620-0132-88ed-20c9d07c6451', '65ff0ff138bcf5bb5fdb59fdaf2ca1b9', 'received', 'http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/5f88a770-d620-0132-88ed-20c9d07c6451', 'Elan University', 'Elan University', '{\"@context\":[\"http://purl.imsglobal.org/ctx/lti/v2/ToolConsumerProfile\",{\"ltitcp\":\"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/e7a5b920-d61d-0132-88ed-20c9d07c6451#\"}],\"@type\":\"ToolConsumerProfile\",\"@id\":\"http://rails.kinexis.com:4000/tool_consumer_profiles/e7a5b920-d61d-0132-88ed-20c9d07c6451\",\"lti_version\":\"LTI-2p0\",\"guid\":\"5f88a770-d620-0132-88ed-20c9d07c6451\",\"product_instance\":{\"guid\":\"dcddf9808107-81ea-eaa4-1edf-5d24568c\",\"product_info\":{\"product_name\":{\"default_value\":\"Elan/LuMoS\",\"key\":\"product.name\"},\"product_version\":\"3.1\",\"description\":{\"default_value\":\"Elan University/LuMoS Learning Platform\",\"key\":\"product.version\"},\"technical_description\":{\"default_value\":\"LTI 1, 1.1 and 2.0 compliant\",\"key\":\"product.technicalDescription\"},\"product_family\":{\"code\":\"LuMoS\",\"vendor\":{\"code\":\"lms.LuMoS.org\",\"vendor_name\":{\"default_value\":\"LuMoS Corporation\",\"key\":\"product.vendor.name\"},\"description\":{\"default_value\":\"LuMoS Corporation is a fictitious vendor of a Learning Management System\",\"key\":\"product.vendor.description\"},\"website\":\"http://lms.LuMoS.org/products/omega\",\"timestamp\":\"2012-07-09T012:08:16-04:00\",\"contact\":{\"email\":\"support@lms.LuMoS.org\"}}}},\"support\":{\"email\":\"john.tibbetts@kinexis.com\"},\"service_owner\":{\"@id\":\"http://ec2.LuMoS.org/ServiceOwner\",\"timestamp\":\"2012-03-28T09:08:16-04:00\",\"service_owner_name\":{\"default_value\":\"Elan University\",\"key\":\"service_owner.name\"},\"description\":{\"default_value\":\"Elan University EC2 Cloud\",\"key\":\"service_owner.description\"},\"support\":{\"email\":\"techsupport@elan.edu\"}},\"service_provider\":{\"@id\":\"http://ec2.LuMoS.org/ServiceProvider\",\"guid\":\"ec2.LuMoS.org\",\"timestamp\":\"2012-07-09T012:08:16-04:00\",\"service_provider_name\":{\"default_value\":\"Elan University\",\"key\":\"service_provider.name\"},\"description\":{\"default_value\":\"Elan University EC2 Cloud\",\"key\":\"service_provider.description\"},\"support\":{\"email\":\"support@yasp.LuMoS.org\"}}},\"capability_offered\":[\"basic-lti-launch-request\",\"Result.autocreate\",\"Result.sourcedId\",\"User.id\",\"User.username\",\"CourseSection.sourcedId\",\"Person.sourcedId\",\"Person.email.primary\",\"Person.name.given\",\"Person.name.family\",\"Person.name.full\",\"Membership.role\",\"ToolProxy.custom.url\",\"ToolProxyBinding.custom.url\",\"LtiLink.custom.url\",\"ToolConsumerProfile.url\",\"OAuth.splitsecret\"],\"service_offered\":[{\"@type\":\"RestService\",\"@id\":\"ltitcp:ToolProxy.collection\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tools\",\"format\":[\"application/vnd.ims.lti.v2.toolproxy+json\"],\"action\":[\"POST\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:ToolProxy.item\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tools/{tool_proxy_guid}\",\"format\":[\"application/vnd.ims.lti.v2.toolproxy+json\"],\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:Result.item\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/resources/Result/{sourcedId}\",\"format\":[\"application/vnd.ims.lis.v2.result+json\"],\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:LtiLinkSettings\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tool_settings/{tool_proxy_guid}/ltilink/{link_id}\",\"format\":[\"application/vnd.ims.lti.v2.toolsettings+json\",\"application/vnd.ims.lti.v2.toolsettings.simple+json\"],\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:ToolProxyBindingSettings\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tool_settings/{tool_proxy_guid}/context/{context_id}\",\"format\":[\"application/vnd.ims.lti.v2.toolsettings+json\",\"application/vnd.ims.lti.v2.toolsettings.simple+json\"],\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:ToolProxySettings\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tool_settings/{tool_proxy_guid}\",\"format\":[\"application/vnd.ims.lti.v2.toolsettings+json\",\"application/vnd.ims.lti.v2.toolsettings.simple+json\"],\"action\":[\"GET\",\"PUT\"]}]}', 2, '{\"base_url_choice\":[{\"default_base_url\":\"http://rails.kinexis.com:5000\",\"selector\":{\"applies_to\":[\"IconEndpoint\",\"MessageHandler\"]}}],\"lti_version\":\"LTI-2p0\",\"message\":[{\"message_type\":[\"ToolProxyRegistrationRequest\",\"ToolProxyReregistrationRequest\"],\"parameter\":[{\"name\":\"tc_profile_url\",\"variable\":\"ToolConsumerProfile.url\"}],\"path\":\"http://rails.kinexis.com:5000/lti2_tp/reregistrations\"}],\"product_instance\":{\"guid\":\"fd75124a-140e-470f-944c-114d2d92bb40\",\"product_info\":{\"description\":{\"default_value\":\"Fabericious reflowable ePub3 Textbook\",\"key\":\"tool.description\"},\"product_family\":{\"code\":\"assessment-tool\",\"vendor\":{\"code\":\"fabericious.org\",\"contact\":{\"email\":\"info@fabericious.com\"},\"description\":{\"default_value\":\"Fabericious is a leading provider of interactive tools for education\",\"key\":\"tool.vendor.description\"},\"vendor_name\":{\"default_value\":\"Fab\",\"key\":\"tool.vendor.name\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\",\"website\":\"{http://rails.kinexis.com:5000}\"}},\"product_name\":{\"default_value\":\"LTI2 BookTools\",\"key\":\"tool.name\"},\"product_version\":\"10.3\",\"technical_description\":{\"default_value\":\"Support provided for all LTI 1 extensions as well as LTI 2\",\"key\":\"tool.technical\"}},\"service_provider\":{\"description\":{\"default_value\":\"Provider of high performance managed hosting environments\",\"key\":\"service_provider.description\"},\"guid\":\"18e7ea50-3d6d-4f6b-aff2-ed3ab577716c\",\"service_provider_name\":{\"default_value\":\"Amazon Cloud\",\"key\":\"service_provider.name\"},\"support\":{\"email\":\"support@ec2.fabericious.com\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\"},\"support\":{\"email\":\"helpdesk@fabericious.com\"}},\"resource_handler\":[{\"description\":{\"default_value\":\"Settings service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"tool_proxy_custom_url\",\"variable\":\"ToolProxy.custom.url\"},{\"name\":\"tool_proxy_binding_custom_url\",\"variable\":\"ToolProxyBinding.custom.url\"},{\"name\":\"lti_link_custom_url\",\"variable\":\"LtiLink.custom.url\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"ToolProxy.custom.url\",\"ToolProxyBinding.custom.url\",\"LtiLink.custom.url\"],\"path\":\"/settings\"}],\"resource_name\":{\"default_value\":\"Settings\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"setting\"}},{\"description\":{\"default_value\":\"Echo service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"fixed\":\"Narcissus\",\"name\":\"referrer\"},{\"fixed\":\"3.14159\",\"name\":\"pi\"},{\"name\":\"user_primary_email\",\"variable\":\"Person.email.primary\"},{\"name\":\"discipline\",\"variable\":\"CourseOffering.label\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\"],\"path\":\"/echoes\"}],\"resource_name\":{\"default_value\":\"Echo\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"echo\"}},{\"description\":{\"default_value\":\"Interactive resource\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"vbid\"},{\"name\":\"result_uri\",\"variable\":\"Result.uri\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"Result.autocreate\"],\"path\":\"/iresources\"}],\"resource_name\":{\"default_value\":\"InteractiveResource\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"iresource\"}}],\"service_offered\":[{\"@id\":\"http://rails.kinexis.com:5000/lti2_tp/ToolProxy.collection\",\"@type\":\"RestService\",\"action\":[\"PUT\"],\"endpoint\":\"http://rails.kinexis.com:5000/lti2_tp/tool_proxies\",\"format\":[\"\"]}]}', '2015-05-06 13:19:01', '2')[0m
  [1m[35m (0.6ms)[0m  COMMIT
Redirected to http://localhost:5000/lti_registration_wips?registration_id=6&return_url=/lti2_tp/registrations
Completed 302 Found in 502ms (ActiveRecord: 15.6ms)


Started GET "/lti_registration_wips?registration_id=6&return_url=/lti2_tp/registrations" for 127.0.0.1 at 2015-05-06 09:19:01 -0400
Processing by LtiRegistrationWipsController#index as HTML
  Parameters: {"registration_id"=>"6", "return_url"=>"/lti2_tp/registrations"}
  [1m[36mLti2Tp::Registration Load (0.6ms)[0m  [1mSELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 6 LIMIT 1[0m
  [1m[35m (0.6ms)[0m  BEGIN
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `lti_registration_wips` (`created_at`, `product_name`, `registration_id`, `registration_return_url`, `support_email`, `tenant_name`, `updated_at`) VALUES ('2015-05-06 13:20:13', 'Elan/LuMoS', 6, '/lti2_tp/registrations', 'john.tibbetts@kinexis.com', 'Elan University', '2015-05-06 13:20:13')[0m
  [1m[35m (0.5ms)[0m  COMMIT
  Rendered lti_registration_wips/_form.html.haml (947.5ms)
  Rendered lti_registration_wips/index.html.haml within layouts/application (961.2ms)
Completed   in 73091ms
  [1m[36mLti2Tp::Registry Load (0.6ms)[0m  [1mSELECT `lti2_tp_registries`.* FROM `lti2_tp_registries`[0m


Started POST "/lti2_tp/registrations" for 127.0.0.1 at 2015-05-06 09:20:31 -0400
  [1m[35mActiveRecord::SchemaMigration Load (1.0ms)[0m  SELECT `schema_migrations`.* FROM `schema_migrations`
Processing by Lti2Tp::RegistrationsController#create as HTML
  Parameters: {"lti_message_type"=>"ToolProxyRegistrationRequest", "lti_version"=>"LTI-2p0", "user_id"=>"2", "roles"=>"urn:lti:sysrole:ims/lis/SysAdmin", "tc_profile_url"=>"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/95eedb10-d620-0132-88ed-20c9d07c6451", "reg_key"=>"95eed860-d620-0132-88ed-20c9d07c6451", "reg_password"=>"[FILTERED]", "launch_presentation_return_url"=>"http://rails.kinexis.com:4000/admin/tool_actions", "launch_presentation_document_target"=>"window"}
  [1m[36mLti2Tp::Tool Load (0.5ms)[0m  [1mSELECT  `lti2_tp_tools`.* FROM `lti2_tp_tools`   ORDER BY `lti2_tp_tools`.`id` ASC LIMIT 1[0m
Completed 500 Internal Server Error in 949062ms

JSON::ParserError - 795: unexpected token at '<h2>ToolConsumerProfile not found</h2>':
  json (1.8.2) lib/json/common.rb:155:in `parse'
  json (1.8.2) lib/json/common.rb:334:in `load'
   () Users/johntibbetts/.rbenv/versions/2.1.4/lib/ruby/gems/2.1.0/bundler/gems/lti2-reference-ba98f8d53252/lti2_tp/app/models/lti2_tp/registration.rb:29:in `get_tool_consumer_profile'
   () Users/johntibbetts/.rbenv/versions/2.1.4/lib/ruby/gems/2.1.0/bundler/gems/lti2-reference-ba98f8d53252/lti2_tp/app/controllers/lti2_tp/registrations_controller.rb:37:in `create'
  actionpack (4.1.9) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.1.9) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.1.9) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.1.9) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.1.9) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.9) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.9) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.9) lib/active_support/callbacks.rb:86:in `run_callbacks'
  actionpack (4.1.9) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.1.9) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.1.9) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.1.9) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.9) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.9) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.1.9) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.1.9) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.1.9) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.1.9) lib/abstract_controller/base.rb:136:in `process'
  actionview (4.1.9) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.1.9) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.1.9) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.1.9) lib/action_controller/metal.rb:232:in `block in action'
  actionpack (4.1.9) lib/action_dispatch/routing/route_set.rb:82:in `dispatch'
  actionpack (4.1.9) lib/action_dispatch/routing/route_set.rb:50:in `call'
  actionpack (4.1.9) lib/action_dispatch/journey/router.rb:73:in `block in call'
  actionpack (4.1.9) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.9) lib/action_dispatch/routing/route_set.rb:685:in `call'
  railties (4.1.9) lib/rails/engine.rb:514:in `call'
  railties (4.1.9) lib/rails/railtie.rb:194:in `method_missing'
  actionpack (4.1.9) lib/action_dispatch/journey/router.rb:73:in `block in call'
  actionpack (4.1.9) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.9) lib/action_dispatch/routing/route_set.rb:685:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:35:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.1.9) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.1.9) lib/action_dispatch/middleware/flash.rb:254:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.1.9) lib/action_dispatch/middleware/cookies.rb:562:in `call'
  activerecord (4.1.9) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.1.9) lib/active_record/connection_adapters/abstract/connection_pool.rb:621:in `call'
  activerecord (4.1.9) lib/active_record/migration.rb:380:in `call'
  actionpack (4.1.9) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.1.9) lib/active_support/callbacks.rb:82:in `run_callbacks'
  actionpack (4.1.9) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.1.9) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.1.9) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (4.1.9) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.1.9) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.9) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.9) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.9) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.9) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.9) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.9) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.1.0) lib/quiet_assets.rb:27:in `call_with_quiet_assets'
  actionpack (4.1.9) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.9) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.9) lib/action_dispatch/middleware/static.rb:84:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.1.9) lib/rails/engine.rb:514:in `call'
  railties (4.1.9) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/johntibbetts/.rbenv/versions/2.1.4/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/johntibbetts/.rbenv/versions/2.1.4/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/johntibbetts/.rbenv/versions/2.1.4/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/lti2_tp/__better_errors/293ff0328427369d/variables" for 127.0.0.1 at 2015-05-06 09:36:21 -0400
  [1m[36mLti2Tp::Registry Load (0.5ms)[0m  [1mSELECT `lti2_tp_registries`.* FROM `lti2_tp_registries`[0m


Started POST "/lti2_tp/registrations" for 127.0.0.1 at 2015-05-06 09:42:24 -0400
  [1m[35mActiveRecord::SchemaMigration Load (0.9ms)[0m  SELECT `schema_migrations`.* FROM `schema_migrations`
Processing by Lti2Tp::RegistrationsController#create as HTML
  Parameters: {"lti_message_type"=>"ToolProxyRegistrationRequest", "lti_version"=>"LTI-2p0", "user_id"=>"2", "roles"=>"urn:lti:sysrole:ims/lis/SysAdmin", "tc_profile_url"=>"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/a26a59b0-d623-0132-88f1-20c9d07c6451", "reg_key"=>"a26a5770-d623-0132-88f1-20c9d07c6451", "reg_password"=>"[FILTERED]", "tc_oauth_half_secret"=>"5f0ff79ce62d8435935d0ad0f8de8319138c37635e31e65f55457715da86cd98839190b8a407563581d073e8e45d78a0e45da9e9adff5e0737b68b222e6c5090549e4b8183c766138f87349774ff68c552f343556a1f309a2995769ac059a3148727702f572f68e03dd4feb2d3514cc983f962e8e1d9ad7786f81676fe5f0a35", "launch_presentation_return_url"=>"http://rails.kinexis.com:4000/admin/tool_actions", "launch_presentation_document_target"=>"window"}
  [1m[36mLti2Tp::Tool Load (0.8ms)[0m  [1mSELECT  `lti2_tp_tools`.* FROM `lti2_tp_tools`   ORDER BY `lti2_tp_tools`.`id` ASC LIMIT 1[0m
  [1m[35m (0.6ms)[0m  BEGIN
  [1m[36mSQL (1.8ms)[0m  [1mINSERT INTO `lti2_tp_registrations` (`created_at`, `launch_presentation_return_url`, `lti_version`, `message_type`, `reg_key`, `reg_password`, `status`, `tc_oauth_half_secret`, `tc_profile_url`, `tenant_basename`, `tenant_name`, `tool_consumer_profile_json`, `tool_id`, `tool_profile_json`, `updated_at`, `user_id`) VALUES ('2015-05-06 13:42:25', 'http://rails.kinexis.com:4000/admin/tool_actions', 'LTI-2p0', 'registration', 'a26a5770-d623-0132-88f1-20c9d07c6451', '95b0ed1805e8abaddd33aa6456e12f21', 'received', 5, 'http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/a26a59b0-d623-0132-88f1-20c9d07c6451', 'Elan University', 'Elan University', '{\"@context\":[\"http://purl.imsglobal.org/ctx/lti/v2/ToolConsumerProfile\",{\"ltitcp\":\"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/a26a59b0-d623-0132-88f1-20c9d07c6451#\"}],\"@type\":\"ToolConsumerProfile\",\"@id\":\"http://rails.kinexis.com:4000/tool_consumer_profiles/a26a59b0-d623-0132-88f1-20c9d07c6451\",\"lti_version\":\"LTI-2p0\",\"guid\":\"a26a59b0-d623-0132-88f1-20c9d07c6451\",\"product_instance\":{\"guid\":\"dcddf9808107-81ea-eaa4-1edf-5d24568c\",\"product_info\":{\"product_name\":{\"default_value\":\"Elan/LuMoS\",\"key\":\"product.name\"},\"product_version\":\"3.1\",\"description\":{\"default_value\":\"Elan University/LuMoS Learning Platform\",\"key\":\"product.version\"},\"technical_description\":{\"default_value\":\"LTI 1, 1.1 and 2.0 compliant\",\"key\":\"product.technicalDescription\"},\"product_family\":{\"code\":\"LuMoS\",\"vendor\":{\"code\":\"lms.LuMoS.org\",\"vendor_name\":{\"default_value\":\"LuMoS Corporation\",\"key\":\"product.vendor.name\"},\"description\":{\"default_value\":\"LuMoS Corporation is a fictitious vendor of a Learning Management System\",\"key\":\"product.vendor.description\"},\"website\":\"http://lms.LuMoS.org/products/omega\",\"timestamp\":\"2012-07-09T012:08:16-04:00\",\"contact\":{\"email\":\"support@lms.LuMoS.org\"}}}},\"support\":{\"email\":\"john.tibbetts@kinexis.com\"},\"service_owner\":{\"@id\":\"http://ec2.LuMoS.org/ServiceOwner\",\"timestamp\":\"2012-03-28T09:08:16-04:00\",\"service_owner_name\":{\"default_value\":\"Elan University\",\"key\":\"service_owner.name\"},\"description\":{\"default_value\":\"Elan University EC2 Cloud\",\"key\":\"service_owner.description\"},\"support\":{\"email\":\"techsupport@elan.edu\"}},\"service_provider\":{\"@id\":\"http://ec2.LuMoS.org/ServiceProvider\",\"guid\":\"ec2.LuMoS.org\",\"timestamp\":\"2012-07-09T012:08:16-04:00\",\"service_provider_name\":{\"default_value\":\"Elan University\",\"key\":\"service_provider.name\"},\"description\":{\"default_value\":\"Elan University EC2 Cloud\",\"key\":\"service_provider.description\"},\"support\":{\"email\":\"support@yasp.LuMoS.org\"}}},\"capability_offered\":[\"basic-lti-launch-request\",\"Result.autocreate\",\"Result.sourcedId\",\"User.id\",\"User.username\",\"CourseSection.sourcedId\",\"Person.sourcedId\",\"Person.email.primary\",\"Person.name.given\",\"Person.name.family\",\"Person.name.full\",\"Membership.role\",\"ToolProxy.custom.url\",\"ToolProxyBinding.custom.url\",\"LtiLink.custom.url\",\"ToolConsumerProfile.url\",\"OAuth.splitsecret\"],\"service_offered\":[{\"@type\":\"RestService\",\"@id\":\"ltitcp:ToolProxy.collection\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tools\",\"format\":[\"application/vnd.ims.lti.v2.toolproxy+json\"],\"action\":[\"POST\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:ToolProxy.item\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tools/{tool_proxy_guid}\",\"format\":[\"application/vnd.ims.lti.v2.toolproxy+json\"],\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:Result.item\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/resources/Result/{sourcedId}\",\"format\":[\"application/vnd.ims.lis.v2.result+json\"],\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:LtiLinkSettings\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tool_settings/{tool_proxy_guid}/ltilink/{link_id}\",\"format\":[\"application/vnd.ims.lti.v2.toolsettings+json\",\"application/vnd.ims.lti.v2.toolsettings.simple+json\"],\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:ToolProxyBindingSettings\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tool_settings/{tool_proxy_guid}/context/{context_id}\",\"format\":[\"application/vnd.ims.lti.v2.toolsettings+json\",\"application/vnd.ims.lti.v2.toolsettings.simple+json\"],\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:ToolProxySettings\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tool_settings/{tool_proxy_guid}\",\"format\":[\"application/vnd.ims.lti.v2.toolsettings+json\",\"application/vnd.ims.lti.v2.toolsettings.simple+json\"],\"action\":[\"GET\",\"PUT\"]}]}', 2, '{\"base_url_choice\":[{\"default_base_url\":\"http://rails.kinexis.com:5000\",\"selector\":{\"applies_to\":[\"IconEndpoint\",\"MessageHandler\"]}}],\"lti_version\":\"LTI-2p0\",\"message\":[{\"message_type\":[\"ToolProxyRegistrationRequest\",\"ToolProxyReregistrationRequest\"],\"parameter\":[{\"name\":\"tc_profile_url\",\"variable\":\"ToolConsumerProfile.url\"}],\"path\":\"http://rails.kinexis.com:5000/lti2_tp/reregistrations\"}],\"product_instance\":{\"guid\":\"fd75124a-140e-470f-944c-114d2d92bb40\",\"product_info\":{\"description\":{\"default_value\":\"Fabericious reflowable ePub3 Textbook\",\"key\":\"tool.description\"},\"product_family\":{\"code\":\"assessment-tool\",\"vendor\":{\"code\":\"fabericious.org\",\"contact\":{\"email\":\"info@fabericious.com\"},\"description\":{\"default_value\":\"Fabericious is a leading provider of interactive tools for education\",\"key\":\"tool.vendor.description\"},\"vendor_name\":{\"default_value\":\"Fab\",\"key\":\"tool.vendor.name\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\",\"website\":\"{http://rails.kinexis.com:5000}\"}},\"product_name\":{\"default_value\":\"LTI2 BookTools\",\"key\":\"tool.name\"},\"product_version\":\"10.3\",\"technical_description\":{\"default_value\":\"Support provided for all LTI 1 extensions as well as LTI 2\",\"key\":\"tool.technical\"}},\"service_provider\":{\"description\":{\"default_value\":\"Provider of high performance managed hosting environments\",\"key\":\"service_provider.description\"},\"guid\":\"18e7ea50-3d6d-4f6b-aff2-ed3ab577716c\",\"service_provider_name\":{\"default_value\":\"Amazon Cloud\",\"key\":\"service_provider.name\"},\"support\":{\"email\":\"support@ec2.fabericious.com\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\"},\"support\":{\"email\":\"helpdesk@fabericious.com\"}},\"resource_handler\":[{\"description\":{\"default_value\":\"Settings service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"tool_proxy_custom_url\",\"variable\":\"ToolProxy.custom.url\"},{\"name\":\"tool_proxy_binding_custom_url\",\"variable\":\"ToolProxyBinding.custom.url\"},{\"name\":\"lti_link_custom_url\",\"variable\":\"LtiLink.custom.url\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"ToolProxy.custom.url\",\"ToolProxyBinding.custom.url\",\"LtiLink.custom.url\"],\"path\":\"/settings\"}],\"resource_name\":{\"default_value\":\"Settings\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"setting\"}},{\"description\":{\"default_value\":\"Echo service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"fixed\":\"Narcissus\",\"name\":\"referrer\"},{\"fixed\":\"3.14159\",\"name\":\"pi\"},{\"name\":\"user_primary_email\",\"variable\":\"Person.email.primary\"},{\"name\":\"discipline\",\"variable\":\"CourseOffering.label\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\"],\"path\":\"/echoes\"}],\"resource_name\":{\"default_value\":\"Echo\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"echo\"}},{\"description\":{\"default_value\":\"Interactive resource\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"vbid\"},{\"name\":\"result_uri\",\"variable\":\"Result.uri\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"Result.autocreate\"],\"path\":\"/iresources\"}],\"resource_name\":{\"default_value\":\"InteractiveResource\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"iresource\"}}],\"service_offered\":[{\"@id\":\"http://rails.kinexis.com:5000/lti2_tp/ToolProxy.collection\",\"@type\":\"RestService\",\"action\":[\"PUT\"],\"endpoint\":\"http://rails.kinexis.com:5000/lti2_tp/tool_proxies\",\"format\":[\"\"]}]}', '2015-05-06 13:42:25', '2')[0m
  [1m[35m (1.1ms)[0m  COMMIT
Redirected to http://localhost:5000/lti_registration_wips?registration_id=7&return_url=/lti2_tp/registrations
Completed 302 Found in 418ms (ActiveRecord: 11.9ms)


Started GET "/lti_registration_wips?registration_id=7&return_url=/lti2_tp/registrations" for 127.0.0.1 at 2015-05-06 09:42:25 -0400
Processing by LtiRegistrationWipsController#index as HTML
  Parameters: {"registration_id"=>"7", "return_url"=>"/lti2_tp/registrations"}
  [1m[36mLti2Tp::Registration Load (8.6ms)[0m  [1mSELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 7 LIMIT 1[0m
  [1m[35m (1.4ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO `lti_registration_wips` (`created_at`, `product_name`, `registration_id`, `registration_return_url`, `support_email`, `tenant_name`, `updated_at`) VALUES ('2015-05-06 13:44:57', 'Elan/LuMoS', 7, '/lti2_tp/registrations', 'john.tibbetts@kinexis.com', 'Elan University', '2015-05-06 13:44:57')[0m
  [1m[35m (2.1ms)[0m  COMMIT
  Rendered lti_registration_wips/_form.html.haml (930.5ms)
  Rendered lti_registration_wips/index.html.haml within layouts/application (945.6ms)
Completed   in 152373ms
  [1m[36mLti2Tp::Registry Load (0.5ms)[0m  [1mSELECT `lti2_tp_registries`.* FROM `lti2_tp_registries`[0m


Started POST "/lti2_tp/registrations" for 127.0.0.1 at 2015-05-06 09:45:21 -0400
  [1m[35mActiveRecord::SchemaMigration Load (0.9ms)[0m  SELECT `schema_migrations`.* FROM `schema_migrations`
Processing by Lti2Tp::RegistrationsController#create as HTML
  Parameters: {"lti_message_type"=>"ToolProxyRegistrationRequest", "lti_version"=>"LTI-2p0", "user_id"=>"2", "roles"=>"urn:lti:sysrole:ims/lis/SysAdmin", "tc_profile_url"=>"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/0d3f2000-d624-0132-88f1-20c9d07c6451", "reg_key"=>"0d3f1d00-d624-0132-88f1-20c9d07c6451", "reg_password"=>"[FILTERED]", "tc_oauth_half_secret"=>"91c68070aa180c5311709ca162eeff184362ed3ce27f10d77ffb5fc6f8327482f6474f142ac7fbc72feef50624d7b1ff27aa34bb3ae6c2cda044ec0a4e5687387b6d3e71b909fc31c7b2d2b5316d6a3da5d66beac42ca7c94891e830273180c741d16a8285a3a7dc0dba176bb9fd0ca1cf5d47e571d668268a0ef01aab4ecfcb", "launch_presentation_return_url"=>"http://rails.kinexis.com:4000/admin/tool_actions", "launch_presentation_document_target"=>"window"}
  [1m[36mLti2Tp::Tool Load (0.6ms)[0m  [1mSELECT  `lti2_tp_tools`.* FROM `lti2_tp_tools`   ORDER BY `lti2_tp_tools`.`id` ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO `lti2_tp_registrations` (`created_at`, `launch_presentation_return_url`, `lti_version`, `message_type`, `reg_key`, `reg_password`, `status`, `tc_oauth_half_secret`, `tc_profile_url`, `tenant_basename`, `tenant_name`, `tool_consumer_profile_json`, `tool_id`, `tool_profile_json`, `updated_at`, `user_id`) VALUES ('2015-05-06 13:45:55', 'http://rails.kinexis.com:4000/admin/tool_actions', 'LTI-2p0', 'registration', '0d3f1d00-d624-0132-88f1-20c9d07c6451', 'f0d3ccaecc3bbf926da8719aa810058a', 'received', 91, 'http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/0d3f2000-d624-0132-88f1-20c9d07c6451', 'Elan University', 'Elan University', '{\"@context\":[\"http://purl.imsglobal.org/ctx/lti/v2/ToolConsumerProfile\",{\"ltitcp\":\"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/a26a59b0-d623-0132-88f1-20c9d07c6451#\"}],\"@type\":\"ToolConsumerProfile\",\"@id\":\"http://rails.kinexis.com:4000/tool_consumer_profiles/a26a59b0-d623-0132-88f1-20c9d07c6451\",\"lti_version\":\"LTI-2p0\",\"guid\":\"0d3f2000-d624-0132-88f1-20c9d07c6451\",\"product_instance\":{\"guid\":\"dcddf9808107-81ea-eaa4-1edf-5d24568c\",\"product_info\":{\"product_name\":{\"default_value\":\"Elan/LuMoS\",\"key\":\"product.name\"},\"product_version\":\"3.1\",\"description\":{\"default_value\":\"Elan University/LuMoS Learning Platform\",\"key\":\"product.version\"},\"technical_description\":{\"default_value\":\"LTI 1, 1.1 and 2.0 compliant\",\"key\":\"product.technicalDescription\"},\"product_family\":{\"code\":\"LuMoS\",\"vendor\":{\"code\":\"lms.LuMoS.org\",\"vendor_name\":{\"default_value\":\"LuMoS Corporation\",\"key\":\"product.vendor.name\"},\"description\":{\"default_value\":\"LuMoS Corporation is a fictitious vendor of a Learning Management System\",\"key\":\"product.vendor.description\"},\"website\":\"http://lms.LuMoS.org/products/omega\",\"timestamp\":\"2012-07-09T012:08:16-04:00\",\"contact\":{\"email\":\"support@lms.LuMoS.org\"}}}},\"support\":{\"email\":\"john.tibbetts@kinexis.com\"},\"service_owner\":{\"@id\":\"http://ec2.LuMoS.org/ServiceOwner\",\"timestamp\":\"2012-03-28T09:08:16-04:00\",\"service_owner_name\":{\"default_value\":\"Elan University\",\"key\":\"service_owner.name\"},\"description\":{\"default_value\":\"Elan University EC2 Cloud\",\"key\":\"service_owner.description\"},\"support\":{\"email\":\"techsupport@elan.edu\"}},\"service_provider\":{\"@id\":\"http://ec2.LuMoS.org/ServiceProvider\",\"guid\":\"ec2.LuMoS.org\",\"timestamp\":\"2012-07-09T012:08:16-04:00\",\"service_provider_name\":{\"default_value\":\"Elan University\",\"key\":\"service_provider.name\"},\"description\":{\"default_value\":\"Elan University EC2 Cloud\",\"key\":\"service_provider.description\"},\"support\":{\"email\":\"support@yasp.LuMoS.org\"}}},\"capability_offered\":[\"basic-lti-launch-request\",\"Result.autocreate\",\"Result.sourcedId\",\"User.id\",\"User.username\",\"CourseSection.sourcedId\",\"Person.sourcedId\",\"Person.email.primary\",\"Person.name.given\",\"Person.name.family\",\"Person.name.full\",\"Membership.role\",\"ToolProxy.custom.url\",\"ToolProxyBinding.custom.url\",\"LtiLink.custom.url\",\"ToolConsumerProfile.url\",\"OAuth.splitsecret\"],\"service_offered\":[{\"@type\":\"RestService\",\"@id\":\"ltitcp:ToolProxy.collection\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tools\",\"format\":[\"application/vnd.ims.lti.v2.toolproxy+json\"],\"action\":[\"POST\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:ToolProxy.item\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tools/{tool_proxy_guid}\",\"format\":[\"application/vnd.ims.lti.v2.toolproxy+json\"],\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:Result.item\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/resources/Result/{sourcedId}\",\"format\":[\"application/vnd.ims.lis.v2.result+json\"],\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:LtiLinkSettings\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tool_settings/{tool_proxy_guid}/ltilink/{link_id}\",\"format\":[\"application/vnd.ims.lti.v2.toolsettings+json\",\"application/vnd.ims.lti.v2.toolsettings.simple+json\"],\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:ToolProxyBindingSettings\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tool_settings/{tool_proxy_guid}/context/{context_id}\",\"format\":[\"application/vnd.ims.lti.v2.toolsettings+json\",\"application/vnd.ims.lti.v2.toolsettings.simple+json\"],\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:ToolProxySettings\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tool_settings/{tool_proxy_guid}\",\"format\":[\"application/vnd.ims.lti.v2.toolsettings+json\",\"application/vnd.ims.lti.v2.toolsettings.simple+json\"],\"action\":[\"GET\",\"PUT\"]}]}', 2, '{\"base_url_choice\":[{\"default_base_url\":\"http://rails.kinexis.com:5000\",\"selector\":{\"applies_to\":[\"IconEndpoint\",\"MessageHandler\"]}}],\"lti_version\":\"LTI-2p0\",\"message\":[{\"message_type\":[\"ToolProxyRegistrationRequest\",\"ToolProxyReregistrationRequest\"],\"parameter\":[{\"name\":\"tc_profile_url\",\"variable\":\"ToolConsumerProfile.url\"}],\"path\":\"http://rails.kinexis.com:5000/lti2_tp/reregistrations\"}],\"product_instance\":{\"guid\":\"fd75124a-140e-470f-944c-114d2d92bb40\",\"product_info\":{\"description\":{\"default_value\":\"Fabericious reflowable ePub3 Textbook\",\"key\":\"tool.description\"},\"product_family\":{\"code\":\"assessment-tool\",\"vendor\":{\"code\":\"fabericious.org\",\"contact\":{\"email\":\"info@fabericious.com\"},\"description\":{\"default_value\":\"Fabericious is a leading provider of interactive tools for education\",\"key\":\"tool.vendor.description\"},\"vendor_name\":{\"default_value\":\"Fab\",\"key\":\"tool.vendor.name\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\",\"website\":\"{http://rails.kinexis.com:5000}\"}},\"product_name\":{\"default_value\":\"LTI2 BookTools\",\"key\":\"tool.name\"},\"product_version\":\"10.3\",\"technical_description\":{\"default_value\":\"Support provided for all LTI 1 extensions as well as LTI 2\",\"key\":\"tool.technical\"}},\"service_provider\":{\"description\":{\"default_value\":\"Provider of high performance managed hosting environments\",\"key\":\"service_provider.description\"},\"guid\":\"18e7ea50-3d6d-4f6b-aff2-ed3ab577716c\",\"service_provider_name\":{\"default_value\":\"Amazon Cloud\",\"key\":\"service_provider.name\"},\"support\":{\"email\":\"support@ec2.fabericious.com\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\"},\"support\":{\"email\":\"helpdesk@fabericious.com\"}},\"resource_handler\":[{\"description\":{\"default_value\":\"Settings service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"tool_proxy_custom_url\",\"variable\":\"ToolProxy.custom.url\"},{\"name\":\"tool_proxy_binding_custom_url\",\"variable\":\"ToolProxyBinding.custom.url\"},{\"name\":\"lti_link_custom_url\",\"variable\":\"LtiLink.custom.url\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"ToolProxy.custom.url\",\"ToolProxyBinding.custom.url\",\"LtiLink.custom.url\"],\"path\":\"/settings\"}],\"resource_name\":{\"default_value\":\"Settings\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"setting\"}},{\"description\":{\"default_value\":\"Echo service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"fixed\":\"Narcissus\",\"name\":\"referrer\"},{\"fixed\":\"3.14159\",\"name\":\"pi\"},{\"name\":\"user_primary_email\",\"variable\":\"Person.email.primary\"},{\"name\":\"discipline\",\"variable\":\"CourseOffering.label\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\"],\"path\":\"/echoes\"}],\"resource_name\":{\"default_value\":\"Echo\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"echo\"}},{\"description\":{\"default_value\":\"Interactive resource\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"vbid\"},{\"name\":\"result_uri\",\"variable\":\"Result.uri\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"Result.autocreate\"],\"path\":\"/iresources\"}],\"resource_name\":{\"default_value\":\"InteractiveResource\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"iresource\"}}],\"service_offered\":[{\"@id\":\"http://rails.kinexis.com:5000/lti2_tp/ToolProxy.collection\",\"@type\":\"RestService\",\"action\":[\"PUT\"],\"endpoint\":\"http://rails.kinexis.com:5000/lti2_tp/tool_proxies\",\"format\":[\"\"]}]}', '2015-05-06 13:45:55', '2')[0m
  [1m[35m (1.1ms)[0m  COMMIT
Redirected to http://localhost:5000/lti_registration_wips?registration_id=8&return_url=/lti2_tp/registrations
Completed 302 Found in 219421ms (ActiveRecord: 27.8ms)
  [1m[36mLti2Tp::Registry Load (0.8ms)[0m  [1mSELECT `lti2_tp_registries`.* FROM `lti2_tp_registries`[0m


Started POST "/lti2_tp/registrations" for 127.0.0.1 at 2015-05-06 09:55:41 -0400
  [1m[35mActiveRecord::SchemaMigration Load (1.1ms)[0m  SELECT `schema_migrations`.* FROM `schema_migrations`
Processing by Lti2Tp::RegistrationsController#create as HTML
  Parameters: {"lti_message_type"=>"ToolProxyRegistrationRequest", "lti_version"=>"LTI-2p0", "user_id"=>"2", "roles"=>"urn:lti:sysrole:ims/lis/SysAdmin", "tc_profile_url"=>"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/7cb47ad0-d625-0132-88f1-20c9d07c6451", "reg_key"=>"7cb477c0-d625-0132-88f1-20c9d07c6451", "reg_password"=>"[FILTERED]", "tc_oauth_half_secret"=>"3258cc639834d9305a7561f30b2eae38301244ccf17ed97582bf6f1b63967a08f73432cfc20f53c2eeccc157285af13809d4af3ef79789c0f4056b998973d4aab3fdff438a9c74c456d96fd43a9a253da5e5d00db0ef197d95d3206b4ae2d19f7b879a57badb4f6790856a6ad14dc5a14f2cc30fa0bd22e9ec3e48f703da9ecd", "launch_presentation_return_url"=>"http://rails.kinexis.com:4000/admin/tool_actions", "launch_presentation_document_target"=>"window"}
  [1m[36mLti2Tp::Tool Load (0.8ms)[0m  [1mSELECT  `lti2_tp_tools`.* FROM `lti2_tp_tools`   ORDER BY `lti2_tp_tools`.`id` ASC LIMIT 1[0m
  [1m[35m (0.5ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO `lti2_tp_registrations` (`created_at`, `launch_presentation_return_url`, `lti_version`, `message_type`, `reg_key`, `reg_password`, `status`, `tc_oauth_half_secret`, `tc_profile_url`, `tenant_basename`, `tenant_name`, `tool_consumer_profile_json`, `tool_id`, `tool_profile_json`, `updated_at`, `user_id`) VALUES ('2015-05-06 13:55:53', 'http://rails.kinexis.com:4000/admin/tool_actions', 'LTI-2p0', 'registration', '7cb477c0-d625-0132-88f1-20c9d07c6451', '488b0e4041df0ac315a283cc2522231a', 'received', '3258cc639834d9305a7561f30b2eae38301244ccf17ed97582bf6f1b63967a08f73432cfc20f53c2eeccc157285af13809d4af3ef79789c0f4056b998973d4aab3fdff438a9c74c456d96fd43a9a253da5e5d00db0ef197d95d3206b4ae2d19f7b879a57badb4f6790856a6ad14dc5a14f2cc30fa0bd22e9ec3e48f703da9ecd', 'http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/7cb47ad0-d625-0132-88f1-20c9d07c6451', 'Elan University', 'Elan University', '{\"@context\":[\"http://purl.imsglobal.org/ctx/lti/v2/ToolConsumerProfile\",{\"ltitcp\":\"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/a26a59b0-d623-0132-88f1-20c9d07c6451#\"}],\"@type\":\"ToolConsumerProfile\",\"@id\":\"http://rails.kinexis.com:4000/tool_consumer_profiles/a26a59b0-d623-0132-88f1-20c9d07c6451\",\"lti_version\":\"LTI-2p0\",\"guid\":\"7cb47ad0-d625-0132-88f1-20c9d07c6451\",\"product_instance\":{\"guid\":\"dcddf9808107-81ea-eaa4-1edf-5d24568c\",\"product_info\":{\"product_name\":{\"default_value\":\"Elan/LuMoS\",\"key\":\"product.name\"},\"product_version\":\"3.1\",\"description\":{\"default_value\":\"Elan University/LuMoS Learning Platform\",\"key\":\"product.version\"},\"technical_description\":{\"default_value\":\"LTI 1, 1.1 and 2.0 compliant\",\"key\":\"product.technicalDescription\"},\"product_family\":{\"code\":\"LuMoS\",\"vendor\":{\"code\":\"lms.LuMoS.org\",\"vendor_name\":{\"default_value\":\"LuMoS Corporation\",\"key\":\"product.vendor.name\"},\"description\":{\"default_value\":\"LuMoS Corporation is a fictitious vendor of a Learning Management System\",\"key\":\"product.vendor.description\"},\"website\":\"http://lms.LuMoS.org/products/omega\",\"timestamp\":\"2012-07-09T012:08:16-04:00\",\"contact\":{\"email\":\"support@lms.LuMoS.org\"}}}},\"support\":{\"email\":\"john.tibbetts@kinexis.com\"},\"service_owner\":{\"@id\":\"http://ec2.LuMoS.org/ServiceOwner\",\"timestamp\":\"2012-03-28T09:08:16-04:00\",\"service_owner_name\":{\"default_value\":\"Elan University\",\"key\":\"service_owner.name\"},\"description\":{\"default_value\":\"Elan University EC2 Cloud\",\"key\":\"service_owner.description\"},\"support\":{\"email\":\"techsupport@elan.edu\"}},\"service_provider\":{\"@id\":\"http://ec2.LuMoS.org/ServiceProvider\",\"guid\":\"ec2.LuMoS.org\",\"timestamp\":\"2012-07-09T012:08:16-04:00\",\"service_provider_name\":{\"default_value\":\"Elan University\",\"key\":\"service_provider.name\"},\"description\":{\"default_value\":\"Elan University EC2 Cloud\",\"key\":\"service_provider.description\"},\"support\":{\"email\":\"support@yasp.LuMoS.org\"}}},\"capability_offered\":[\"basic-lti-launch-request\",\"Result.autocreate\",\"Result.sourcedId\",\"User.id\",\"User.username\",\"CourseSection.sourcedId\",\"Person.sourcedId\",\"Person.email.primary\",\"Person.name.given\",\"Person.name.family\",\"Person.name.full\",\"Membership.role\",\"ToolProxy.custom.url\",\"ToolProxyBinding.custom.url\",\"LtiLink.custom.url\",\"ToolConsumerProfile.url\",\"OAuth.splitsecret\"],\"service_offered\":[{\"@type\":\"RestService\",\"@id\":\"ltitcp:ToolProxy.collection\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tools\",\"format\":[\"application/vnd.ims.lti.v2.toolproxy+json\"],\"action\":[\"POST\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:ToolProxy.item\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tools/{tool_proxy_guid}\",\"format\":[\"application/vnd.ims.lti.v2.toolproxy+json\"],\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:Result.item\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/resources/Result/{sourcedId}\",\"format\":[\"application/vnd.ims.lis.v2.result+json\"],\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:LtiLinkSettings\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tool_settings/{tool_proxy_guid}/ltilink/{link_id}\",\"format\":[\"application/vnd.ims.lti.v2.toolsettings+json\",\"application/vnd.ims.lti.v2.toolsettings.simple+json\"],\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:ToolProxyBindingSettings\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tool_settings/{tool_proxy_guid}/context/{context_id}\",\"format\":[\"application/vnd.ims.lti.v2.toolsettings+json\",\"application/vnd.ims.lti.v2.toolsettings.simple+json\"],\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:ToolProxySettings\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tool_settings/{tool_proxy_guid}\",\"format\":[\"application/vnd.ims.lti.v2.toolsettings+json\",\"application/vnd.ims.lti.v2.toolsettings.simple+json\"],\"action\":[\"GET\",\"PUT\"]}]}', 2, '{\"base_url_choice\":[{\"default_base_url\":\"http://rails.kinexis.com:5000\",\"selector\":{\"applies_to\":[\"IconEndpoint\",\"MessageHandler\"]}}],\"lti_version\":\"LTI-2p0\",\"message\":[{\"message_type\":[\"ToolProxyRegistrationRequest\",\"ToolProxyReregistrationRequest\"],\"parameter\":[{\"name\":\"tc_profile_url\",\"variable\":\"ToolConsumerProfile.url\"}],\"path\":\"http://rails.kinexis.com:5000/lti2_tp/reregistrations\"}],\"product_instance\":{\"guid\":\"fd75124a-140e-470f-944c-114d2d92bb40\",\"product_info\":{\"description\":{\"default_value\":\"Fabericious reflowable ePub3 Textbook\",\"key\":\"tool.description\"},\"product_family\":{\"code\":\"assessment-tool\",\"vendor\":{\"code\":\"fabericious.org\",\"contact\":{\"email\":\"info@fabericious.com\"},\"description\":{\"default_value\":\"Fabericious is a leading provider of interactive tools for education\",\"key\":\"tool.vendor.description\"},\"vendor_name\":{\"default_value\":\"Fab\",\"key\":\"tool.vendor.name\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\",\"website\":\"{http://rails.kinexis.com:5000}\"}},\"product_name\":{\"default_value\":\"LTI2 BookTools\",\"key\":\"tool.name\"},\"product_version\":\"10.3\",\"technical_description\":{\"default_value\":\"Support provided for all LTI 1 extensions as well as LTI 2\",\"key\":\"tool.technical\"}},\"service_provider\":{\"description\":{\"default_value\":\"Provider of high performance managed hosting environments\",\"key\":\"service_provider.description\"},\"guid\":\"18e7ea50-3d6d-4f6b-aff2-ed3ab577716c\",\"service_provider_name\":{\"default_value\":\"Amazon Cloud\",\"key\":\"service_provider.name\"},\"support\":{\"email\":\"support@ec2.fabericious.com\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\"},\"support\":{\"email\":\"helpdesk@fabericious.com\"}},\"resource_handler\":[{\"description\":{\"default_value\":\"Settings service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"tool_proxy_custom_url\",\"variable\":\"ToolProxy.custom.url\"},{\"name\":\"tool_proxy_binding_custom_url\",\"variable\":\"ToolProxyBinding.custom.url\"},{\"name\":\"lti_link_custom_url\",\"variable\":\"LtiLink.custom.url\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"ToolProxy.custom.url\",\"ToolProxyBinding.custom.url\",\"LtiLink.custom.url\"],\"path\":\"/settings\"}],\"resource_name\":{\"default_value\":\"Settings\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"setting\"}},{\"description\":{\"default_value\":\"Echo service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"fixed\":\"Narcissus\",\"name\":\"referrer\"},{\"fixed\":\"3.14159\",\"name\":\"pi\"},{\"name\":\"user_primary_email\",\"variable\":\"Person.email.primary\"},{\"name\":\"discipline\",\"variable\":\"CourseOffering.label\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\"],\"path\":\"/echoes\"}],\"resource_name\":{\"default_value\":\"Echo\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"echo\"}},{\"description\":{\"default_value\":\"Interactive resource\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"vbid\"},{\"name\":\"result_uri\",\"variable\":\"Result.uri\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"Result.autocreate\"],\"path\":\"/iresources\"}],\"resource_name\":{\"default_value\":\"InteractiveResource\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"iresource\"}}],\"service_offered\":[{\"@id\":\"http://rails.kinexis.com:5000/lti2_tp/ToolProxy.collection\",\"@type\":\"RestService\",\"action\":[\"PUT\"],\"endpoint\":\"http://rails.kinexis.com:5000/lti2_tp/tool_proxies\",\"format\":[\"\"]}]}', '2015-05-06 13:55:53', '2')[0m
  [1m[35m (1.1ms)[0m  COMMIT
Redirected to http://localhost:5000/lti_registration_wips?registration_id=9&return_url=/lti2_tp/registrations
Completed 302 Found in 398761ms (ActiveRecord: 11.5ms)


Started GET "/lti_registration_wips?registration_id=9&return_url=/lti2_tp/registrations" for 127.0.0.1 at 2015-05-06 10:02:20 -0400
Processing by LtiRegistrationWipsController#index as HTML
  Parameters: {"registration_id"=>"9", "return_url"=>"/lti2_tp/registrations"}
  [1m[36mLti2Tp::Registration Load (0.6ms)[0m  [1mSELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 9 LIMIT 1[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO `lti_registration_wips` (`created_at`, `product_name`, `registration_id`, `registration_return_url`, `support_email`, `tenant_name`, `updated_at`) VALUES ('2015-05-06 14:02:21', 'Elan/LuMoS', 9, '/lti2_tp/registrations', 'john.tibbetts@kinexis.com', 'Elan University', '2015-05-06 14:02:21')[0m
  [1m[35m (1.3ms)[0m  COMMIT
  Rendered lti_registration_wips/_form.html.haml (838.1ms)
  Rendered lti_registration_wips/index.html.haml within layouts/application (853.7ms)
Completed   in 1007ms
  [1m[36mLti2Tp::Registry Load (0.6ms)[0m  [1mSELECT `lti2_tp_registries`.* FROM `lti2_tp_registries`[0m


Started POST "/lti2_tp/registrations" for 127.0.0.1 at 2015-05-06 10:04:45 -0400
  [1m[35mActiveRecord::SchemaMigration Load (1.7ms)[0m  SELECT `schema_migrations`.* FROM `schema_migrations`
Processing by Lti2Tp::RegistrationsController#create as HTML
  Parameters: {"lti_message_type"=>"ToolProxyRegistrationRequest", "lti_version"=>"LTI-2p0", "user_id"=>"2", "roles"=>"urn:lti:sysrole:ims/lis/SysAdmin", "tc_profile_url"=>"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/c36b3de0-d626-0132-88f1-20c9d07c6451", "reg_key"=>"c36b3b70-d626-0132-88f1-20c9d07c6451", "reg_password"=>"[FILTERED]", "tc_oauth_half_secret"=>"342dfb57e1327e4de7588b514bc8d49bd0ec13079f5b470733abd5a891a9bdf9fc4f6f60404df6755664b4ac04f71dfe64008fec99c342b2ec8c1511e37d092fa03a764c5a0bb5e04f12f39b6e98bc577d7e69ff735595d12b4e2ce97e0c6594ee39fa025d25804c258180c2b65b4d21d343f8652b3153733e1b15dc9e4beea5", "launch_presentation_return_url"=>"http://rails.kinexis.com:4000/admin/tool_actions", "launch_presentation_document_target"=>"window"}
  [1m[36mLti2Tp::Tool Load (0.7ms)[0m  [1mSELECT  `lti2_tp_tools`.* FROM `lti2_tp_tools`   ORDER BY `lti2_tp_tools`.`id` ASC LIMIT 1[0m
  [1m[35m (0.6ms)[0m  BEGIN
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO `lti2_tp_registrations` (`created_at`, `launch_presentation_return_url`, `lti_version`, `message_type`, `reg_key`, `reg_password`, `status`, `tc_oauth_half_secret`, `tc_profile_url`, `tenant_basename`, `tenant_name`, `tool_consumer_profile_json`, `tool_id`, `tool_profile_json`, `updated_at`, `user_id`) VALUES ('2015-05-06 14:04:56', 'http://rails.kinexis.com:4000/admin/tool_actions', 'LTI-2p0', 'registration', 'c36b3b70-d626-0132-88f1-20c9d07c6451', '8c011c1b400e225c00733fef839e6d0c', 'received', '342dfb57e1327e4de7588b514bc8d49bd0ec13079f5b470733abd5a891a9bdf9fc4f6f60404df6755664b4ac04f71dfe64008fec99c342b2ec8c1511e37d092fa03a764c5a0bb5e04f12f39b6e98bc577d7e69ff735595d12b4e2ce97e0c6594ee39fa025d25804c258180c2b65b4d21d343f8652b3153733e1b15dc9e4beea5', 'http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/c36b3de0-d626-0132-88f1-20c9d07c6451', 'Elan University', 'Elan University', '{\"@context\":[\"http://purl.imsglobal.org/ctx/lti/v2/ToolConsumerProfile\",{\"ltitcp\":\"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/a26a59b0-d623-0132-88f1-20c9d07c6451#\"}],\"@type\":\"ToolConsumerProfile\",\"@id\":\"http://rails.kinexis.com:4000/tool_consumer_profiles/a26a59b0-d623-0132-88f1-20c9d07c6451\",\"lti_version\":\"LTI-2p0\",\"guid\":\"c36b3de0-d626-0132-88f1-20c9d07c6451\",\"product_instance\":{\"guid\":\"dcddf9808107-81ea-eaa4-1edf-5d24568c\",\"product_info\":{\"product_name\":{\"default_value\":\"Elan/LuMoS\",\"key\":\"product.name\"},\"product_version\":\"3.1\",\"description\":{\"default_value\":\"Elan University/LuMoS Learning Platform\",\"key\":\"product.version\"},\"technical_description\":{\"default_value\":\"LTI 1, 1.1 and 2.0 compliant\",\"key\":\"product.technicalDescription\"},\"product_family\":{\"code\":\"LuMoS\",\"vendor\":{\"code\":\"lms.LuMoS.org\",\"vendor_name\":{\"default_value\":\"LuMoS Corporation\",\"key\":\"product.vendor.name\"},\"description\":{\"default_value\":\"LuMoS Corporation is a fictitious vendor of a Learning Management System\",\"key\":\"product.vendor.description\"},\"website\":\"http://lms.LuMoS.org/products/omega\",\"timestamp\":\"2012-07-09T012:08:16-04:00\",\"contact\":{\"email\":\"support@lms.LuMoS.org\"}}}},\"support\":{\"email\":\"john.tibbetts@kinexis.com\"},\"service_owner\":{\"@id\":\"http://ec2.LuMoS.org/ServiceOwner\",\"timestamp\":\"2012-03-28T09:08:16-04:00\",\"service_owner_name\":{\"default_value\":\"Elan University\",\"key\":\"service_owner.name\"},\"description\":{\"default_value\":\"Elan University EC2 Cloud\",\"key\":\"service_owner.description\"},\"support\":{\"email\":\"techsupport@elan.edu\"}},\"service_provider\":{\"@id\":\"http://ec2.LuMoS.org/ServiceProvider\",\"guid\":\"ec2.LuMoS.org\",\"timestamp\":\"2012-07-09T012:08:16-04:00\",\"service_provider_name\":{\"default_value\":\"Elan University\",\"key\":\"service_provider.name\"},\"description\":{\"default_value\":\"Elan University EC2 Cloud\",\"key\":\"service_provider.description\"},\"support\":{\"email\":\"support@yasp.LuMoS.org\"}}},\"capability_offered\":[\"basic-lti-launch-request\",\"Result.autocreate\",\"Result.sourcedId\",\"User.id\",\"User.username\",\"CourseSection.sourcedId\",\"Person.sourcedId\",\"Person.email.primary\",\"Person.name.given\",\"Person.name.family\",\"Person.name.full\",\"Membership.role\",\"ToolProxy.custom.url\",\"ToolProxyBinding.custom.url\",\"LtiLink.custom.url\",\"ToolConsumerProfile.url\",\"OAuth.splitsecret\"],\"service_offered\":[{\"@type\":\"RestService\",\"@id\":\"ltitcp:ToolProxy.collection\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tools\",\"format\":[\"application/vnd.ims.lti.v2.toolproxy+json\"],\"action\":[\"POST\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:ToolProxy.item\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tools/{tool_proxy_guid}\",\"format\":[\"application/vnd.ims.lti.v2.toolproxy+json\"],\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:Result.item\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/resources/Result/{sourcedId}\",\"format\":[\"application/vnd.ims.lis.v2.result+json\"],\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:LtiLinkSettings\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tool_settings/{tool_proxy_guid}/ltilink/{link_id}\",\"format\":[\"application/vnd.ims.lti.v2.toolsettings+json\",\"application/vnd.ims.lti.v2.toolsettings.simple+json\"],\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:ToolProxyBindingSettings\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tool_settings/{tool_proxy_guid}/context/{context_id}\",\"format\":[\"application/vnd.ims.lti.v2.toolsettings+json\",\"application/vnd.ims.lti.v2.toolsettings.simple+json\"],\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:ToolProxySettings\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tool_settings/{tool_proxy_guid}\",\"format\":[\"application/vnd.ims.lti.v2.toolsettings+json\",\"application/vnd.ims.lti.v2.toolsettings.simple+json\"],\"action\":[\"GET\",\"PUT\"]}]}', 2, '{\"base_url_choice\":[{\"default_base_url\":\"http://rails.kinexis.com:5000\",\"selector\":{\"applies_to\":[\"IconEndpoint\",\"MessageHandler\"]}}],\"lti_version\":\"LTI-2p0\",\"message\":[{\"message_type\":[\"ToolProxyRegistrationRequest\",\"ToolProxyReregistrationRequest\"],\"parameter\":[{\"name\":\"tc_profile_url\",\"variable\":\"ToolConsumerProfile.url\"}],\"path\":\"http://rails.kinexis.com:5000/lti2_tp/reregistrations\"}],\"product_instance\":{\"guid\":\"fd75124a-140e-470f-944c-114d2d92bb40\",\"product_info\":{\"description\":{\"default_value\":\"Fabericious reflowable ePub3 Textbook\",\"key\":\"tool.description\"},\"product_family\":{\"code\":\"assessment-tool\",\"vendor\":{\"code\":\"fabericious.org\",\"contact\":{\"email\":\"info@fabericious.com\"},\"description\":{\"default_value\":\"Fabericious is a leading provider of interactive tools for education\",\"key\":\"tool.vendor.description\"},\"vendor_name\":{\"default_value\":\"Fab\",\"key\":\"tool.vendor.name\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\",\"website\":\"{http://rails.kinexis.com:5000}\"}},\"product_name\":{\"default_value\":\"LTI2 BookTools\",\"key\":\"tool.name\"},\"product_version\":\"10.3\",\"technical_description\":{\"default_value\":\"Support provided for all LTI 1 extensions as well as LTI 2\",\"key\":\"tool.technical\"}},\"service_provider\":{\"description\":{\"default_value\":\"Provider of high performance managed hosting environments\",\"key\":\"service_provider.description\"},\"guid\":\"18e7ea50-3d6d-4f6b-aff2-ed3ab577716c\",\"service_provider_name\":{\"default_value\":\"Amazon Cloud\",\"key\":\"service_provider.name\"},\"support\":{\"email\":\"support@ec2.fabericious.com\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\"},\"support\":{\"email\":\"helpdesk@fabericious.com\"}},\"resource_handler\":[{\"description\":{\"default_value\":\"Settings service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"tool_proxy_custom_url\",\"variable\":\"ToolProxy.custom.url\"},{\"name\":\"tool_proxy_binding_custom_url\",\"variable\":\"ToolProxyBinding.custom.url\"},{\"name\":\"lti_link_custom_url\",\"variable\":\"LtiLink.custom.url\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"ToolProxy.custom.url\",\"ToolProxyBinding.custom.url\",\"LtiLink.custom.url\"],\"path\":\"/settings\"}],\"resource_name\":{\"default_value\":\"Settings\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"setting\"}},{\"description\":{\"default_value\":\"Echo service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"fixed\":\"Narcissus\",\"name\":\"referrer\"},{\"fixed\":\"3.14159\",\"name\":\"pi\"},{\"name\":\"user_primary_email\",\"variable\":\"Person.email.primary\"},{\"name\":\"discipline\",\"variable\":\"CourseOffering.label\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\"],\"path\":\"/echoes\"}],\"resource_name\":{\"default_value\":\"Echo\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"echo\"}},{\"description\":{\"default_value\":\"Interactive resource\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"vbid\"},{\"name\":\"result_uri\",\"variable\":\"Result.uri\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"Result.autocreate\"],\"path\":\"/iresources\"}],\"resource_name\":{\"default_value\":\"InteractiveResource\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"iresource\"}}],\"service_offered\":[{\"@id\":\"http://rails.kinexis.com:5000/lti2_tp/ToolProxy.collection\",\"@type\":\"RestService\",\"action\":[\"PUT\"],\"endpoint\":\"http://rails.kinexis.com:5000/lti2_tp/tool_proxies\",\"format\":[\"\"]}]}', '2015-05-06 14:04:56', '2')[0m
  [1m[35m (0.8ms)[0m  COMMIT
Redirected to http://localhost:5000/lti_registration_wips?registration_id=10&return_url=/lti2_tp/registrations
Completed 302 Found in 10107ms (ActiveRecord: 12.9ms)


Started GET "/lti_registration_wips?registration_id=10&return_url=/lti2_tp/registrations" for 127.0.0.1 at 2015-05-06 10:04:56 -0400
Processing by LtiRegistrationWipsController#index as HTML
  Parameters: {"registration_id"=>"10", "return_url"=>"/lti2_tp/registrations"}
  [1m[36mLti2Tp::Registration Load (0.6ms)[0m  [1mSELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 10 LIMIT 1[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO `lti_registration_wips` (`created_at`, `product_name`, `registration_id`, `registration_return_url`, `support_email`, `tenant_name`, `updated_at`) VALUES ('2015-05-06 14:05:03', 'Elan/LuMoS', 10, '/lti2_tp/registrations', 'john.tibbetts@kinexis.com', 'Elan University', '2015-05-06 14:05:03')[0m
  [1m[35m (2.0ms)[0m  COMMIT
  Rendered lti_registration_wips/_form.html.haml (2212.9ms)
  Rendered lti_registration_wips/index.html.haml within layouts/application (2233.3ms)
Completed 200 OK in 9970ms (Views: 3073.4ms | ActiveRecord: 9.0ms)


Started PATCH "/lti_registration_wips/9" for 127.0.0.1 at 2015-05-06 10:05:17 -0400
Processing by LtiRegistrationWipsController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"+LNGKUlHZyaIdfF/ro2I5S5tDt5OHWNN3zlEqmt/BN8=", "lti_registration_wip"=>{"support_email"=>"john.tibbetts@kinexis.com", "product_name"=>"Elan/LuMoS", "tenant_name"=>"1005Elan University"}, "commit"=>"Update Lti registration wip", "id"=>"9"}
  [1m[36mLtiRegistrationWip Load (0.8ms)[0m  [1mSELECT  `lti_registration_wips`.* FROM `lti_registration_wips`  WHERE `lti_registration_wips`.`id` = 9 LIMIT 1[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mUPDATE `lti_registration_wips` SET `tenant_name` = '1005Elan University', `updated_at` = '2015-05-06 14:05:17' WHERE `lti_registration_wips`.`id` = 9[0m
  [1m[35m (1.4ms)[0m  COMMIT
  [1m[36mLti2Tp::Registration Load (0.5ms)[0m  [1mSELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 10 LIMIT 1[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mUPDATE `lti2_tp_registrations` SET `tenant_name` = '1005Elan University', `updated_at` = '2015-05-06 14:05:17' WHERE `lti2_tp_registrations`.`id` = 10[0m
  [1m[35m (0.9ms)[0m  COMMIT
  [1m[36mLtiRegistrationWip Load (0.7ms)[0m  [1mSELECT  `lti_registration_wips`.* FROM `lti_registration_wips`  WHERE `lti_registration_wips`.`id` = 9 LIMIT 1[0m
  [1m[35mLti2Tp::Registration Load (1.1ms)[0m  SELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 10 LIMIT 1
  [1m[36m (0.7ms)[0m  [1mBEGIN[0m
  [1m[35mTenant Exists (0.5ms)[0m  SELECT  1 AS one FROM `tenants`  WHERE `tenants`.`tenant_name` = BINARY '1005Elan University' LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO `tenants` (`created_at`, `tenant_name`, `updated_at`) VALUES ('2015-05-06 14:05:17', '1005Elan University', '2015-05-06 14:05:17')[0m
  [1m[35m (0.6ms)[0m  COMMIT
  [1m[36m (4.8ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (8.7ms)[0m  UPDATE `lti2_tp_registrations` SET `end_registration_id` = '3acdd9b0-d62b-0132-88f2-20c9d07c6451', `tool_proxy_json` = '{\"@context\":[\"http://purl.imsglobal.org/ctx/lti/v2/ToolConsumerProfile\",{\"ltitcp\":\"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/a26a59b0-d623-0132-88f1-20c9d07c6451#\"}],\"@type\":\"ToolProxy\",\"@id\":\"ToolProxyProposal_at_2015-05-06T14:05:17Z\",\"lti_version\":\"LTI-2p0\",\"tool_proxy_guid\":\"c36b3b70-d626-0132-88f1-20c9d07c6451\",\"tool_consumer_profile\":\"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/c36b3de0-d626-0132-88f1-20c9d07c6451\",\"tool_profile\":{\"base_url_choice\":[{\"default_base_url\":\"http://rails.kinexis.com:5000\",\"selector\":{\"applies_to\":[\"IconEndpoint\",\"MessageHandler\"]}}],\"lti_version\":\"LTI-2p0\",\"message\":[{\"message_type\":[\"ToolProxyRegistrationRequest\",\"ToolProxyReregistrationRequest\"],\"parameter\":[{\"name\":\"tc_profile_url\",\"variable\":\"ToolConsumerProfile.url\"}],\"path\":\"http://rails.kinexis.com:5000/lti2_tp/reregistrations\"}],\"product_instance\":{\"guid\":\"fd75124a-140e-470f-944c-114d2d92bb40\",\"product_info\":{\"description\":{\"default_value\":\"Fabericious reflowable ePub3 Textbook\",\"key\":\"tool.description\"},\"product_family\":{\"code\":\"assessment-tool\",\"vendor\":{\"code\":\"fabericious.org\",\"contact\":{\"email\":\"info@fabericious.com\"},\"description\":{\"default_value\":\"Fabericious is a leading provider of interactive tools for education\",\"key\":\"tool.vendor.description\"},\"vendor_name\":{\"default_value\":\"Fab\",\"key\":\"tool.vendor.name\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\",\"website\":\"{http://rails.kinexis.com:5000}\"}},\"product_name\":{\"default_value\":\"LTI2 BookTools\",\"key\":\"tool.name\"},\"product_version\":\"10.3\",\"technical_description\":{\"default_value\":\"Support provided for all LTI 1 extensions as well as LTI 2\",\"key\":\"tool.technical\"}},\"service_provider\":{\"description\":{\"default_value\":\"Provider of high performance managed hosting environments\",\"key\":\"service_provider.description\"},\"guid\":\"18e7ea50-3d6d-4f6b-aff2-ed3ab577716c\",\"service_provider_name\":{\"default_value\":\"Amazon Cloud\",\"key\":\"service_provider.name\"},\"support\":{\"email\":\"support@ec2.fabericious.com\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\"},\"support\":{\"email\":\"helpdesk@fabericious.com\"}},\"resource_handler\":[{\"description\":{\"default_value\":\"Settings service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"tool_proxy_custom_url\",\"variable\":\"ToolProxy.custom.url\"},{\"name\":\"tool_proxy_binding_custom_url\",\"variable\":\"ToolProxyBinding.custom.url\"},{\"name\":\"lti_link_custom_url\",\"variable\":\"LtiLink.custom.url\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"ToolProxy.custom.url\",\"ToolProxyBinding.custom.url\",\"LtiLink.custom.url\"],\"path\":\"/settings\"}],\"resource_name\":{\"default_value\":\"Settings\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"setting\"}},{\"description\":{\"default_value\":\"Echo service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"fixed\":\"Narcissus\",\"name\":\"referrer\"},{\"fixed\":\"3.14159\",\"name\":\"pi\"},{\"name\":\"user_primary_email\",\"variable\":\"Person.email.primary\"},{\"name\":\"discipline\",\"variable\":\"CourseOffering.label\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\"],\"path\":\"/echoes\"}],\"resource_name\":{\"default_value\":\"Echo\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"echo\"}},{\"description\":{\"default_value\":\"Interactive resource\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"vbid\"},{\"name\":\"result_uri\",\"variable\":\"Result.uri\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"Result.autocreate\"],\"path\":\"/iresources\"}],\"resource_name\":{\"default_value\":\"InteractiveResource\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"iresource\"}}],\"service_offered\":[{\"@id\":\"http://rails.kinexis.com:5000/lti2_tp/ToolProxy.collection\",\"@type\":\"RestService\",\"action\":[\"PUT\"],\"endpoint\":\"http://rails.kinexis.com:5000/lti2_tp/tool_proxies\",\"format\":[\"\"]}]},\"security_contract\":{\"shared_secret\":\"dc88e399ef4b072ab4be7fb06297f7c1\",\"tool_service\":[{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxy.collection\",\"action\":[\"POST\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxy.item\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:Result.item\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:LtiLinkSettings\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxyBindingSettings\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxySettings\",\"action\":[\"GET\",\"PUT\"]}]}}', `updated_at` = '2015-05-06 14:36:39' WHERE `lti2_tp_registrations`.`id` = 10
  [1m[36m (6.8ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE `lti2_tp_registrations` SET `status` = 'register', `updated_at` = '2015-05-06 14:36:39' WHERE `lti2_tp_registrations`.`id` = 10[0m
  [1m[35m (0.6ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mTenant Exists (0.5ms)[0m  SELECT  1 AS one FROM `tenants`  WHERE (`tenants`.`tenant_name` = BINARY '1005Elan University' AND `tenants`.`id` != 4) LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE `tenants` SET `secret` = 'dc88e399ef4b072ab4be7fb06297f7c1', `tenant_key` = 'c36b3b70-d626-0132-88f1-20c9d07c6451', `updated_at` = '2015-05-06 14:36:39' WHERE `tenants`.`id` = 4[0m
  [1m[35m (0.6ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  UPDATE `lti2_tp_registrations` SET `tenant_id` = 4, `updated_at` = '2015-05-06 14:36:39' WHERE `lti2_tp_registrations`.`id` = 10
  [1m[36m (0.9ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:5000/lti2_tp/registrations?status=success&tool_guid=c36b3b70-d626-0132-88f1-20c9d07c6451&&id=10
Completed 302 Found in 1882194ms (ActiveRecord: 38.8ms)
  [1m[36mLti2Tp::Registry Load (0.6ms)[0m  [1mSELECT `lti2_tp_registries`.* FROM `lti2_tp_registries`[0m


Started POST "/lti2_tp/registrations" for 127.0.0.1 at 2015-05-06 11:04:49 -0400
  [1m[35mActiveRecord::SchemaMigration Load (1.0ms)[0m  SELECT `schema_migrations`.* FROM `schema_migrations`
Processing by Lti2Tp::RegistrationsController#create as HTML
  Parameters: {"lti_message_type"=>"ToolProxyRegistrationRequest", "lti_version"=>"LTI-2p0", "user_id"=>"2", "roles"=>"urn:lti:sysrole:ims/lis/SysAdmin", "tc_profile_url"=>"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/272caa40-d62f-0132-88f5-20c9d07c6451", "reg_key"=>"272ca1c0-d62f-0132-88f5-20c9d07c6451", "reg_password"=>"[FILTERED]", "tc_oauth_half_secret"=>"445174cd7a14bde86948fbad786b0558f8614f80bf3a682a418d9e1d21ec4822e0f1d1ce7780f0ed3858b141491d7b30454ad1b955d3400b3d8cc7e32929929db10d570fbfec1ba31c69f99460e3109962f56821a5d5ca557a81d473b0dc83d857045997add6c7353373b5a8f233b48367fa6ed465104d1d7f2e2dd5dd827651", "launch_presentation_return_url"=>"http://rails.kinexis.com:4000/admin/tool_actions", "launch_presentation_document_target"=>"window"}
  [1m[36mLti2Tp::Tool Load (0.5ms)[0m  [1mSELECT  `lti2_tp_tools`.* FROM `lti2_tp_tools`   ORDER BY `lti2_tp_tools`.`id` ASC LIMIT 1[0m
  [1m[35m (1.1ms)[0m  BEGIN
  [1m[36mSQL (1.8ms)[0m  [1mINSERT INTO `lti2_tp_registrations` (`created_at`, `launch_presentation_return_url`, `lti_version`, `message_type`, `reg_key`, `reg_password`, `status`, `tc_oauth_half_secret`, `tc_profile_url`, `tenant_basename`, `tenant_name`, `tool_consumer_profile_json`, `tool_id`, `tool_profile_json`, `updated_at`, `user_id`) VALUES ('2015-05-06 15:04:51', 'http://rails.kinexis.com:4000/admin/tool_actions', 'LTI-2p0', 'registration', '272ca1c0-d62f-0132-88f5-20c9d07c6451', '82b63a7fb8233d197c0574953b92c99f', 'received', '445174cd7a14bde86948fbad786b0558f8614f80bf3a682a418d9e1d21ec4822e0f1d1ce7780f0ed3858b141491d7b30454ad1b955d3400b3d8cc7e32929929db10d570fbfec1ba31c69f99460e3109962f56821a5d5ca557a81d473b0dc83d857045997add6c7353373b5a8f233b48367fa6ed465104d1d7f2e2dd5dd827651', 'http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/272caa40-d62f-0132-88f5-20c9d07c6451', 'Elan University', 'Elan University', '{\"@context\":[\"http://purl.imsglobal.org/ctx/lti/v2/ToolConsumerProfile\",{\"ltitcp\":\"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/272caa40-d62f-0132-88f5-20c9d07c6451#\"}],\"@type\":\"ToolConsumerProfile\",\"@id\":\"http://rails.kinexis.com:4000/tool_consumer_profiles/272caa40-d62f-0132-88f5-20c9d07c6451\",\"lti_version\":\"LTI-2p0\",\"guid\":\"272caa40-d62f-0132-88f5-20c9d07c6451\",\"product_instance\":{\"guid\":\"dcddf9808107-81ea-eaa4-1edf-5d24568c\",\"product_info\":{\"product_name\":{\"default_value\":\"Elan/LuMoS\",\"key\":\"product.name\"},\"product_version\":\"3.1\",\"description\":{\"default_value\":\"Elan University/LuMoS Learning Platform\",\"key\":\"product.version\"},\"technical_description\":{\"default_value\":\"LTI 1, 1.1 and 2.0 compliant\",\"key\":\"product.technicalDescription\"},\"product_family\":{\"code\":\"LuMoS\",\"vendor\":{\"code\":\"lms.LuMoS.org\",\"vendor_name\":{\"default_value\":\"LuMoS Corporation\",\"key\":\"product.vendor.name\"},\"description\":{\"default_value\":\"LuMoS Corporation is a fictitious vendor of a Learning Management System\",\"key\":\"product.vendor.description\"},\"website\":\"http://lms.LuMoS.org/products/omega\",\"timestamp\":\"2012-07-09T012:08:16-04:00\",\"contact\":{\"email\":\"support@lms.LuMoS.org\"}}}},\"support\":{\"email\":\"john.tibbetts@kinexis.com\"},\"service_owner\":{\"@id\":\"http://ec2.LuMoS.org/ServiceOwner\",\"timestamp\":\"2012-03-28T09:08:16-04:00\",\"service_owner_name\":{\"default_value\":\"Elan University\",\"key\":\"service_owner.name\"},\"description\":{\"default_value\":\"Elan University EC2 Cloud\",\"key\":\"service_owner.description\"},\"support\":{\"email\":\"techsupport@elan.edu\"}},\"service_provider\":{\"@id\":\"http://ec2.LuMoS.org/ServiceProvider\",\"guid\":\"ec2.LuMoS.org\",\"timestamp\":\"2012-07-09T012:08:16-04:00\",\"service_provider_name\":{\"default_value\":\"Elan University\",\"key\":\"service_provider.name\"},\"description\":{\"default_value\":\"Elan University EC2 Cloud\",\"key\":\"service_provider.description\"},\"support\":{\"email\":\"support@yasp.LuMoS.org\"}}},\"capability_offered\":[\"basic-lti-launch-request\",\"Result.autocreate\",\"Result.sourcedId\",\"User.id\",\"User.username\",\"CourseSection.sourcedId\",\"Person.sourcedId\",\"Person.email.primary\",\"Person.name.given\",\"Person.name.family\",\"Person.name.full\",\"Membership.role\",\"ToolProxy.custom.url\",\"ToolProxyBinding.custom.url\",\"LtiLink.custom.url\",\"ToolConsumerProfile.url\",\"OAuth.splitsecret\"],\"service_offered\":[{\"@type\":\"RestService\",\"@id\":\"ltitcp:ToolProxy.collection\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tools\",\"format\":[\"application/vnd.ims.lti.v2.toolproxy+json\"],\"action\":[\"POST\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:ToolProxy.item\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tools/{tool_proxy_guid}\",\"format\":[\"application/vnd.ims.lti.v2.toolproxy+json\"],\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:Result.item\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/resources/Result/{sourcedId}\",\"format\":[\"application/vnd.ims.lis.v2.result+json\"],\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:LtiLinkSettings\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tool_settings/{tool_proxy_guid}/ltilink/{link_id}\",\"format\":[\"application/vnd.ims.lti.v2.toolsettings+json\",\"application/vnd.ims.lti.v2.toolsettings.simple+json\"],\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:ToolProxyBindingSettings\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tool_settings/{tool_proxy_guid}/context/{context_id}\",\"format\":[\"application/vnd.ims.lti.v2.toolsettings+json\",\"application/vnd.ims.lti.v2.toolsettings.simple+json\"],\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestService\",\"@id\":\"ltitcp:ToolProxySettings\",\"endpoint\":\"http://rails.kinexis.com:4000/lti2_tc/tool_settings/{tool_proxy_guid}\",\"format\":[\"application/vnd.ims.lti.v2.toolsettings+json\",\"application/vnd.ims.lti.v2.toolsettings.simple+json\"],\"action\":[\"GET\",\"PUT\"]}]}', 2, '{\"base_url_choice\":[{\"default_base_url\":\"http://rails.kinexis.com:5000\",\"selector\":{\"applies_to\":[\"IconEndpoint\",\"MessageHandler\"]}}],\"lti_version\":\"LTI-2p0\",\"message\":[{\"message_type\":[\"ToolProxyRegistrationRequest\",\"ToolProxyReregistrationRequest\"],\"parameter\":[{\"name\":\"tc_profile_url\",\"variable\":\"ToolConsumerProfile.url\"}],\"path\":\"http://rails.kinexis.com:5000/lti2_tp/reregistrations\"}],\"product_instance\":{\"guid\":\"fd75124a-140e-470f-944c-114d2d92bb40\",\"product_info\":{\"description\":{\"default_value\":\"Fabericious reflowable ePub3 Textbook\",\"key\":\"tool.description\"},\"product_family\":{\"code\":\"assessment-tool\",\"vendor\":{\"code\":\"fabericious.org\",\"contact\":{\"email\":\"info@fabericious.com\"},\"description\":{\"default_value\":\"Fabericious is a leading provider of interactive tools for education\",\"key\":\"tool.vendor.description\"},\"vendor_name\":{\"default_value\":\"Fab\",\"key\":\"tool.vendor.name\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\",\"website\":\"{http://rails.kinexis.com:5000}\"}},\"product_name\":{\"default_value\":\"LTI2 BookTools\",\"key\":\"tool.name\"},\"product_version\":\"10.3\",\"technical_description\":{\"default_value\":\"Support provided for all LTI 1 extensions as well as LTI 2\",\"key\":\"tool.technical\"}},\"service_provider\":{\"description\":{\"default_value\":\"Provider of high performance managed hosting environments\",\"key\":\"service_provider.description\"},\"guid\":\"18e7ea50-3d6d-4f6b-aff2-ed3ab577716c\",\"service_provider_name\":{\"default_value\":\"Amazon Cloud\",\"key\":\"service_provider.name\"},\"support\":{\"email\":\"support@ec2.fabericious.com\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\"},\"support\":{\"email\":\"helpdesk@fabericious.com\"}},\"resource_handler\":[{\"description\":{\"default_value\":\"Settings service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"tool_proxy_custom_url\",\"variable\":\"ToolProxy.custom.url\"},{\"name\":\"tool_proxy_binding_custom_url\",\"variable\":\"ToolProxyBinding.custom.url\"},{\"name\":\"lti_link_custom_url\",\"variable\":\"LtiLink.custom.url\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"ToolProxy.custom.url\",\"ToolProxyBinding.custom.url\",\"LtiLink.custom.url\"],\"path\":\"/settings\"}],\"resource_name\":{\"default_value\":\"Settings\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"setting\"}},{\"description\":{\"default_value\":\"Echo service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"fixed\":\"Narcissus\",\"name\":\"referrer\"},{\"fixed\":\"3.14159\",\"name\":\"pi\"},{\"name\":\"user_primary_email\",\"variable\":\"Person.email.primary\"},{\"name\":\"discipline\",\"variable\":\"CourseOffering.label\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\"],\"path\":\"/echoes\"}],\"resource_name\":{\"default_value\":\"Echo\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"echo\"}},{\"description\":{\"default_value\":\"Interactive resource\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"vbid\"},{\"name\":\"result_uri\",\"variable\":\"Result.uri\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"Result.autocreate\"],\"path\":\"/iresources\"}],\"resource_name\":{\"default_value\":\"InteractiveResource\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"iresource\"}}],\"service_offered\":[{\"@id\":\"http://rails.kinexis.com:5000/lti2_tp/ToolProxy.collection\",\"@type\":\"RestService\",\"action\":[\"PUT\"],\"endpoint\":\"http://rails.kinexis.com:5000/lti2_tp/tool_proxies\",\"format\":[\"\"]}]}', '2015-05-06 15:04:51', '2')[0m
  [1m[35m (1.8ms)[0m  COMMIT
Redirected to http://localhost:5000/lti_registration_wips?registration_id=12&return_url=/lti2_tp/registrations
Completed 302 Found in 484ms (ActiveRecord: 17.8ms)


Started GET "/lti_registration_wips?registration_id=12&return_url=/lti2_tp/registrations" for 127.0.0.1 at 2015-05-06 11:04:51 -0400
Processing by LtiRegistrationWipsController#index as HTML
  Parameters: {"registration_id"=>"12", "return_url"=>"/lti2_tp/registrations"}
  [1m[36mLti2Tp::Registration Load (1.1ms)[0m  [1mSELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 12 LIMIT 1[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO `lti_registration_wips` (`created_at`, `product_name`, `registration_id`, `registration_return_url`, `support_email`, `tenant_name`, `updated_at`) VALUES ('2015-05-06 15:04:51', 'Elan/LuMoS', 12, '/lti2_tp/registrations', 'john.tibbetts@kinexis.com', 'Elan University', '2015-05-06 15:04:51')[0m
  [1m[35m (2.0ms)[0m  COMMIT
  Rendered lti_registration_wips/_form.html.haml (2809.9ms)
  Rendered lti_registration_wips/index.html.haml within layouts/application (2835.8ms)
Completed 200 OK in 4179ms (Views: 3951.5ms | ActiveRecord: 8.9ms)


Started PATCH "/lti_registration_wips/11" for 127.0.0.1 at 2015-05-06 11:05:04 -0400
Processing by LtiRegistrationWipsController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"+LNGKUlHZyaIdfF/ro2I5S5tDt5OHWNN3zlEqmt/BN8=", "lti_registration_wip"=>{"support_email"=>"john.tibbetts@kinexis.com", "product_name"=>"Elan/LuMoS", "tenant_name"=>"Elan University1105"}, "commit"=>"Update Lti registration wip", "id"=>"11"}
  [1m[36mLtiRegistrationWip Load (1.1ms)[0m  [1mSELECT  `lti_registration_wips`.* FROM `lti_registration_wips`  WHERE `lti_registration_wips`.`id` = 11 LIMIT 1[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36mSQL (1.1ms)[0m  [1mUPDATE `lti_registration_wips` SET `tenant_name` = 'Elan University1105', `updated_at` = '2015-05-06 15:05:04' WHERE `lti_registration_wips`.`id` = 11[0m
  [1m[35m (1.9ms)[0m  COMMIT
  [1m[36mLti2Tp::Registration Load (0.9ms)[0m  [1mSELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 12 LIMIT 1[0m
  [1m[35m (0.5ms)[0m  BEGIN
  [1m[36mSQL (0.9ms)[0m  [1mUPDATE `lti2_tp_registrations` SET `tenant_name` = 'Elan University1105', `updated_at` = '2015-05-06 15:05:04' WHERE `lti2_tp_registrations`.`id` = 12[0m
  [1m[35m (1.8ms)[0m  COMMIT
  [1m[36mLtiRegistrationWip Load (0.9ms)[0m  [1mSELECT  `lti_registration_wips`.* FROM `lti_registration_wips`  WHERE `lti_registration_wips`.`id` = 11 LIMIT 1[0m
  [1m[35mLti2Tp::Registration Load (1.4ms)[0m  SELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 12 LIMIT 1
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mTenant Exists (1.2ms)[0m  SELECT  1 AS one FROM `tenants`  WHERE `tenants`.`tenant_name` = BINARY 'Elan University1105' LIMIT 1
  [1m[36mSQL (1.2ms)[0m  [1mINSERT INTO `tenants` (`created_at`, `tenant_name`, `updated_at`) VALUES ('2015-05-06 15:05:04', 'Elan University1105', '2015-05-06 15:05:04')[0m
  [1m[35m (0.8ms)[0m  COMMIT
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  UPDATE `lti2_tp_registrations` SET `end_registration_id` = '3e02e280-d62f-0132-88f6-20c9d07c6451', `tool_proxy_json` = '{\"@context\":[\"http://purl.imsglobal.org/ctx/lti/v2/ToolConsumerProfile\",{\"ltitcp\":\"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/272caa40-d62f-0132-88f5-20c9d07c6451#\"}],\"@type\":\"ToolProxy\",\"@id\":\"ToolProxyProposal_at_2015-05-06T15:05:05Z\",\"lti_version\":\"LTI-2p0\",\"tool_proxy_guid\":\"272ca1c0-d62f-0132-88f5-20c9d07c6451\",\"tool_consumer_profile\":\"http://rails.kinexis.com:4000/lti2_tc/tool_consumer_profiles/272caa40-d62f-0132-88f5-20c9d07c6451\",\"tool_profile\":{\"base_url_choice\":[{\"default_base_url\":\"http://rails.kinexis.com:5000\",\"selector\":{\"applies_to\":[\"IconEndpoint\",\"MessageHandler\"]}}],\"lti_version\":\"LTI-2p0\",\"message\":[{\"message_type\":[\"ToolProxyRegistrationRequest\",\"ToolProxyReregistrationRequest\"],\"parameter\":[{\"name\":\"tc_profile_url\",\"variable\":\"ToolConsumerProfile.url\"}],\"path\":\"http://rails.kinexis.com:5000/lti2_tp/reregistrations\"}],\"product_instance\":{\"guid\":\"fd75124a-140e-470f-944c-114d2d92bb40\",\"product_info\":{\"description\":{\"default_value\":\"Fabericious reflowable ePub3 Textbook\",\"key\":\"tool.description\"},\"product_family\":{\"code\":\"assessment-tool\",\"vendor\":{\"code\":\"fabericious.org\",\"contact\":{\"email\":\"info@fabericious.com\"},\"description\":{\"default_value\":\"Fabericious is a leading provider of interactive tools for education\",\"key\":\"tool.vendor.description\"},\"vendor_name\":{\"default_value\":\"Fab\",\"key\":\"tool.vendor.name\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\",\"website\":\"{http://rails.kinexis.com:5000}\"}},\"product_name\":{\"default_value\":\"LTI2 BookTools\",\"key\":\"tool.name\"},\"product_version\":\"10.3\",\"technical_description\":{\"default_value\":\"Support provided for all LTI 1 extensions as well as LTI 2\",\"key\":\"tool.technical\"}},\"service_provider\":{\"description\":{\"default_value\":\"Provider of high performance managed hosting environments\",\"key\":\"service_provider.description\"},\"guid\":\"18e7ea50-3d6d-4f6b-aff2-ed3ab577716c\",\"service_provider_name\":{\"default_value\":\"Amazon Cloud\",\"key\":\"service_provider.name\"},\"support\":{\"email\":\"support@ec2.fabericious.com\"},\"timestamp\":\"2012-04-05T09:08:16-04:00\"},\"support\":{\"email\":\"helpdesk@fabericious.com\"}},\"resource_handler\":[{\"description\":{\"default_value\":\"Settings service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"tool_proxy_custom_url\",\"variable\":\"ToolProxy.custom.url\"},{\"name\":\"tool_proxy_binding_custom_url\",\"variable\":\"ToolProxyBinding.custom.url\"},{\"name\":\"lti_link_custom_url\",\"variable\":\"LtiLink.custom.url\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"ToolProxy.custom.url\",\"ToolProxyBinding.custom.url\",\"LtiLink.custom.url\"],\"path\":\"/settings\"}],\"resource_name\":{\"default_value\":\"Settings\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"setting\"}},{\"description\":{\"default_value\":\"Echo service\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"fixed\":\"Narcissus\",\"name\":\"referrer\"},{\"fixed\":\"3.14159\",\"name\":\"pi\"},{\"name\":\"user_primary_email\",\"variable\":\"Person.email.primary\"},{\"name\":\"discipline\",\"variable\":\"CourseOffering.label\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\"],\"path\":\"/echoes\"}],\"resource_name\":{\"default_value\":\"Echo\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"echo\"}},{\"description\":{\"default_value\":\"Interactive resource\",\"key\":\"resource.description\"},\"message\":[{\"message_type\":\"basic-lti-launch-request\",\"parameter\":[{\"name\":\"vbid\"},{\"name\":\"result_uri\",\"variable\":\"Result.uri\"}],\"enabled_capability\":[\"User.id\",\"Context.id\",\"CourseSection.label\",\"CourseSection.title\",\"Person.name.family\",\"Person.name.given\",\"Person.email.primary\",\"Result.autocreate\"],\"path\":\"/iresources\"}],\"resource_name\":{\"default_value\":\"InteractiveResource\",\"key\":\"resource.name\"},\"resource_type\":{\"code\":\"iresource\"}}],\"service_offered\":[{\"@id\":\"http://rails.kinexis.com:5000/lti2_tp/ToolProxy.collection\",\"@type\":\"RestService\",\"action\":[\"PUT\"],\"endpoint\":\"http://rails.kinexis.com:5000/lti2_tp/tool_proxies\",\"format\":[\"\"]}]},\"security_contract\":{\"shared_secret\":\"2a4aac72d9e07bbbba225495952e7491\",\"tool_service\":[{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxy.collection\",\"action\":[\"POST\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxy.item\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:Result.item\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:LtiLinkSettings\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxyBindingSettings\",\"action\":[\"GET\",\"PUT\"]},{\"@type\":\"RestServiceProfile\",\"service\":\"ltitcp:ToolProxySettings\",\"action\":[\"GET\",\"PUT\"]}]}}', `updated_at` = '2015-05-06 15:05:22' WHERE `lti2_tp_registrations`.`id` = 12
  [1m[36m (1.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mUPDATE `lti2_tp_registrations` SET `status` = 'register', `updated_at` = '2015-05-06 15:05:23' WHERE `lti2_tp_registrations`.`id` = 12[0m
  [1m[35m (0.8ms)[0m  COMMIT
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mTenant Exists (0.7ms)[0m  SELECT  1 AS one FROM `tenants`  WHERE (`tenants`.`tenant_name` = BINARY 'Elan University1105' AND `tenants`.`id` != 6) LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE `tenants` SET `secret` = '2a4aac72d9e07bbbba225495952e7491', `tenant_key` = '272ca1c0-d62f-0132-88f5-20c9d07c6451', `updated_at` = '2015-05-06 15:05:23' WHERE `tenants`.`id` = 6[0m
  [1m[35m (0.5ms)[0m  COMMIT
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  UPDATE `lti2_tp_registrations` SET `tenant_id` = 6, `updated_at` = '2015-05-06 15:05:23' WHERE `lti2_tp_registrations`.`id` = 12
  [1m[36m (0.9ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:5000/lti2_tp/registrations?status=success&tool_guid=272ca1c0-d62f-0132-88f5-20c9d07c6451&&id=12
Completed 302 Found in 18482ms (ActiveRecord: 27.4ms)


Started GET "/lti2_tp/registrations?status=success&tool_guid=272ca1c0-d62f-0132-88f5-20c9d07c6451&&id=12" for 127.0.0.1 at 2015-05-06 11:05:23 -0400
Processing by Lti2Tp::RegistrationsController#index as HTML
  Parameters: {"status"=>"success", "tool_guid"=>"272ca1c0-d62f-0132-88f5-20c9d07c6451", "id"=>"12"}
  [1m[35mLti2Tp::Registration Load (0.6ms)[0m  SELECT  `lti2_tp_registrations`.* FROM `lti2_tp_registrations`  WHERE `lti2_tp_registrations`.`id` = 12 LIMIT 1
Redirected to http://rails.kinexis.com:4000/admin/tool_actions?status=success&tool_guid=272ca1c0-d62f-0132-88f5-20c9d07c6451
Completed 302 Found in 14ms (ActiveRecord: 0.6ms)
  [1m[36mLti2Tp::Registry Load (0.3ms)[0m  [1mSELECT `lti2_tp_registries`.* FROM `lti2_tp_registries`[0m
  [1m[36mLti2Tp::Registry Load (0.3ms)[0m  [1mSELECT `lti2_tp_registries`.* FROM `lti2_tp_registries`[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.2ms)[0m  SELECT `schema_migrations`.* FROM `schema_migrations`
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[36mLti2Tp::Registry Load (0.4ms)[0m  [1mSELECT `lti2_tp_registries`.* FROM `lti2_tp_registries`[0m
  [1m[36mLti2Tp::Registry Load (0.3ms)[0m  [1mSELECT `lti2_tp_registries`.* FROM `lti2_tp_registries`[0m
